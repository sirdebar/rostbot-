2025-03-06 23:52:12,030 - __main__ - ERROR - Не удалось инициализировать базу данных. Проверьте настройки подключения.
2025-03-06 23:54:13,695 - __main__ - ERROR - Не удалось инициализировать базу данных. Проверьте настройки подключения.
2025-03-06 23:54:36,135 - database.base - ERROR - Ошибка при инициализации базы данных: connection was closed in the middle of operation
Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 462, in finish_socket_func
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 803, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 466, in finish_socket_func
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\database\base.py", line 51, in init_db
    async with engine.connect() as conn:
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\base.py", line 121, in __aenter__
    return await self.start(is_ctxmanager=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 270, in start
    await greenlet_spawn(self.sync_engine.connect)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3258, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3282, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 168, in _do_get
    with util.safe_reraise():
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 166, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 674, in __init__
    self.__connect()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 900, in __connect
    with util.safe_reraise():
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 937, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\asyncpg\connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\asyncpg\connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\asyncpg\connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\asyncpg\connect_utils.py", line 876, in __connect_addr
    await connected
asyncpg.exceptions.ConnectionDoesNotExistError: connection was closed in the middle of operation
2025-03-06 23:54:36,143 - __main__ - ERROR - Не удалось инициализировать базу данных. Проверьте настройки подключения.
2025-03-06 23:55:17,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-06 23:55:17,411 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-06 23:55:17,411 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,412 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-06 23:55:17,412 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,413 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-06 23:55:17,413 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,414 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("passwords")
2025-03-06 23:55:17,414 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,415 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-06 23:55:17,415 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,416 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("logs")
2025-03-06 23:55:17,416 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:55:17,418 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	user_id BIGINT NOT NULL, 
	username VARCHAR(255), 
	first_name VARCHAR(255), 
	last_name VARCHAR(255), 
	is_admin BOOLEAN, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	taken_logs_count INTEGER, 
	empty_logs_count INTEGER, 
	daily_empty_logs_count INTEGER, 
	last_empty_log_date DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id)
)


2025-03-06 23:55:17,418 - sqlalchemy.engine.Engine - INFO - [no key 0.00059s] ()
2025-03-06 23:55:17,422 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE passwords (
	id INTEGER NOT NULL, 
	password VARCHAR(255) NOT NULL, 
	max_uses INTEGER, 
	used_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	created_by BIGINT, 
	PRIMARY KEY (id)
)


2025-03-06 23:55:17,423 - sqlalchemy.engine.Engine - INFO - [no key 0.00075s] ()
2025-03-06 23:55:17,428 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE logs (
	id INTEGER NOT NULL, 
	file_id VARCHAR(255) NOT NULL, 
	file_name VARCHAR(255) NOT NULL, 
	file_size INTEGER, 
	is_taken BOOLEAN, 
	uploaded_at DATETIME, 
	taken_at DATETIME, 
	user_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-06 23:55:17,428 - sqlalchemy.engine.Engine - INFO - [no key 0.00052s] ()
2025-03-06 23:55:17,432 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-06 23:55:17,433 - database.base - INFO - База данных успешно инициализирована
2025-03-06 23:55:17,433 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-06 23:55:17,655 - __main__ - INFO - Бот запущен
2025-03-06 23:55:17,656 - aiogram.dispatcher - INFO - Start polling
2025-03-06 23:55:17,895 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-06 23:55:25,395 - aiogram.event - INFO - Update id=117255811 is handled. Duration 0 ms by bot id=8126821875
2025-03-06 23:55:50,813 - aiogram.event - INFO - Update id=117255812 is handled. Duration 0 ms by bot id=8126821875
2025-03-06 23:56:10,139 - aiogram.dispatcher - INFO - Polling stopped
2025-03-06 23:56:10,391 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-06 23:56:10,392 - __main__ - INFO - Бот остановлен
2025-03-06 23:58:29,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-06 23:58:29,264 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-06 23:58:29,264 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:58:29,265 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-06 23:58:29,265 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:58:29,266 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-06 23:58:29,266 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-06 23:58:29,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-06 23:58:29,268 - database.base - INFO - База данных успешно инициализирована
2025-03-06 23:58:29,268 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-06 23:58:29,486 - __main__ - INFO - Бот запущен
2025-03-06 23:58:29,487 - aiogram.dispatcher - INFO - Start polling
2025-03-06 23:58:29,708 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-06 23:58:38,999 - aiogram.event - INFO - Update id=117255813 is not handled. Duration 1343 ms by bot id=8126821875
2025-03-06 23:58:39,000 - aiogram.event - ERROR - Cause exception while process update id=117255813 by bot id=8126821875
UnboundExecutionError: Could not locate a bind configured on mapper Mapper[User(users)], SQL expression or this Session.
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 31, in cmd_start
    user, created = await user_repo.get_or_create_user(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 33, in get_or_create_user
    user = await self.get_by_user_id(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 14, in get_by_user_id
    result = await self.session.execute(select(User).where(User.user_id == user_id))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 186, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2179, in _execute_internal
    bind = self.get_bind(**bind_arguments)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2786, in get_bind
    raise sa_exc.UnboundExecutionError(
sqlalchemy.exc.UnboundExecutionError: Could not locate a bind configured on mapper Mapper[User(users)], SQL expression or this Session.
2025-03-06 23:59:05,474 - aiogram.dispatcher - INFO - Polling stopped
2025-03-06 23:59:05,725 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-06 23:59:05,726 - __main__ - INFO - Бот остановлен
2025-03-07 00:01:41,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:41,436 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:01:41,436 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:01:41,437 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:01:41,438 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:01:41,438 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:01:41,439 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:01:41,439 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:01:41,441 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:01:41,441 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:01:41,658 - __main__ - INFO - Бот запущен
2025-03-07 00:01:41,658 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:01:41,881 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:01:46,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:46,518 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:01:46,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (1083294848,)
2025-03-07 00:01:46,521 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:01:46,522 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (1083294848, 'sirdebar', 'doraemon', None, 1, 1, '2025-03-06 21:01:46.521787', '2025-03-06 21:01:46.521787', 0, 0, 0, None)
2025-03-07 00:01:46,525 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:01:46,530 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:46,532 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 00:01:46,533 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1,)
2025-03-07 00:01:46,712 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:01:46,713 - aiogram.event - INFO - Update id=117255814 is handled. Duration 1657 ms by bot id=8126821875
2025-03-07 00:01:51,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:51,776 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:01:51,776 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2025-03-07 00:01:51,875 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:01:51,876 - aiogram.event - INFO - Update id=117255815 is handled. Duration 93 ms by bot id=8126821875
2025-03-07 00:01:54,217 - aiogram.event - INFO - Update id=117255816 is handled. Duration 1407 ms by bot id=8126821875
2025-03-07 00:01:54,478 - aiogram.event - INFO - Update id=117255817 is handled. Duration 92 ms by bot id=8126821875
2025-03-07 00:01:56,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:56,700 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 00:01:56,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('123', 1, 0, 1, '2025-03-06 21:01:56.700384', 1083294848)
2025-03-07 00:01:56,704 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:01:56,708 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:01:56,708 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 00:01:56,709 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] (1,)
2025-03-07 00:01:56,710 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:01:56,711 - sqlalchemy.engine.Engine - INFO - [cached since 4.935s ago] ()
2025-03-07 00:01:56,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:01:56,903 - aiogram.event - INFO - Update id=117255818 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 00:01:58,441 - aiogram.event - INFO - Update id=117255819 is handled. Duration 186 ms by bot id=8126821875
2025-03-07 00:02:02,576 - aiogram.event - INFO - Update id=117255820 is handled. Duration 108 ms by bot id=8126821875
2025-03-07 00:03:06,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:06,846 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:03:06,847 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('BQACAgIAAxkBAAIJsmfKDYpCvJ5czyUUtPO7WeIjRlwSAALBawACCf9QSqM9XtLgN77-NgQ', 'tz.rar', 126, 0, '2025-03-06 21:03:06.846596', None, None)
2025-03-07 00:03:06,849 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:03:06,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:06,857 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:03:06,857 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (1,)
2025-03-07 00:03:07,121 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:03:07,121 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2025-03-07 00:03:07,122 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:03:07,123 - aiogram.event - INFO - Update id=117255821 is handled. Duration 281 ms by bot id=8126821875
2025-03-07 00:03:16,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:16,842 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:03:16,842 - sqlalchemy.engine.Engine - INFO - [cached since 90.33s ago] (7442982117,)
2025-03-07 00:03:16,843 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:03:16,844 - sqlalchemy.engine.Engine - INFO - [cached since 90.33s ago] (7442982117, 'the_trueon', 'l', None, 0, 1, '2025-03-06 21:03:16.843114', '2025-03-06 21:03:16.843114', 0, 0, 0, None)
2025-03-07 00:03:16,846 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:03:16,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:16,850 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 00:03:16,850 - sqlalchemy.engine.Engine - INFO - [cached since 90.32s ago] (2,)
2025-03-07 00:03:16,967 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:03:16,968 - aiogram.event - INFO - Update id=117255822 is handled. Duration 1343 ms by bot id=8126821875
2025-03-07 00:03:18,976 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:18,977 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 00:03:18,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('123',)
2025-03-07 00:03:18,980 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 00:03:18,980 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (1, 1)
2025-03-07 00:03:18,984 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 00:03:18,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] (0, 1)
2025-03-07 00:03:18,987 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:03:18,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:18,992 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:03:18,992 - sqlalchemy.engine.Engine - INFO - [cached since 92.48s ago] (7442982117,)
2025-03-07 00:03:19,142 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:03:19,143 - aiogram.event - INFO - Update id=117255823 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:03:22,336 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:22,338 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 00:03:22,338 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2025-03-07 00:03:22,444 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:03:22,445 - aiogram.event - INFO - Update id=117255824 is handled. Duration 108 ms by bot id=8126821875
2025-03-07 00:03:25,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:25,264 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 00:03:25,264 - sqlalchemy.engine.Engine - INFO - [cached since 2.927s ago] ()
2025-03-07 00:03:25,265 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:03:25,266 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] (7442982117,)
2025-03-07 00:03:25,267 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.is_taken = 0 ORDER BY logs.uploaded_at
 LIMIT ? OFFSET ?
2025-03-07 00:03:25,268 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] (1, 0)
2025-03-07 00:03:25,271 - sqlalchemy.engine.Engine - INFO - UPDATE logs SET is_taken=?, taken_at=?, user_id=? WHERE logs.id = ?
2025-03-07 00:03:25,272 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (1, '2025-03-06 21:03:25.270983', 2, 1)
2025-03-07 00:03:25,274 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:03:25,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:25,280 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 00:03:25,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('2025-03-06 21:03:25.280009', 1, 7442982117)
2025-03-07 00:03:25,282 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:03:25,477 - aiogram.event - INFO - Update id=117255825 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 00:03:37,161 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:03:37,162 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:03:37,162 - sqlalchemy.engine.Engine - INFO - [cached since 105.4s ago] ()
2025-03-07 00:03:37,258 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:03:37,261 - aiogram.event - INFO - Update id=117255826 is handled. Duration 93 ms by bot id=8126821875
2025-03-07 00:04:09,321 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:04:09,322 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:04:09,322 - sqlalchemy.engine.Engine - INFO - [cached since 62.2s ago] ()
2025-03-07 00:04:09,607 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:04:09,608 - aiogram.event - INFO - Update id=117255827 is handled. Duration 281 ms by bot id=8126821875
2025-03-07 00:04:12,933 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:04:12,934 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:04:12,934 - sqlalchemy.engine.Engine - INFO - [cached since 146.4s ago] (7442982117,)
2025-03-07 00:04:13,024 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:04:13,105 - aiogram.event - INFO - Update id=117255828 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:04:14,470 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:04:14,472 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:04:14,472 - sqlalchemy.engine.Engine - INFO - [cached since 67.35s ago] ()
2025-03-07 00:04:14,564 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:04:14,654 - aiogram.event - INFO - Update id=117255829 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 00:04:15,918 - aiogram.event - INFO - Update id=117255830 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:04:24,738 - aiogram.event - INFO - Update id=117255831 is handled. Duration 141 ms by bot id=8126821875
2025-03-07 00:04:34,497 - aiogram.event - INFO - Update id=117255832 is handled. Duration 156 ms by bot id=8126821875
2025-03-07 00:04:50,231 - aiogram.event - INFO - Update id=117255833 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 00:04:56,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:04:56,076 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:04:56,077 - sqlalchemy.engine.Engine - INFO - [cached since 189.6s ago] (7442982117,)
2025-03-07 00:04:56,175 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:04:56,255 - aiogram.event - INFO - Update id=117255834 is handled. Duration 188 ms by bot id=8126821875
2025-03-07 00:04:57,335 - aiogram.event - INFO - Update id=117255835 is handled. Duration 171 ms by bot id=8126821875
2025-03-07 00:04:58,358 - aiogram.event - INFO - Update id=117255836 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 00:04:58,358 - aiogram.event - ERROR - Cause exception while process update id=117255836 by bot id=8126821875
ValueError: invalid literal for int() with base 10: 'user'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\admin.py", line 293, in confirm_delete_user
    user_id = int(callback.data.split("_")[2])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'user'
2025-03-07 00:05:32,722 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:05:32,723 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:05:32,723 - sqlalchemy.engine.Engine - INFO - [cached since 145.6s ago] ()
2025-03-07 00:05:32,963 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:05:32,964 - aiogram.event - INFO - Update id=117255837 is handled. Duration 234 ms by bot id=8126821875
2025-03-07 00:05:34,390 - aiogram.event - INFO - Update id=117255838 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 00:05:52,321 - aiogram.event - INFO - Update id=117255839 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 00:06:02,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:02,102 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:06:02,102 - sqlalchemy.engine.Engine - INFO - [cached since 175.3s ago] ('BQACAgIAAxkBAAIJ0mfKDjoGBbqqNOTdSCaV6KhmFJRaAAIhcAACR41RSivdGP4y4XLVNgQ', 'tz.rar', 126, 0, '2025-03-06 21:06:02.102649', None, None)
2025-03-07 00:06:02,105 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:06:02,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:02,109 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:06:02,110 - sqlalchemy.engine.Engine - INFO - [cached since 175.3s ago] (2,)
2025-03-07 00:06:02,204 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:06:02,205 - sqlalchemy.engine.Engine - INFO - [cached since 175.1s ago] ()
2025-03-07 00:06:02,303 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:06:02,304 - aiogram.event - INFO - Update id=117255840 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 00:06:05,843 - aiogram.event - INFO - Update id=117255841 is handled. Duration 92 ms by bot id=8126821875
2025-03-07 00:06:07,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:07,889 - sqlalchemy.engine.Engine - INFO - DELETE FROM logs
2025-03-07 00:06:07,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ()
2025-03-07 00:06:07,894 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:06:08,077 - aiogram.event - INFO - Update id=117255842 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 00:06:22,829 - aiogram.event - INFO - Update id=117255843 is handled. Duration 109 ms by bot id=8126821875
2025-03-07 00:06:24,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:24,923 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:06:24,924 - sqlalchemy.engine.Engine - INFO - [cached since 278.4s ago] (7442982117,)
2025-03-07 00:06:24,925 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:06:24,925 - sqlalchemy.engine.Engine - INFO - [cached since 278.4s ago] (7442982117,)
2025-03-07 00:06:24,927 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 00:06:24,927 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('2025-03-06 21:06:24.927732', 12, 12, '2025-03-06 21:06:24.926671', 7442982117)
2025-03-07 00:06:24,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:06:24,934 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:24,935 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:06:24,935 - sqlalchemy.engine.Engine - INFO - [cached since 278.4s ago] (7442982117,)
2025-03-07 00:06:25,040 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:06:25,041 - aiogram.event - INFO - Update id=117255844 is handled. Duration 110 ms by bot id=8126821875
2025-03-07 00:06:27,116 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:27,116 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:06:27,117 - sqlalchemy.engine.Engine - INFO - [cached since 280.6s ago] (7442982117,)
2025-03-07 00:06:27,335 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:06:27,336 - aiogram.event - INFO - Update id=117255845 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 00:06:29,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:29,545 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 00:06:29,545 - sqlalchemy.engine.Engine - INFO - [cached since 187.2s ago] ()
2025-03-07 00:06:29,715 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:06:29,715 - aiogram.event - INFO - Update id=117255846 is handled. Duration 171 ms by bot id=8126821875
2025-03-07 00:06:34,115 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:06:34,115 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:06:34,115 - sqlalchemy.engine.Engine - INFO - [cached since 188.9s ago] (7442982117,)
2025-03-07 00:06:34,116 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.user_id = ?
2025-03-07 00:06:34,116 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (2,)
2025-03-07 00:06:34,227 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:06:34,227 - aiogram.event - INFO - Update id=117255847 is handled. Duration 108 ms by bot id=8126821875
2025-03-07 00:07:02,922 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:07:03,173 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:07:03,174 - __main__ - INFO - Бот остановлен
2025-03-07 00:08:20,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:08:20,622 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:08:20,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:08:20,624 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:08:20,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:08:20,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:08:20,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:08:20,626 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:08:20,626 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:08:20,626 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:08:20,883 - __main__ - INFO - Бот запущен
2025-03-07 00:08:20,884 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:08:21,119 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:08:23,274 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:08:23,282 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:08:23,283 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2025-03-07 00:08:23,535 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:08:23,536 - aiogram.event - INFO - Update id=117255848 is handled. Duration 266 ms by bot id=8126821875
2025-03-07 00:08:24,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:08:24,297 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:08:24,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] (7442982117,)
2025-03-07 00:08:24,400 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:08:24,481 - aiogram.event - INFO - Update id=117255849 is handled. Duration 188 ms by bot id=8126821875
2025-03-07 00:08:25,593 - aiogram.event - INFO - Update id=117255850 is handled. Duration 265 ms by bot id=8126821875
2025-03-07 00:08:26,226 - handlers.admin - INFO - Callback data: confirm_delete_user_7442982117, parts: ['confirm', 'delete', 'user', '7442982117']
2025-03-07 00:08:26,226 - aiogram.event - INFO - Update id=117255851 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 00:08:26,226 - aiogram.event - ERROR - Cause exception while process update id=117255851 by bot id=8126821875
ValueError: invalid literal for int() with base 10: 'user'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\admin.py", line 301, in confirm_delete_user
    user_id = int(parts[2])
              ^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'user'
2025-03-07 00:09:03,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:09:03,826 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:09:03,826 - sqlalchemy.engine.Engine - INFO - [cached since 40.55s ago] ()
2025-03-07 00:09:03,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:09:04,021 - aiogram.event - INFO - Update id=117255852 is handled. Duration 437 ms by bot id=8126821875
2025-03-07 00:09:05,252 - aiogram.event - INFO - Update id=117255853 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:11:47,257 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:11:47,508 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:11:47,509 - __main__ - INFO - Бот остановлен
2025-03-07 00:12:22,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:22,020 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:12:22,021 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:12:22,022 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:12:22,022 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:12:22,023 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:12:22,023 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:12:22,024 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:12:22,025 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:12:22,025 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:12:22,259 - __main__ - INFO - Бот запущен
2025-03-07 00:12:22,259 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:12:22,500 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:12:25,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:25,082 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:12:25,083 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ()
2025-03-07 00:12:25,085 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 00:12:25,085 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 00:12:25,390 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:12:25,391 - aiogram.event - INFO - Update id=117255854 is handled. Duration 312 ms by bot id=8126821875
2025-03-07 00:12:26,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:26,246 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:12:26,246 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (7442982117,)
2025-03-07 00:12:26,248 - keyboards - INFO - Создаем кнопку удаления для пользователя 7442982117 с callback_data: delete_user_7442982117
2025-03-07 00:12:26,768 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:12:26,936 - aiogram.event - INFO - Update id=117255855 is handled. Duration 686 ms by bot id=8126821875
2025-03-07 00:12:27,641 - handlers.admin - INFO - delete_user callback_data: delete_user_7442982117
2025-03-07 00:12:27,829 - aiogram.event - INFO - Update id=117255856 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 00:12:28,387 - handlers.admin - INFO - confirm_delete_user callback_data: confirm_user_7442982117
2025-03-07 00:12:28,389 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:28,390 - sqlalchemy.engine.Engine - INFO - UPDATE users SET is_active=?, updated_at=? WHERE users.user_id = ?
2025-03-07 00:12:28,390 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (0, '2025-03-06 21:12:28.390057', 7442982117)
2025-03-07 00:12:28,393 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:12:28,397 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:28,398 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:12:28,398 - sqlalchemy.engine.Engine - INFO - [cached since 2.152s ago] (7442982117,)
2025-03-07 00:12:28,493 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:12:28,494 - sqlalchemy.engine.Engine - INFO - [cached since 3.412s ago] ()
2025-03-07 00:12:28,495 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 00:12:28,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:12:28,662 - aiogram.event - INFO - Update id=117255857 is handled. Duration 280 ms by bot id=8126821875
2025-03-07 00:12:38,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:38,174 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:12:38,174 - sqlalchemy.engine.Engine - INFO - [cached since 11.93s ago] (7442982117,)
2025-03-07 00:12:38,284 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:12:38,285 - aiogram.event - INFO - Update id=117255858 is handled. Duration 1295 ms by bot id=8126821875
2025-03-07 00:12:42,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:12:42,074 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 00:12:42,075 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('123',)
2025-03-07 00:12:42,171 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:12:42,172 - aiogram.event - INFO - Update id=117255859 is handled. Duration 92 ms by bot id=8126821875
2025-03-07 00:12:48,600 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:12:48,858 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:12:48,859 - __main__ - INFO - Бот остановлен
2025-03-07 00:22:46,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:22:46,968 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:22:46,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:46,970 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:22:46,970 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:46,972 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:22:46,972 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:46,973 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:22:46,974 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:22:46,974 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:22:47,216 - __main__ - INFO - Бот запущен
2025-03-07 00:22:47,216 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:22:47,450 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:22:48,334 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:22:48,584 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:22:48,586 - __main__ - INFO - Бот остановлен
2025-03-07 00:22:54,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:22:54,883 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:22:54,883 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:54,884 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:22:54,885 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:54,885 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:22:54,886 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:22:54,887 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:22:54,887 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:22:54,887 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:22:55,117 - __main__ - INFO - Бот запущен
2025-03-07 00:22:55,117 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:22:55,346 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:24:18,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:24:18,677 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:24:18,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] (7699005037,)
2025-03-07 00:24:18,681 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:24:18,682 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] (7699005037, 'tnwfo', 'rostislav', None, 1, 1, '2025-03-06 21:24:18.681114', '2025-03-06 21:24:18.681114', 0, 0, 0, None)
2025-03-07 00:24:18,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:24:18,690 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:24:18,691 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 00:24:18,692 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (3,)
2025-03-07 00:24:18,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:24:18,790 - aiogram.event - INFO - Update id=117255860 is handled. Duration 1452 ms by bot id=8126821875
2025-03-07 00:24:24,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:24:24,250 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:24:24,250 - sqlalchemy.engine.Engine - INFO - [cached since 5.574s ago] (7699005037,)
2025-03-07 00:24:24,369 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:24:24,370 - aiogram.event - INFO - Update id=117255861 is handled. Duration 1406 ms by bot id=8126821875
2025-03-07 00:30:30,724 - aiogram.event - INFO - Update id=117255862 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 00:31:21,925 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:31:22,177 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:31:22,179 - __main__ - INFO - Бот остановлен
2025-03-07 00:31:24,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:31:24,661 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:31:24,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:31:24,662 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:31:24,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:31:24,664 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:31:24,664 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:31:24,664 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:31:24,666 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:31:24,666 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:31:24,888 - __main__ - INFO - Бот запущен
2025-03-07 00:31:24,889 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:31:25,126 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:31:32,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:31:32,062 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:31:32,062 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (1083294848,)
2025-03-07 00:31:32,160 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:31:32,161 - aiogram.event - INFO - Update id=117255863 is handled. Duration 1421 ms by bot id=8126821875
2025-03-07 00:36:47,795 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:36:48,046 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:36:48,048 - __main__ - INFO - Бот остановлен
2025-03-07 00:36:50,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:36:50,620 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:36:50,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:36:50,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:36:50,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:36:50,624 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:36:50,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:36:50,625 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:36:50,626 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:36:50,627 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:36:50,941 - __main__ - INFO - Бот запущен
2025-03-07 00:36:50,942 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:36:51,186 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:36:54,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:36:54,407 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:36:54,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (1083294848,)
2025-03-07 00:36:54,528 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:36:54,530 - aiogram.event - INFO - Update id=117255864 is handled. Duration 1468 ms by bot id=8126821875
2025-03-07 00:36:58,870 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:36:58,872 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:36:58,872 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2025-03-07 00:36:58,976 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:36:58,979 - aiogram.event - INFO - Update id=117255865 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 00:37:02,611 - aiogram.event - INFO - Update id=117255866 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:37:03,987 - aiogram.event - INFO - Update id=117255867 is handled. Duration 110 ms by bot id=8126821875
2025-03-07 00:37:04,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:04,758 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 00:37:04,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('123', 2, 0, 1, '2025-03-06 21:37:04.758530', 1083294848)
2025-03-07 00:37:04,763 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:37:04,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:04,771 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 00:37:04,771 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (2,)
2025-03-07 00:37:04,772 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:37:04,773 - sqlalchemy.engine.Engine - INFO - [cached since 5.901s ago] ()
2025-03-07 00:37:04,993 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:37:04,994 - aiogram.event - INFO - Update id=117255868 is handled. Duration 235 ms by bot id=8126821875
2025-03-07 00:37:15,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:15,556 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:37:15,556 - sqlalchemy.engine.Engine - INFO - [cached since 21.15s ago] (7442982117,)
2025-03-07 00:37:15,685 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:37:15,686 - aiogram.event - INFO - Update id=117255869 is handled. Duration 1375 ms by bot id=8126821875
2025-03-07 00:37:17,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:17,623 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 00:37:17,623 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('123',)
2025-03-07 00:37:17,625 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 00:37:17,625 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] (1, 2)
2025-03-07 00:37:17,629 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 00:37:17,629 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (0, 2)
2025-03-07 00:37:17,630 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:37:17,634 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:17,634 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:37:17,634 - sqlalchemy.engine.Engine - INFO - [cached since 23.23s ago] (7442982117,)
2025-03-07 00:37:17,637 - sqlalchemy.engine.Engine - INFO - UPDATE users SET is_active=?, updated_at=? WHERE users.user_id = ?
2025-03-07 00:37:17,637 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] (1, '2025-03-06 21:37:17.637263', 7442982117)
2025-03-07 00:37:17,639 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:37:17,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:37:17,643 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:37:17,644 - sqlalchemy.engine.Engine - INFO - [cached since 23.24s ago] (7442982117,)
2025-03-07 00:37:17,741 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:37:17,742 - aiogram.event - INFO - Update id=117255870 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 00:38:59,669 - aiogram.event - INFO - Update id=117255871 is handled. Duration 390 ms by bot id=8126821875
2025-03-07 00:40:33,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:40:33,160 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:40:33,160 - sqlalchemy.engine.Engine - INFO - [cached since 218.8s ago] (1083294848,)
2025-03-07 00:40:33,405 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:40:33,406 - aiogram.event - INFO - Update id=117255872 is handled. Duration 1766 ms by bot id=8126821875
2025-03-07 00:42:17,436 - aiogram.event - INFO - Update id=117255873 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 00:43:16,693 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:43:16,694 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:43:16,694 - sqlalchemy.engine.Engine - INFO - [cached since 382.3s ago] (8014080433,)
2025-03-07 00:43:16,699 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:43:16,699 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (8014080433, 'Sxldmy', 'picme', None, 0, 1, '2025-03-06 21:43:16.699237', '2025-03-06 21:43:16.699237', 0, 0, 0, None)
2025-03-07 00:43:16,702 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:43:16,707 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:43:16,708 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 00:43:16,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (4,)
2025-03-07 00:43:16,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:43:16,849 - aiogram.event - INFO - Update id=117255874 is handled. Duration 1515 ms by bot id=8126821875
2025-03-07 00:43:51,400 - aiogram.event - INFO - Update id=117255875 is handled. Duration 452 ms by bot id=8126821875
2025-03-07 00:43:57,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:43:57,771 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:43:57,772 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('BQACAgIAAxkBAAIKF2fKFx04axANBZdTDdj7OhPmOO3-AAKVcAACR41RStfjb3udF1LbNgQ', 'tz.rar', 126, 0, '2025-03-06 21:43:57.771580', None, None)
2025-03-07 00:43:57,773 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:43:57,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:43:57,780 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:43:57,780 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1,)
2025-03-07 00:43:57,884 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:43:57,884 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ()
2025-03-07 00:43:58,209 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:43:58,210 - aiogram.event - INFO - Update id=117255876 is handled. Duration 438 ms by bot id=8126821875
2025-03-07 00:44:40,816 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:44:40,817 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:44:40,817 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] (7699005037,)
2025-03-07 00:44:40,915 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:44:40,916 - aiogram.event - INFO - Update id=117255877 is handled. Duration 1577 ms by bot id=8126821875
2025-03-07 00:44:46,362 - aiogram.event - INFO - Update id=117255878 is handled. Duration 328 ms by bot id=8126821875
2025-03-07 00:44:53,567 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:44:53,568 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:44:53,569 - sqlalchemy.engine.Engine - INFO - [cached since 55.8s ago] ('BQACAgIAAxkBAAIKEmfKFrlj1WxxQ2pgr5fS2uQiBp-QAAInbAACiIhJSqvNSMK1uBPPNgQ', '10 ВЦ Тест.rar', 130137795, 0, '2025-03-06 21:44:53.568486', None, None)
2025-03-07 00:44:53,571 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:44:53,575 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:44:53,576 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:44:53,576 - sqlalchemy.engine.Engine - INFO - [cached since 55.8s ago] (2,)
2025-03-07 00:44:53,675 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:44:53,675 - sqlalchemy.engine.Engine - INFO - [cached since 55.79s ago] ()
2025-03-07 00:44:53,865 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:44:53,866 - aiogram.event - INFO - Update id=117255879 is handled. Duration 297 ms by bot id=8126821875
2025-03-07 00:45:04,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:45:04,263 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:45:04,264 - sqlalchemy.engine.Engine - INFO - [cached since 489.9s ago] (8014080433,)
2025-03-07 00:45:04,443 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:45:04,444 - aiogram.event - INFO - Update id=117255880 is handled. Duration 1358 ms by bot id=8126821875
2025-03-07 00:45:07,227 - aiogram.event - INFO - Update id=117255881 is not handled. Duration 16 ms by bot id=8126821875
2025-03-07 00:45:09,864 - aiogram.event - INFO - Update id=117255882 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 00:45:29,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:45:29,029 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:45:29,030 - sqlalchemy.engine.Engine - INFO - [cached since 514.6s ago] (7699005037,)
2025-03-07 00:45:29,122 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:45:29,123 - aiogram.event - INFO - Update id=117255883 is handled. Duration 1405 ms by bot id=8126821875
2025-03-07 00:45:33,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:45:33,892 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:45:33,894 - sqlalchemy.engine.Engine - INFO - [cached since 515s ago] ()
2025-03-07 00:45:33,996 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:45:33,997 - aiogram.event - INFO - Update id=117255884 is handled. Duration 186 ms by bot id=8126821875
2025-03-07 00:45:35,512 - aiogram.event - INFO - Update id=117255885 is handled. Duration 171 ms by bot id=8126821875
2025-03-07 00:45:52,436 - aiogram.event - INFO - Update id=117255886 is handled. Duration 266 ms by bot id=8126821875
2025-03-07 00:45:54,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:45:54,722 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 00:45:54,733 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:45:54,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:45:54,738 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 00:45:54,739 - sqlalchemy.engine.Engine - INFO - [cached since 530s ago] (3,)
2025-03-07 00:45:54,741 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:45:54,741 - sqlalchemy.engine.Engine - INFO - [cached since 535.9s ago] ()
2025-03-07 00:45:54,933 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:45:54,934 - aiogram.event - INFO - Update id=117255887 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 00:46:16,316 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:46:16,316 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 00:46:16,321 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 00:46:16,321 - sqlalchemy.engine.Engine - INFO - [cached since 538.7s ago] (1, 3)
2025-03-07 00:46:16,326 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 00:46:16,326 - sqlalchemy.engine.Engine - INFO - [cached since 538.7s ago] (0, 3)
2025-03-07 00:46:16,327 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:46:16,332 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:46:16,332 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:46:16,332 - sqlalchemy.engine.Engine - INFO - [cached since 561.9s ago] (8014080433,)
2025-03-07 00:46:16,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:46:16,617 - aiogram.event - INFO - Update id=117255888 is handled. Duration 311 ms by bot id=8126821875
2025-03-07 00:46:18,723 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:46:18,726 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 00:46:18,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2025-03-07 00:46:18,835 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:46:18,836 - aiogram.event - INFO - Update id=117255889 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 00:46:21,762 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:46:21,762 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 00:46:21,763 - sqlalchemy.engine.Engine - INFO - [cached since 3.036s ago] ()
2025-03-07 00:46:21,764 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:46:21,765 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (8014080433,)
2025-03-07 00:46:21,766 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.is_taken = 0 ORDER BY logs.uploaded_at
 LIMIT ? OFFSET ?
2025-03-07 00:46:21,766 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (2, 0)
2025-03-07 00:46:21,769 - sqlalchemy.engine.Engine - INFO - UPDATE logs SET is_taken=?, taken_at=?, user_id=? WHERE logs.id = ?
2025-03-07 00:46:21,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (1, '2025-03-06 21:46:21.768582', 4, 1)
2025-03-07 00:46:21,772 - sqlalchemy.engine.Engine - INFO - UPDATE logs SET is_taken=?, taken_at=?, user_id=? WHERE logs.id = ?
2025-03-07 00:46:21,773 - sqlalchemy.engine.Engine - INFO - [cached since 0.004868s ago] (1, '2025-03-06 21:46:21.772601', 4, 2)
2025-03-07 00:46:21,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:46:21,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:46:21,779 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 00:46:21,779 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('2025-03-06 21:46:21.779772', 2, 8014080433)
2025-03-07 00:46:21,781 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:46:22,076 - aiogram.event - INFO - Update id=117255890 is handled. Duration 313 ms by bot id=8126821875
2025-03-07 00:49:25,114 - aiogram.event - INFO - Update id=117255891 is not handled. Duration 14 ms by bot id=8126821875
2025-03-07 00:49:27,943 - aiogram.event - INFO - Update id=117255892 is not handled. Duration 16 ms by bot id=8126821875
2025-03-07 00:49:28,838 - aiogram.event - INFO - Update id=117255893 is handled. Duration 358 ms by bot id=8126821875
2025-03-07 00:49:30,601 - aiogram.event - INFO - Update id=117255894 is handled. Duration 235 ms by bot id=8126821875
2025-03-07 00:49:32,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,762 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,762 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKPWfKGGzeoLFXx-Etk87lBpMmRZktAAJnYgACtA5ISi1b1Anyu--kNgQ', 'session-79083262756.zip', 15104492, 0, '2025-03-06 21:49:32.762708', None, None)
2025-03-07 00:49:32,762 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,763 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,763 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKPmfKGGxA_8ONJ0_PYXVD59VbRIpsAAJoYgACtA5ISpoJiYADJHUMNgQ', 'session-79091511861.zip', 16812062, 0, '2025-03-06 21:49:32.763709', None, None)
2025-03-07 00:49:32,763 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,763 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,763 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKP2fKGGwtDzTtfCLI1NF0XPPJOx4WAAJpYgACtA5ISnWP0I024rT-NgQ', 'session-79093394251.zip', 15119771, 0, '2025-03-06 21:49:32.763709', None, None)
2025-03-07 00:49:32,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,764 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,764 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKQWfKGGxyo8xuraq5nJhTnFqjdIlzAAJrYgACtA5ISkjv43tzRIxbNgQ', 'session-79093747498.zip', 15278767, 0, '2025-03-06 21:49:32.764708', None, None)
2025-03-07 00:49:32,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,765 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,765 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKQmfKGGzGJu0MvdBbSdklCi_EDMYGAAJsYgACtA5ISsBOq_q4H0IKNgQ', 'session-79113960624.zip', 12225249, 0, '2025-03-06 21:49:32.765711', None, None)
2025-03-07 00:49:32,766 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,766 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,766 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKRGfKGGxJ1zDlNdX9acMoHPi1WMCqAAJuYgACtA5ISu7_jjP3Tz0rNgQ', 'session-79132157917.zip', 15273288, 0, '2025-03-06 21:49:32.766780', None, None)
2025-03-07 00:49:32,767 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,767 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,767 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKRmfKGGxNpGNK9u9Wg0DbmKReMXVyAAKjagACVbJJSkFCA5y9awGNNgQ', 'session-79143546510.zip', 15036370, 0, '2025-03-06 21:49:32.767780', None, None)
2025-03-07 00:49:32,768 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,768 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,768 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKSGfKGGzagYalK9hKuyhApmX3m53VAAKkagACVbJJSo6-RL__1qnwNgQ', 'session-79145893030.zip', 15161559, 0, '2025-03-06 21:49:32.768779', None, None)
2025-03-07 00:49:32,769 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,770 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,770 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKSWfKGGxeDVvch-CvBwnX253lv7Y1AAJ1YgACtA5ISpwO8xYReD6fNgQ', 'session-79147013582.zip', 15172549, 0, '2025-03-06 21:49:32.770783', None, None)
2025-03-07 00:49:32,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,772 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,772 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKSmfKGGw5Xs2unvooGOUFF4GR-1D3AAJ2YgACtA5ISp86OGVTlidoNgQ', 'session-79162539758.zip', 15280335, 0, '2025-03-06 21:49:32.772037', None, None)
2025-03-07 00:49:32,773 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,773 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,773 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKTGfKGGy0wMssuSBty8PJow663JR-AAJ3YgACtA5ISucQP-YCh0RjNgQ', 'session-79168206790.zip', 15306246, 0, '2025-03-06 21:49:32.773036', None, None)
2025-03-07 00:49:32,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,774 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,774 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKTWfKGGwZYAd-uMCesdGnY3t56WCbAAJ4YgACtA5ISmKu83Zs_H0UNgQ', 'session-79182280748.zip', 12094105, 0, '2025-03-06 21:49:32.774036', None, None)
2025-03-07 00:49:32,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,775 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,776 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKT2fKGGz2IPVjhtqt-FExfEykDQoXAAJ6YgACtA5ISgIsQbVxR-z_NgQ', 'session-79205937908.zip', 12318878, 0, '2025-03-06 21:49:32.775560', None, None)
2025-03-07 00:49:32,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,777 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,777 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKUGfKGGyAmlr3tfJSMQc6Hftj4P_NAALWbQAC6mtJSsQY6UaisKFaNgQ', 'session-79213128675.zip', 15470746, 0, '2025-03-06 21:49:32.777565', None, None)
2025-03-07 00:49:32,777 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,778 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,778 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKUmfKGGwZyh34dPMdPD4S5igGQcC0AAJ8YgACtA5ISr0AAWufzqJfxTYE', 'session-79243073009.zip', 16320557, 0, '2025-03-06 21:49:32.778565', None, None)
2025-03-07 00:49:32,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,779 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,779 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKU2fKGGw4CouyaCnbLnQ_R8kXb6N7AAJ9YgACtA5ISnzlDFW19biKNgQ', 'session-79243671680.zip', 17248050, 0, '2025-03-06 21:49:32.779567', None, None)
2025-03-07 00:49:32,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,780 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,780 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKVGfKGGxpCslpq0TttDGCGGw2EUmMAAJ-YgACtA5ISpB4Z3uaVSTqNgQ', 'session-79257419082.zip', 15840904, 0, '2025-03-06 21:49:32.780565', None, None)
2025-03-07 00:49:32,781 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,781 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,781 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKQGfKGGwnq_OhNN-Va1Vmr5qsyrckAAJqYgACtA5ISkVAI_bKXsOINgQ', 'session-79093510010.zip', 15321908, 0, '2025-03-06 21:49:32.781593', None, None)
2025-03-07 00:49:32,782 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,782 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,782 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKQ2fKGGxmp_j64zEMJIyQ3667bM8tAAJtYgACtA5ISmqHrerxCNwqNgQ', 'session-79121435047.zip', 15096076, 0, '2025-03-06 21:49:32.782593', None, None)
2025-03-07 00:49:32,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,783 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,783 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKRWfKGGyZOW10Js8AAdMpizegnaAZCwACb2IAArQOSEqFIhgI93HdbTYE', 'session-79136799083.zip', 15215631, 0, '2025-03-06 21:49:32.783592', None, None)
2025-03-07 00:49:32,784 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,784 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,784 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKR2fKGGyMUhnwg2AT21esAf9gfvEzAAJ0YgACtA5ISr5H2QpsuH3vNgQ', 'session-79144217466.zip', 15283104, 0, '2025-03-06 21:49:32.784593', None, None)
2025-03-07 00:49:32,785 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,785 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,785 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKS2fKGGwksxycRpoyi5DvptjshdbuAAKlagACVbJJSpfR_hwv2CpaNgQ', 'session-79167674567.zip', 15865167, 0, '2025-03-06 21:49:32.785593', None, None)
2025-03-07 00:49:32,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,787 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,787 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKTmfKGGy9JvMpxlOt0UO1C4y3jqmbAAJ5YgACtA5ISjmh7HMnw9Z_NgQ', 'session-79193267572.zip', 15130593, 0, '2025-03-06 21:49:32.786803', None, None)
2025-03-07 00:49:32,788 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,788 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,788 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKUWfKGGyeGTPz48ldROV8S518f4shAAJ7YgACtA5ISvMvjvU6NEL5NgQ', 'session-79229504622.zip', 12276516, 0, '2025-03-06 21:49:32.788804', None, None)
2025-03-07 00:49:32,789 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,789 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,790 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKVWfKGGyR8A1lEqUMTxCLio3N1oQ8AAKBYgACtA5ISg_9Jlea85NhNgQ', 'session-79272771723.zip', 12331333, 0, '2025-03-06 21:49:32.789803', None, None)
2025-03-07 00:49:32,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,790 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,791 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKV2fKGGy9Ujz3K_gAARFCgCmXRW0q3wACg2IAArQOSEoNO7_kSiBf6TYE', 'session-79280041938.zip', 13335141, 0, '2025-03-06 21:49:32.790804', None, None)
2025-03-07 00:49:32,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,791 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,792 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKVmfKGGye3o1QJ_RLPIdbfabKDQABBgACgmIAArQOSErKL8x8XqPwjDYE', 'session-79275971986.zip', 12230541, 0, '2025-03-06 21:49:32.791886', None, None)
2025-03-07 00:49:32,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,792 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKWGfKGGyDTD9VJmMfEXJnHaQLPt8WAAKEYgACtA5ISrzarl7jTCgoNgQ', 'session-79296952195.zip', 16090586, 0, '2025-03-06 21:49:32.792884', None, None)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKWWfKGGxz8RNzRV1ORPZMQr-qd_7LAAKFYgACtA5ISqB8UXTPOZ3TNgQ', 'session-79299661404.zip', 21396711, 0, '2025-03-06 21:49:32.793883', None, None)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,793 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,795 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKWmfKGGwzGDFnQa1W2S0xJ-3sB8i8AAKGYgACtA5ISqjxnr1ahWC4NgQ', 'session-79313226025.zip', 12252823, 0, '2025-03-06 21:49:32.793883', None, None)
2025-03-07 00:49:32,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,795 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,796 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKW2fKGGxc07gafalZI1q4z2Xux2KeAAKHYgACtA5ISv71HtL_mWMRNgQ', 'session-79371673213.zip', 12322692, 0, '2025-03-06 21:49:32.795388', None, None)
2025-03-07 00:49:32,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,796 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,797 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKXGfKGGwB122foxsgX_tufbAzNEzUAAKIYgACtA5ISv6EI7a5qULaNgQ', 'session-79385016153.zip', 12081909, 0, '2025-03-06 21:49:32.796394', None, None)
2025-03-07 00:49:32,797 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,798 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,798 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKXWfKGGxZl3lbMEq607u2eI3iqzpJAAKJYgACtA5ISnrKhTPZhcFvNgQ', 'session-79398057596.zip', 15460842, 0, '2025-03-06 21:49:32.798394', None, None)
2025-03-07 00:49:32,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,799 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,799 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKXmfKGGwSk53GcCphgKdPAAGcpPGQkwACimIAArQOSEpzV4OlkdjkijYE', 'session-79398851637.zip', 12347240, 0, '2025-03-06 21:49:32.799394', None, None)
2025-03-07 00:49:32,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,800 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,800 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKX2fKGGydMCNBE2fKZJ2qLN9M2Z8LAAKLYgACtA5ISpjhAxnybUOQNgQ', 'session-79504368392.zip', 15446217, 0, '2025-03-06 21:49:32.800394', None, None)
2025-03-07 00:49:32,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,801 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,801 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKYGfKGGzNKhZ0_fGWNmP1l3aVPbZRAAKMYgACtA5ISuRdaPX6cpTLNgQ', 'session-79514997611.zip', 12343121, 0, '2025-03-06 21:49:32.801601', None, None)
2025-03-07 00:49:32,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,802 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,802 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKYWfKGGyiUy2L9kMNj9c8XOjmS1x9AAKNYgACtA5ISjeuEeR-P73BNgQ', 'session-79515105639.zip', 15887548, 0, '2025-03-06 21:49:32.802601', None, None)
2025-03-07 00:49:32,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,803 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,803 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKYmfKGGyuv23UvJ2wdpVJp8mLsP6IAAKOYgACtA5ISv8iYnCU5xr-NgQ', 'session-79520330095.zip', 15915062, 0, '2025-03-06 21:49:32.803600', None, None)
2025-03-07 00:49:32,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,804 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:49:32,805 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ('BQACAgIAAxkBAAIKY2fKGGz03Z3GViFXZZghq0TufdsXAAKPYgACtA5ISlcgUTW4Iw6JNgQ', 'session-79521696013.zip', 12562027, 0, '2025-03-06 21:49:32.804603', None, None)
2025-03-07 00:49:32,808 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,818 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,819 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,819 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] (3,)
2025-03-07 00:49:32,822 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,822 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,823 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,823 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] (4,)
2025-03-07 00:49:32,828 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,829 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,829 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (5,)
2025-03-07 00:49:32,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,831 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,832 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (6,)
2025-03-07 00:49:32,832 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,838 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,839 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,839 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (7,)
2025-03-07 00:49:32,842 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,843 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,844 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (8,)
2025-03-07 00:49:32,845 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,847 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,847 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,847 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (9,)
2025-03-07 00:49:32,850 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,851 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,851 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (10,)
2025-03-07 00:49:32,856 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,857 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,857 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (11,)
2025-03-07 00:49:32,862 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,863 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,863 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (12,)
2025-03-07 00:49:32,866 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,867 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,867 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,868 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (13,)
2025-03-07 00:49:32,872 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,873 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,873 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (14,)
2025-03-07 00:49:32,878 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,882 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,882 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (15,)
2025-03-07 00:49:32,883 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,888 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,888 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (16,)
2025-03-07 00:49:32,889 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,894 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,894 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,895 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (17,)
2025-03-07 00:49:32,895 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,901 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,902 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,902 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (18,)
2025-03-07 00:49:32,904 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,907 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,908 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,908 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (19,)
2025-03-07 00:49:32,909 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,912 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,913 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,914 - sqlalchemy.engine.Engine - INFO - [cached since 335.1s ago] (20,)
2025-03-07 00:49:32,924 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:32,925 - sqlalchemy.engine.Engine - INFO - [cached since 335s ago] ()
2025-03-07 00:49:32,927 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,929 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,930 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,930 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (21,)
2025-03-07 00:49:32,932 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,934 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,934 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,934 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (22,)
2025-03-07 00:49:32,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,939 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,939 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (23,)
2025-03-07 00:49:32,939 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,943 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,946 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,946 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (24,)
2025-03-07 00:49:32,949 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,950 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,950 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,950 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (25,)
2025-03-07 00:49:32,953 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,953 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,953 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (26,)
2025-03-07 00:49:32,963 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,967 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,969 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,969 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (27,)
2025-03-07 00:49:32,972 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:32,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,976 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,976 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (28,)
2025-03-07 00:49:32,980 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:32,981 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:32,981 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] (29,)
2025-03-07 00:49:33,020 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,025 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,027 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,027 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (30,)
2025-03-07 00:49:33,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,029 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,029 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (31,)
2025-03-07 00:49:33,033 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,035 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] ()
2025-03-07 00:49:33,065 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,069 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,070 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,070 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,071 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (32,)
2025-03-07 00:49:33,074 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,078 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,078 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (33,)
2025-03-07 00:49:33,083 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,085 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,085 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,085 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (34,)
2025-03-07 00:49:33,089 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,089 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] ()
2025-03-07 00:49:33,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,091 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,092 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] (35,)
2025-03-07 00:49:33,098 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,099 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] ()
2025-03-07 00:49:33,119 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,119 - sqlalchemy.engine.Engine - INFO - [cached since 335.2s ago] ()
2025-03-07 00:49:33,133 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,134 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] ()
2025-03-07 00:49:33,160 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,160 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] ()
2025-03-07 00:49:33,168 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,171 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,172 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,172 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] (36,)
2025-03-07 00:49:33,173 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,176 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,177 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] ()
2025-03-07 00:49:33,183 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,185 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,186 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] (37,)
2025-03-07 00:49:33,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,189 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,189 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] (38,)
2025-03-07 00:49:33,198 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,198 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] ()
2025-03-07 00:49:33,222 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,223 - sqlalchemy.engine.Engine - INFO - [cached since 335.3s ago] ()
2025-03-07 00:49:33,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,242 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] ()
2025-03-07 00:49:33,259 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,259 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] ()
2025-03-07 00:49:33,272 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,278 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,279 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] (39,)
2025-03-07 00:49:33,279 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,280 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,281 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] ()
2025-03-07 00:49:33,284 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:49:33,284 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,284 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,285 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] (40,)
2025-03-07 00:49:33,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:33,290 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:49:33,291 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] (41,)
2025-03-07 00:49:33,301 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,301 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] ()
2025-03-07 00:49:33,324 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,324 - sqlalchemy.engine.Engine - INFO - [cached since 335.4s ago] ()
2025-03-07 00:49:33,348 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,349 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] ()
2025-03-07 00:49:33,362 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,363 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] ()
2025-03-07 00:49:33,377 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,378 - aiogram.event - INFO - Update id=117255913 is handled. Duration 671 ms by bot id=8126821875
2025-03-07 00:49:33,388 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,389 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] ()
2025-03-07 00:49:33,410 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,411 - sqlalchemy.engine.Engine - INFO - [cached since 335.5s ago] ()
2025-03-07 00:49:33,432 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,432 - sqlalchemy.engine.Engine - INFO - [cached since 335.6s ago] ()
2025-03-07 00:49:33,450 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,450 - sqlalchemy.engine.Engine - INFO - [cached since 335.6s ago] ()
2025-03-07 00:49:33,471 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,471 - sqlalchemy.engine.Engine - INFO - [cached since 335.6s ago] ()
2025-03-07 00:49:33,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,479 - aiogram.event - INFO - Update id=117255896 is handled. Duration 766 ms by bot id=8126821875
2025-03-07 00:49:33,490 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,490 - sqlalchemy.engine.Engine - INFO - [cached since 335.6s ago] ()
2025-03-07 00:49:33,499 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,500 - aiogram.event - INFO - Update id=117255931 is handled. Duration 780 ms by bot id=8126821875
2025-03-07 00:49:33,516 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,517 - sqlalchemy.engine.Engine - INFO - [cached since 335.6s ago] ()
2025-03-07 00:49:33,526 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,527 - aiogram.event - INFO - Update id=117255897 is handled. Duration 812 ms by bot id=8126821875
2025-03-07 00:49:33,541 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,541 - sqlalchemy.engine.Engine - INFO - [cached since 335.7s ago] ()
2025-03-07 00:49:33,560 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,560 - sqlalchemy.engine.Engine - INFO - [cached since 335.7s ago] ()
2025-03-07 00:49:33,563 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,564 - aiogram.event - INFO - Update id=117255900 is handled. Duration 843 ms by bot id=8126821875
2025-03-07 00:49:33,582 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,582 - sqlalchemy.engine.Engine - INFO - [cached since 335.7s ago] ()
2025-03-07 00:49:33,590 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,591 - aiogram.event - INFO - Update id=117255901 is handled. Duration 875 ms by bot id=8126821875
2025-03-07 00:49:33,600 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,600 - sqlalchemy.engine.Engine - INFO - [cached since 335.7s ago] ()
2025-03-07 00:49:33,618 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,618 - sqlalchemy.engine.Engine - INFO - [cached since 335.7s ago] ()
2025-03-07 00:49:33,619 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,621 - aiogram.event - INFO - Update id=117255912 is handled. Duration 905 ms by bot id=8126821875
2025-03-07 00:49:33,636 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,637 - sqlalchemy.engine.Engine - INFO - [cached since 335.8s ago] ()
2025-03-07 00:49:33,640 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,641 - aiogram.event - INFO - Update id=117255918 is handled. Duration 921 ms by bot id=8126821875
2025-03-07 00:49:33,649 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:33,649 - sqlalchemy.engine.Engine - INFO - [cached since 335.8s ago] ()
2025-03-07 00:49:33,657 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,658 - aiogram.event - INFO - Update id=117255924 is handled. Duration 937 ms by bot id=8126821875
2025-03-07 00:49:33,679 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,680 - aiogram.event - INFO - Update id=117255911 is handled. Duration 968 ms by bot id=8126821875
2025-03-07 00:49:33,703 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,705 - aiogram.event - INFO - Update id=117255904 is handled. Duration 984 ms by bot id=8126821875
2025-03-07 00:49:33,738 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,740 - aiogram.event - INFO - Update id=117255906 is handled. Duration 1030 ms by bot id=8126821875
2025-03-07 00:49:33,767 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,768 - aiogram.event - INFO - Update id=117255916 is handled. Duration 1046 ms by bot id=8126821875
2025-03-07 00:49:33,781 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,782 - aiogram.event - INFO - Update id=117255895 is handled. Duration 1062 ms by bot id=8126821875
2025-03-07 00:49:33,799 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,800 - aiogram.event - INFO - Update id=117255908 is handled. Duration 1093 ms by bot id=8126821875
2025-03-07 00:49:33,815 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,817 - aiogram.event - INFO - Update id=117255921 is handled. Duration 1109 ms by bot id=8126821875
2025-03-07 00:49:33,841 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,842 - aiogram.event - INFO - Update id=117255905 is handled. Duration 1125 ms by bot id=8126821875
2025-03-07 00:49:33,868 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,869 - aiogram.event - INFO - Update id=117255925 is handled. Duration 1155 ms by bot id=8126821875
2025-03-07 00:49:33,884 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,885 - aiogram.event - INFO - Update id=117255909 is handled. Duration 1171 ms by bot id=8126821875
2025-03-07 00:49:33,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,907 - aiogram.event - INFO - Update id=117255926 is handled. Duration 1187 ms by bot id=8126821875
2025-03-07 00:49:33,923 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,924 - aiogram.event - INFO - Update id=117255899 is handled. Duration 1202 ms by bot id=8126821875
2025-03-07 00:49:33,944 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,945 - aiogram.event - INFO - Update id=117255930 is handled. Duration 1234 ms by bot id=8126821875
2025-03-07 00:49:33,968 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,969 - aiogram.event - INFO - Update id=117255920 is handled. Duration 1250 ms by bot id=8126821875
2025-03-07 00:49:33,994 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:33,995 - aiogram.event - INFO - Update id=117255898 is handled. Duration 1280 ms by bot id=8126821875
2025-03-07 00:49:34,005 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,006 - aiogram.event - INFO - Update id=117255910 is handled. Duration 1296 ms by bot id=8126821875
2025-03-07 00:49:34,026 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,027 - aiogram.event - INFO - Update id=117255915 is handled. Duration 1312 ms by bot id=8126821875
2025-03-07 00:49:34,049 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,050 - aiogram.event - INFO - Update id=117255922 is handled. Duration 1343 ms by bot id=8126821875
2025-03-07 00:49:34,068 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,069 - aiogram.event - INFO - Update id=117255917 is handled. Duration 1359 ms by bot id=8126821875
2025-03-07 00:49:34,088 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,089 - aiogram.event - INFO - Update id=117255928 is handled. Duration 1375 ms by bot id=8126821875
2025-03-07 00:49:34,109 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:34,110 - aiogram.event - INFO - Update id=117255933 is handled. Duration 1391 ms by bot id=8126821875
2025-03-07 00:49:38,525 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,527 - aiogram.event - INFO - Update id=117255919 is handled. Duration 5812 ms by bot id=8126821875
2025-03-07 00:49:38,684 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,685 - sqlalchemy.engine.Engine - INFO - [cached since 340.8s ago] ()
2025-03-07 00:49:38,706 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,706 - sqlalchemy.engine.Engine - INFO - [cached since 340.8s ago] ()
2025-03-07 00:49:38,722 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,723 - sqlalchemy.engine.Engine - INFO - [cached since 340.8s ago] ()
2025-03-07 00:49:38,748 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,748 - sqlalchemy.engine.Engine - INFO - [cached since 340.9s ago] ()
2025-03-07 00:49:38,770 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,770 - sqlalchemy.engine.Engine - INFO - [cached since 340.9s ago] ()
2025-03-07 00:49:38,791 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,792 - sqlalchemy.engine.Engine - INFO - [cached since 340.9s ago] ()
2025-03-07 00:49:38,808 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,809 - sqlalchemy.engine.Engine - INFO - [cached since 340.9s ago] ()
2025-03-07 00:49:38,835 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:49:38,836 - sqlalchemy.engine.Engine - INFO - [cached since 341s ago] ()
2025-03-07 00:49:38,865 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,867 - aiogram.event - INFO - Update id=117255927 is handled. Duration 6155 ms by bot id=8126821875
2025-03-07 00:49:38,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,903 - aiogram.event - INFO - Update id=117255907 is handled. Duration 6187 ms by bot id=8126821875
2025-03-07 00:49:38,938 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,940 - aiogram.event - INFO - Update id=117255932 is handled. Duration 6218 ms by bot id=8126821875
2025-03-07 00:49:38,960 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,961 - aiogram.event - INFO - Update id=117255903 is handled. Duration 6250 ms by bot id=8126821875
2025-03-07 00:49:38,981 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:38,982 - aiogram.event - INFO - Update id=117255902 is handled. Duration 6266 ms by bot id=8126821875
2025-03-07 00:49:39,000 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:39,000 - aiogram.event - INFO - Update id=117255929 is handled. Duration 6280 ms by bot id=8126821875
2025-03-07 00:49:39,016 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:39,017 - aiogram.event - INFO - Update id=117255923 is handled. Duration 6296 ms by bot id=8126821875
2025-03-07 00:49:39,036 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:39,037 - aiogram.event - INFO - Update id=117255914 is handled. Duration 6327 ms by bot id=8126821875
2025-03-07 00:49:45,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:45,324 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:49:45,324 - sqlalchemy.engine.Engine - INFO - [cached since 770.9s ago] (8014080433,)
2025-03-07 00:49:45,416 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:45,417 - aiogram.event - INFO - Update id=117255934 is handled. Duration 1265 ms by bot id=8126821875
2025-03-07 00:49:55,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:49:55,759 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 00:49:56,096 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:49:56,097 - aiogram.event - INFO - Update id=117255935 is handled. Duration 344 ms by bot id=8126821875
2025-03-07 00:55:06,346 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:55:06,598 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:55:06,599 - __main__ - INFO - Бот остановлен
2025-03-07 00:55:09,498 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:55:09,498 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:55:09,498 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:55:09,501 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:55:09,501 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:55:09,502 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:55:09,502 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:55:09,503 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:55:09,504 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:55:09,504 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:55:09,750 - __main__ - ERROR - Произошла ошибка при запуске бота: unsupported callable
Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\inspect.py", line 1384, in getfullargspec
    sig = _signature_from_callable(func,
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\inspect.py", line 2491, in _signature_from_callable
    raise TypeError('{!r} is not a callable object'.format(obj))
TypeError: 'waiting_for_message' is not a callable object

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\bot.py", line 50, in main
    register_all_handlers(dp, bot)
  File "C:\Users\semen\botikrost\handlers\__init__.py", line 10, in register_all_handlers
    register_admin_handlers(dp, bot)
  File "C:\Users\semen\botikrost\handlers\admin.py", line 632, in register_admin_handlers
    dp.message.register(process_broadcast_message, BroadcastState.waiting_for_message)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 87, in register
    filters=[FilterObject(filter_) for filter_ in filters],
             ^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 5, in __init__
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 72, in __post_init__
    super(FilterObject, self).__post_init__()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 30, in __post_init__
    spec = inspect.getfullargspec(callback)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\inspect.py", line 1394, in getfullargspec
    raise TypeError('unsupported callable') from ex
TypeError: unsupported callable
2025-03-07 00:57:13,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:13,279 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:57:13,280 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:57:13,281 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:57:13,282 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:57:13,283 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:57:13,283 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:57:13,284 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:57:13,285 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:57:13,285 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:57:13,528 - __main__ - INFO - Бот запущен
2025-03-07 00:57:13,528 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:57:13,755 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:57:18,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:18,722 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:57:18,722 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1083294848,)
2025-03-07 00:57:18,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:18,727 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 00:57:18,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2025-03-07 00:57:18,728 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:57:18,829 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:57:18,830 - aiogram.event - INFO - Update id=117255936 is handled. Duration 1469 ms by bot id=8126821875
2025-03-07 00:57:21,161 - aiogram.event - INFO - Update id=117255937 is handled. Duration 281 ms by bot id=8126821875
2025-03-07 00:57:22,868 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:22,870 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:57:22,870 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ()
2025-03-07 00:57:23,554 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:57:23,555 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:23,556 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 00:57:23,556 - sqlalchemy.engine.Engine - INFO - [cached since 4.83s ago] ()
2025-03-07 00:57:23,557 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:57:23,741 - aiogram.event - INFO - Update id=117255938 is handled. Duration 875 ms by bot id=8126821875
2025-03-07 00:57:38,097 - aiogram.event - INFO - Update id=117255939 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 00:57:42,733 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:42,734 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 00:57:42,734 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('BQACAgIAAxkBAAIK6mfKGlZjMDC3ZTwITMevygOU1AZVAAKncAACR41RSu3Spq6zogwnNgQ', 'tz.rar', 126, 0, '2025-03-06 21:57:42.734702', None, None)
2025-03-07 00:57:42,736 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:57:42,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:57:42,743 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 00:57:42,743 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] (42,)
2025-03-07 00:57:42,835 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:57:42,836 - aiogram.event - INFO - Update id=117255940 is handled. Duration 108 ms by bot id=8126821875
2025-03-07 00:59:35,240 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 00:59:35,491 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:59:35,492 - __main__ - INFO - Бот остановлен
2025-03-07 00:59:38,209 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:38,210 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 00:59:38,211 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:59:38,213 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 00:59:38,213 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:59:38,215 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 00:59:38,216 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 00:59:38,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 00:59:38,220 - database.base - INFO - База данных успешно инициализирована
2025-03-07 00:59:38,220 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 00:59:38,542 - __main__ - INFO - Бот запущен
2025-03-07 00:59:38,542 - aiogram.dispatcher - INFO - Start polling
2025-03-07 00:59:38,769 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 00:59:46,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:46,284 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 00:59:46,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (1083294848,)
2025-03-07 00:59:46,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:46,289 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 00:59:46,289 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2025-03-07 00:59:46,291 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:46,386 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:46,390 - aiogram.event - INFO - Update id=117255941 is handled. Duration 1452 ms by bot id=8126821875
2025-03-07 00:59:49,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:49,397 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 00:59:49,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ()
2025-03-07 00:59:49,535 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:49,536 - aiogram.event - INFO - Update id=117255942 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 00:59:50,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:50,721 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 00:59:50,722 - sqlalchemy.engine.Engine - INFO - [cached since 4.433s ago] ()
2025-03-07 00:59:50,724 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:50,911 - aiogram.event - INFO - Update id=117255943 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 00:59:51,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:51,699 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 00:59:51,700 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2025-03-07 00:59:51,701 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 00:59:51,701 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 00:59:51,701 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 00:59:51,701 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 00:59:51,793 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:51,794 - aiogram.event - INFO - Update id=117255944 is handled. Duration 188 ms by bot id=8126821875
2025-03-07 00:59:54,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 00:59:54,474 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 00:59:54,474 - sqlalchemy.engine.Engine - INFO - [cached since 8.186s ago] ()
2025-03-07 00:59:54,476 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 00:59:54,644 - aiogram.event - INFO - Update id=117255945 is handled. Duration 171 ms by bot id=8126821875
2025-03-07 01:01:17,178 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 01:01:17,428 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 01:01:17,430 - __main__ - INFO - Бот остановлен
2025-03-07 12:24:30,956 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:24:30,957 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 12:24:30,957 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,959 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 12:24:30,959 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,960 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 12:24:30,960 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,961 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 12:24:30,961 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,962 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sessions")
2025-03-07 12:24:30,963 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,964 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 12:24:30,964 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,966 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("used_phone_numbers")
2025-03-07 12:24:30,966 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:30,968 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sessions (
	id INTEGER NOT NULL, 
	phone_number VARCHAR(20) NOT NULL, 
	folder_path VARCHAR(255), 
	is_taken BOOLEAN, 
	created_at DATETIME, 
	taken_at DATETIME, 
	user_id INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (phone_number), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-07 12:24:30,969 - sqlalchemy.engine.Engine - INFO - [no key 0.00057s] ()
2025-03-07 12:24:30,973 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE used_phone_numbers (
	id INTEGER NOT NULL, 
	phone_number VARCHAR(20) NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (phone_number)
)


2025-03-07 12:24:30,973 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2025-03-07 12:24:30,977 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 12:24:30,978 - database.base - INFO - База данных успешно инициализирована
2025-03-07 12:24:30,978 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 12:24:31,270 - __main__ - INFO - Бот запущен
2025-03-07 12:24:31,271 - aiogram.dispatcher - INFO - Start polling
2025-03-07 12:24:31,641 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:24:35,912 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:24:35,912 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 12:24:37,593 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 12:24:37,845 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:24:37,846 - __main__ - INFO - Бот остановлен
2025-03-07 12:24:49,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:24:49,044 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 12:24:49,044 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:49,046 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 12:24:49,046 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:49,046 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 12:24:49,047 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:49,047 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 12:24:49,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:49,049 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 12:24:49,049 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:24:49,050 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 12:24:49,052 - database.base - INFO - База данных успешно инициализирована
2025-03-07 12:24:49,052 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 12:24:49,304 - __main__ - INFO - Бот запущен
2025-03-07 12:24:49,304 - aiogram.dispatcher - INFO - Start polling
2025-03-07 12:24:49,597 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:24:53,764 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:24:53,765 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 12:24:59,376 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:24:59,376 - aiogram.dispatcher - WARNING - Sleep for 1.391615 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 12:25:05,631 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:05,631 - aiogram.dispatcher - WARNING - Sleep for 1.738178 seconds and try again... (tryings = 2, bot id = 7558017023)
2025-03-07 12:25:12,675 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:12,675 - aiogram.dispatcher - WARNING - Sleep for 2.243496 seconds and try again... (tryings = 3, bot id = 7558017023)
2025-03-07 12:25:20,978 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:20,979 - aiogram.dispatcher - WARNING - Sleep for 2.906268 seconds and try again... (tryings = 4, bot id = 7558017023)
2025-03-07 12:25:27,905 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:27,906 - aiogram.dispatcher - WARNING - Sleep for 3.854406 seconds and try again... (tryings = 5, bot id = 7558017023)
2025-03-07 12:25:36,978 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:36,978 - aiogram.dispatcher - WARNING - Sleep for 5.041293 seconds and try again... (tryings = 6, bot id = 7558017023)
2025-03-07 12:25:47,115 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:25:47,116 - aiogram.dispatcher - WARNING - Sleep for 5.035492 seconds and try again... (tryings = 7, bot id = 7558017023)
2025-03-07 12:25:55,054 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 12:25:55,306 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:25:55,307 - __main__ - INFO - Бот остановлен
2025-03-07 12:26:31,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:26:31,811 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 12:26:31,811 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:26:31,813 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 12:26:31,813 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:26:31,814 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 12:26:31,814 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:26:31,815 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 12:26:31,816 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:26:31,818 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 12:26:31,818 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:26:31,819 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 12:26:31,820 - database.base - INFO - База данных успешно инициализирована
2025-03-07 12:26:31,820 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 12:26:32,076 - __main__ - INFO - Бот запущен
2025-03-07 12:26:32,077 - aiogram.dispatcher - INFO - Start polling
2025-03-07 12:26:32,447 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:26:36,644 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:26:36,645 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 12:26:42,095 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:26:42,096 - aiogram.dispatcher - WARNING - Sleep for 1.126016 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 12:26:47,909 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 12:26:47,910 - aiogram.dispatcher - WARNING - Sleep for 1.581831 seconds and try again... (tryings = 2, bot id = 7558017023)
2025-03-07 12:26:53,462 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 12:26:53,714 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 12:26:53,715 - __main__ - INFO - Бот остановлен
2025-03-07 12:27:42,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:42,540 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 12:27:42,541 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:27:42,543 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 12:27:42,543 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:27:42,544 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 12:27:42,544 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:27:42,546 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 12:27:42,546 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:27:42,547 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 12:27:42,548 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:27:42,549 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 12:27:42,550 - database.base - INFO - База данных успешно инициализирована
2025-03-07 12:27:42,550 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 12:27:42,812 - __main__ - INFO - Бот запущен
2025-03-07 12:27:42,812 - aiogram.dispatcher - INFO - Start polling
2025-03-07 12:27:43,118 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 12:27:43,246 - aiogram.event - INFO - Update id=117255947 is not handled. Duration 16 ms by bot id=8126821875
2025-03-07 12:27:44,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,701 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,702 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (7699005037,)
2025-03-07 12:27:44,703 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,703 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,704 - sqlalchemy.engine.Engine - INFO - [cached since 0.002404s ago] (8014080433,)
2025-03-07 12:27:44,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,717 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,718 - sqlalchemy.engine.Engine - INFO - [cached since 0.01641s ago] (8014080433,)
2025-03-07 12:27:44,718 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,719 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,719 - sqlalchemy.engine.Engine - INFO - [cached since 0.01796s ago] (1083294848,)
2025-03-07 12:27:44,723 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,723 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,724 - sqlalchemy.engine.Engine - INFO - [cached since 0.02262s ago] (1083294848,)
2025-03-07 12:27:44,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,726 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,726 - sqlalchemy.engine.Engine - INFO - [cached since 0.02533s ago] (8014080433,)
2025-03-07 12:27:44,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,802 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 12:27:44,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2025-03-07 12:27:44,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,809 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 12:27:44,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.007132s ago] ()
2025-03-07 12:27:44,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,811 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:44,811 - sqlalchemy.engine.Engine - INFO - [cached since 0.1099s ago] (1083294848,)
2025-03-07 12:27:44,812 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,813 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,813 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 12:27:44,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.01205s ago] ()
2025-03-07 12:27:44,815 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,820 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:44,821 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 12:27:44,821 - sqlalchemy.engine.Engine - INFO - [cached since 0.01989s ago] ()
2025-03-07 12:27:44,824 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,860 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,860 - aiogram.event - INFO - Update id=117255950 is handled. Duration 1625 ms by bot id=8126821875
2025-03-07 12:27:44,924 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,924 - aiogram.event - INFO - Update id=117255949 is handled. Duration 1686 ms by bot id=8126821875
2025-03-07 12:27:44,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,944 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,945 - aiogram.event - INFO - Update id=117255946 is handled. Duration 1718 ms by bot id=8126821875
2025-03-07 12:27:44,946 - aiogram.event - INFO - Update id=117255951 is handled. Duration 1702 ms by bot id=8126821875
2025-03-07 12:27:44,965 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,967 - aiogram.event - INFO - Update id=117255948 is handled. Duration 1733 ms by bot id=8126821875
2025-03-07 12:27:44,971 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,972 - aiogram.event - INFO - Update id=117255952 is handled. Duration 1733 ms by bot id=8126821875
2025-03-07 12:27:44,990 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:44,991 - aiogram.event - INFO - Update id=117255953 is handled. Duration 1750 ms by bot id=8126821875
2025-03-07 12:27:45,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:45,647 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:45,648 - sqlalchemy.engine.Engine - INFO - [cached since 0.9466s ago] (1083294848,)
2025-03-07 12:27:45,651 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:45,652 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 12:27:45,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.8506s ago] ()
2025-03-07 12:27:45,653 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:45,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:27:45,661 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:27:45,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.9605s ago] (7442982117,)
2025-03-07 12:27:45,800 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:45,802 - aiogram.event - INFO - Update id=117255955 is handled. Duration 2561 ms by bot id=8126821875
2025-03-07 12:27:45,809 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:27:45,810 - aiogram.event - INFO - Update id=117255954 is handled. Duration 2561 ms by bot id=8126821875
2025-03-07 12:29:12,521 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-03-07 12:29:12,521 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8126821875)
2025-03-07 12:29:23,779 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 8126821875)
2025-03-07 12:30:54,119 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 12:30:54,371 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 12:30:54,375 - __main__ - INFO - Бот остановлен
2025-03-07 12:40:06,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:40:06,527 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 12:40:06,528 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,529 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 12:40:06,529 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,529 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 12:40:06,530 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,531 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 12:40:06,531 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,532 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("phone_numbers")
2025-03-07 12:40:06,533 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,534 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("phone_numbers")
2025-03-07 12:40:06,534 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 12:40:06,536 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE phone_numbers (
	id INTEGER NOT NULL, 
	phone_number VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (phone_number)
)


2025-03-07 12:40:06,536 - sqlalchemy.engine.Engine - INFO - [no key 0.00037s] ()
2025-03-07 12:40:06,543 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 12:40:06,544 - database.base - INFO - База данных успешно инициализирована
2025-03-07 12:40:06,544 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 12:40:06,808 - __main__ - INFO - Бот запущен
2025-03-07 12:40:06,808 - aiogram.dispatcher - INFO - Start polling
2025-03-07 12:40:07,057 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 12:40:13,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:40:13,414 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 12:40:13,414 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] (1083294848,)
2025-03-07 12:40:13,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 12:40:13,421 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_available = 1
2025-03-07 12:40:13,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2025-03-07 12:40:13,423 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:40:13,424 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 12:40:13,425 - aiogram.event - INFO - Update id=117255956 is not handled. Duration 1422 ms by bot id=8126821875
2025-03-07 12:40:13,425 - aiogram.event - ERROR - Cause exception while process update id=117255956 by bot id=8126821875
OperationalError: (sqlite3.OperationalError) no such column: sessions.is_available
[SQL: SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_available = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlite3.OperationalError: no such column: sessions.is_available

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 55, in cmd_start
    welcome_text = await get_welcome_message(message.from_user.id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 26, in get_welcome_message
    sessions_count = await session_repo.get_available_sessions_count()
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 295, in get_available_sessions_count
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sessions.is_available
[SQL: SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_available = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-07 12:40:58,905 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 12:40:59,158 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 12:40:59,160 - __main__ - INFO - Бот остановлен
2025-03-07 13:44:44,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:44,009 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 13:44:44,009 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:44:44,011 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 13:44:44,011 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:44:44,012 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 13:44:44,013 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:44:44,014 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:44:44,014 - database.base - INFO - База данных успешно инициализирована
2025-03-07 13:44:44,015 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 13:44:44,301 - __main__ - INFO - Бот запущен
2025-03-07 13:44:44,301 - aiogram.dispatcher - INFO - Start polling
2025-03-07 13:44:44,567 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:44:46,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:47,001 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:44:47,001 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (1083294848,)
2025-03-07 13:44:47,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:47,007 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:44:47,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
2025-03-07 13:44:47,010 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:44:47,246 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:44:47,247 - aiogram.event - INFO - Update id=117256015 is handled. Duration 1922 ms by bot id=8126821875
2025-03-07 13:44:48,494 - aiogram.event - INFO - Update id=117256016 is handled. Duration 265 ms by bot id=8126821875
2025-03-07 13:44:53,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:53,436 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 13:44:53,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('BQACAgIAAxkBAAILbmfKziUYYF9laZihpch3nN9DGOiJAAKUYwACR41ZStXdqTwCpvBENgQ', 'tesb.rar', 176, 0, '2025-03-07 10:44:53.436000', None, None)
2025-03-07 13:44:53,441 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:44:53,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:53,447 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 13:44:53,448 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (46,)
2025-03-07 13:44:53,582 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:44:53,583 - aiogram.event - INFO - Update id=117256017 is handled. Duration 156 ms by bot id=8126821875
2025-03-07 13:44:58,154 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:58,156 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:44:58,158 - sqlalchemy.engine.Engine - INFO - [cached since 11.16s ago] (1083294848,)
2025-03-07 13:44:58,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:44:58,164 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:44:58,165 - sqlalchemy.engine.Engine - INFO - [cached since 11.16s ago] ()
2025-03-07 13:44:58,167 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:44:58,289 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:44:58,292 - aiogram.event - INFO - Update id=117256018 is handled. Duration 1421 ms by bot id=8126821875
2025-03-07 13:45:02,903 - keyboards - INFO - Создаем клавиатуру подтверждения с callback_data: confirm_clear_logs и cancel_clear_logs
2025-03-07 13:45:03,049 - aiogram.event - INFO - Update id=117256019 is handled. Duration 280 ms by bot id=8126821875
2025-03-07 13:45:04,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:04,110 - sqlalchemy.engine.Engine - INFO - DELETE FROM logs
2025-03-07 13:45:04,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2025-03-07 13:45:04,113 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:45:04,349 - aiogram.event - INFO - Update id=117256020 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 13:45:07,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:07,602 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:45:07,603 - sqlalchemy.engine.Engine - INFO - [cached since 20.6s ago] (1083294848,)
2025-03-07 13:45:07,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:07,607 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:45:07,609 - sqlalchemy.engine.Engine - INFO - [cached since 20.6s ago] ()
2025-03-07 13:45:07,610 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:45:07,779 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:45:07,781 - aiogram.event - INFO - Update id=117256021 is handled. Duration 1545 ms by bot id=8126821875
2025-03-07 13:45:10,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:10,196 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 13:45:10,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
2025-03-07 13:45:10,308 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:45:10,309 - aiogram.event - INFO - Update id=117256022 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 13:45:11,660 - aiogram.event - INFO - Update id=117256023 is handled. Duration 264 ms by bot id=8126821875
2025-03-07 13:45:13,235 - aiogram.event - INFO - Update id=117256024 is handled. Duration 157 ms by bot id=8126821875
2025-03-07 13:45:13,727 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:13,728 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 13:45:13,728 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('123', 1, 0, 1, '2025-03-07 10:45:13.728814', 1083294848)
2025-03-07 13:45:13,731 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:45:13,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:13,740 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 13:45:13,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] (4,)
2025-03-07 13:45:13,743 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 13:45:13,744 - sqlalchemy.engine.Engine - INFO - [cached since 3.548s ago] ()
2025-03-07 13:45:14,029 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:45:14,031 - aiogram.event - INFO - Update id=117256025 is handled. Duration 311 ms by bot id=8126821875
2025-03-07 13:45:17,395 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:45:17,395 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:45:17,395 - sqlalchemy.engine.Engine - INFO - [cached since 30.39s ago] ()
2025-03-07 13:45:17,397 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:45:17,600 - aiogram.event - INFO - Update id=117256026 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 13:45:20,729 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 13:45:20,988 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:45:20,990 - __main__ - INFO - Бот остановлен
2025-03-07 13:50:19,305 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:50:19,306 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 13:50:19,306 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:50:19,308 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 13:50:19,308 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:50:19,310 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 13:50:19,310 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:50:19,311 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 13:50:19,311 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:50:19,312 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 13:50:19,312 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:50:19,312 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:50:19,314 - database.base - INFO - База данных успешно инициализирована
2025-03-07 13:50:19,315 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 13:50:19,582 - __main__ - INFO - Бот запущен
2025-03-07 13:50:19,582 - aiogram.dispatcher - INFO - Start polling
2025-03-07 13:50:19,856 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:50:27,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:50:27,813 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:50:27,814 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] (1083294848,)
2025-03-07 13:50:27,820 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:50:27,823 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:50:27,824 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2025-03-07 13:50:27,826 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 13:50:27,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00270s] ()
2025-03-07 13:50:27,830 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:50:28,027 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:50:28,030 - aiogram.event - INFO - Update id=117256027 is handled. Duration 1813 ms by bot id=8126821875
2025-03-07 13:50:30,544 - aiogram.event - INFO - Update id=117256028 is not handled. Duration 139 ms by bot id=8126821875
2025-03-07 13:50:30,544 - aiogram.event - ERROR - Cause exception while process update id=117256028 by bot id=8126821875
AttributeError: type object 'Password' has no attribute 'is_active'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 118, in admin_button_handler
    await show_passwords(callback.message)
  File "C:\Users\semen\botikrost\handlers\admin.py", line 39, in show_passwords
    passwords = await password_repo.get_all_active_passwords()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 171, in get_all_active_passwords
    select(Password).where(Password.is_active == True)
                           ^^^^^^^^^^^^^^^^^^
AttributeError: type object 'Password' has no attribute 'is_active'
2025-03-07 13:56:31,868 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 13:56:32,119 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:56:32,120 - __main__ - INFO - Бот остановлен
2025-03-07 13:56:35,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:56:35,373 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 13:56:35,373 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:56:35,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 13:56:35,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:56:35,375 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 13:56:35,375 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:56:35,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 13:56:35,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:56:35,377 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 13:56:35,377 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:56:35,378 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:56:35,379 - database.base - INFO - База данных успешно инициализирована
2025-03-07 13:56:35,379 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 13:56:35,635 - __main__ - INFO - Бот запущен
2025-03-07 13:56:35,636 - aiogram.dispatcher - INFO - Start polling
2025-03-07 13:56:35,904 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:56:43,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:56:43,749 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:56:43,751 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (1083294848,)
2025-03-07 13:56:43,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:56:43,755 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:56:43,755 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
2025-03-07 13:56:43,757 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 13:56:43,758 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2025-03-07 13:56:43,759 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:56:43,915 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:56:43,916 - aiogram.event - INFO - Update id=117256029 is handled. Duration 1545 ms by bot id=8126821875
2025-03-07 13:56:45,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:56:45,018 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.uses_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 13:56:45,018 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2025-03-07 13:56:45,019 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:56:45,022 - aiogram.event - INFO - Update id=117256030 is not handled. Duration 108 ms by bot id=8126821875
2025-03-07 13:56:45,022 - aiogram.event - ERROR - Cause exception while process update id=117256030 by bot id=8126821875
OperationalError: (sqlite3.OperationalError) no such column: passwords.uses_count
[SQL: SELECT passwords.id, passwords.password, passwords.max_uses, passwords.uses_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlite3.OperationalError: no such column: passwords.uses_count

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 118, in admin_button_handler
    await show_passwords(callback.message)
  File "C:\Users\semen\botikrost\handlers\admin.py", line 39, in show_passwords
    passwords = await password_repo.get_all_active_passwords()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 173, in get_all_active_passwords
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: passwords.uses_count
[SQL: SELECT passwords.id, passwords.password, passwords.max_uses, passwords.uses_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-07 13:59:01,998 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 13:59:02,250 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:59:02,251 - __main__ - INFO - Бот остановлен
2025-03-07 13:59:36,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:36,849 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 13:59:36,849 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:59:36,852 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 13:59:36,852 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:59:36,854 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 13:59:36,854 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:59:36,855 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 13:59:36,856 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:59:36,857 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 13:59:36,857 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 13:59:36,859 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:59:36,860 - database.base - INFO - База данных успешно инициализирована
2025-03-07 13:59:36,860 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 13:59:37,144 - __main__ - INFO - Бот запущен
2025-03-07 13:59:37,144 - aiogram.dispatcher - INFO - Start polling
2025-03-07 13:59:37,415 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 13:59:39,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:39,365 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:59:39,365 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (1083294848,)
2025-03-07 13:59:39,369 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:39,373 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:59:39,374 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ()
2025-03-07 13:59:39,377 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 13:59:39,377 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
2025-03-07 13:59:39,379 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:39,555 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:39,556 - aiogram.event - INFO - Update id=117256031 is handled. Duration 1639 ms by bot id=8126821875
2025-03-07 13:59:40,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:40,426 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 13:59:40,427 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ()
2025-03-07 13:59:40,542 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:40,544 - aiogram.event - INFO - Update id=117256032 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 13:59:42,918 - aiogram.event - INFO - Update id=117256033 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 13:59:45,030 - aiogram.event - INFO - Update id=117256034 is handled. Duration 110 ms by bot id=8126821875
2025-03-07 13:59:46,200 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:46,202 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 13:59:46,204 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('321', 1, 0, 1, '2025-03-07 10:59:46.202849', 1083294848)
2025-03-07 13:59:46,208 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:59:46,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:46,214 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 13:59:46,215 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (5,)
2025-03-07 13:59:46,215 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:46,464 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:46,464 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 13:59:46,465 - sqlalchemy.engine.Engine - INFO - [cached since 6.038s ago] ()
2025-03-07 13:59:46,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:46,695 - aiogram.event - INFO - Update id=117256035 is handled. Duration 483 ms by bot id=8126821875
2025-03-07 13:59:54,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:54,346 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:59:54,347 - sqlalchemy.engine.Engine - INFO - [cached since 14.98s ago] (7442982117,)
2025-03-07 13:59:54,454 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:54,456 - aiogram.event - INFO - Update id=117256036 is handled. Duration 1375 ms by bot id=8126821875
2025-03-07 13:59:55,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:55,345 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 13:59:55,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('321',)
2025-03-07 13:59:55,348 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 13:59:55,349 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] (1, 5)
2025-03-07 13:59:55,353 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 13:59:55,354 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] (0, 5)
2025-03-07 13:59:55,356 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 13:59:55,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:55,362 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 13:59:55,362 - sqlalchemy.engine.Engine - INFO - [cached since 16s ago] (7442982117,)
2025-03-07 13:59:55,365 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 13:59:55,366 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 13:59:55,366 - sqlalchemy.engine.Engine - INFO - [cached since 15.99s ago] ()
2025-03-07 13:59:55,367 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 13:59:55,368 - sqlalchemy.engine.Engine - INFO - [cached since 15.99s ago] ()
2025-03-07 13:59:55,369 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:55,512 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 13:59:55,513 - aiogram.event - INFO - Update id=117256037 is handled. Duration 172 ms by bot id=8126821875
2025-03-07 14:00:20,763 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:20,764 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:00:20,766 - sqlalchemy.engine.Engine - INFO - [cached since 41.4s ago] (7773781383,)
2025-03-07 14:00:20,771 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 14:00:20,772 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] (7773781383, 'wrldxrd', 'worldwide', None, 0, 1, '2025-03-07 11:00:20.770896', '2025-03-07 11:00:20.770896', 0, 0, 0, None)
2025-03-07 14:00:20,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:00:20,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:20,785 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 14:00:20,787 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] (5,)
2025-03-07 14:00:20,985 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:20,986 - aiogram.event - INFO - Update id=117256038 is handled. Duration 1718 ms by bot id=8126821875
2025-03-07 14:00:22,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:22,619 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 14:00:22,619 - sqlalchemy.engine.Engine - INFO - [cached since 27.27s ago] ('321',)
2025-03-07 14:00:22,744 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:22,745 - aiogram.event - INFO - Update id=117256039 is handled. Duration 141 ms by bot id=8126821875
2025-03-07 14:00:25,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:25,060 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 14:00:25,060 - sqlalchemy.engine.Engine - INFO - [cached since 29.71s ago] ('123',)
2025-03-07 14:00:25,062 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 14:00:25,063 - sqlalchemy.engine.Engine - INFO - [cached since 29.71s ago] (1, 4)
2025-03-07 14:00:25,067 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 14:00:25,067 - sqlalchemy.engine.Engine - INFO - [cached since 29.71s ago] (0, 4)
2025-03-07 14:00:25,069 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:00:25,074 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:25,074 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:00:25,075 - sqlalchemy.engine.Engine - INFO - [cached since 45.71s ago] (7773781383,)
2025-03-07 14:00:25,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:25,079 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:00:25,079 - sqlalchemy.engine.Engine - INFO - [cached since 45.71s ago] ()
2025-03-07 14:00:25,081 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:00:25,082 - sqlalchemy.engine.Engine - INFO - [cached since 45.7s ago] ()
2025-03-07 14:00:25,083 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:25,197 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:25,199 - aiogram.event - INFO - Update id=117256040 is handled. Duration 157 ms by bot id=8126821875
2025-03-07 14:00:34,070 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:34,071 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 14:00:34,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (5,)
2025-03-07 14:00:34,195 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:34,196 - aiogram.event - INFO - Update id=117256041 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 14:00:36,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:36,183 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:00:36,183 - sqlalchemy.engine.Engine - INFO - [cached since 55.76s ago] ()
2025-03-07 14:00:36,305 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:36,401 - aiogram.event - INFO - Update id=117256042 is handled. Duration 235 ms by bot id=8126821875
2025-03-07 14:00:38,196 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:38,197 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:00:38,198 - sqlalchemy.engine.Engine - INFO - [cached since 58.82s ago] ()
2025-03-07 14:00:38,198 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:00:38,198 - sqlalchemy.engine.Engine - INFO - [cached since 58.82s ago] ()
2025-03-07 14:00:38,201 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:38,479 - aiogram.event - INFO - Update id=117256043 is handled. Duration 297 ms by bot id=8126821875
2025-03-07 14:00:39,900 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:39,901 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:00:39,901 - sqlalchemy.engine.Engine - INFO - [cached since 59.47s ago] ()
2025-03-07 14:00:40,235 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:40,238 - aiogram.event - INFO - Update id=117256044 is handled. Duration 656 ms by bot id=8126821875
2025-03-07 14:00:41,769 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:41,770 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:00:41,770 - sqlalchemy.engine.Engine - INFO - [cached since 62.4s ago] ()
2025-03-07 14:00:41,771 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:00:41,772 - sqlalchemy.engine.Engine - INFO - [cached since 62.39s ago] ()
2025-03-07 14:00:41,773 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:41,987 - aiogram.event - INFO - Update id=117256045 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 14:00:46,457 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:46,459 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 14:00:46,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2025-03-07 14:00:46,461 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 14:00:46,462 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 14:00:46,462 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 14:00:46,462 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 14:00:46,462 - keyboards - INFO - Создаем кнопку для пользователя 7773781383 с callback_data: user_7773781383
2025-03-07 14:00:46,570 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:46,570 - aiogram.event - INFO - Update id=117256046 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 14:00:49,867 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:49,869 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:00:49,870 - sqlalchemy.engine.Engine - INFO - [cached since 70.5s ago] (7442982117,)
2025-03-07 14:00:49,873 - keyboards - INFO - Создаем кнопку удаления для пользователя 7442982117 с callback_data: delete_user_7442982117
2025-03-07 14:00:50,053 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:50,230 - aiogram.event - INFO - Update id=117256047 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 14:00:52,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:52,912 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 14:00:52,912 - sqlalchemy.engine.Engine - INFO - [cached since 6.453s ago] ()
2025-03-07 14:00:52,914 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 14:00:52,915 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 14:00:52,915 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 14:00:52,915 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 14:00:52,915 - keyboards - INFO - Создаем кнопку для пользователя 7773781383 с callback_data: user_7773781383
2025-03-07 14:00:53,039 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:53,179 - aiogram.event - INFO - Update id=117256048 is handled. Duration 264 ms by bot id=8126821875
2025-03-07 14:00:54,268 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:00:54,269 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:00:54,269 - sqlalchemy.engine.Engine - INFO - [cached since 74.9s ago] ()
2025-03-07 14:00:54,270 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:00:54,270 - sqlalchemy.engine.Engine - INFO - [cached since 74.89s ago] ()
2025-03-07 14:00:54,271 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:00:54,476 - aiogram.event - INFO - Update id=117256049 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 14:00:56,828 - aiogram.event - INFO - Update id=117256050 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 14:01:40,997 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:01:40,998 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 14:01:40,998 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('BQACAgIAAxkBAAILpGfK0hTA7FTwhVQEpqtmaCrn_TyXAALqYwACR41ZSgAB5N_GX78EpzYE', 'tesb.rar', 177, 0, '2025-03-07 11:01:40.998775', None, None)
2025-03-07 14:01:41,002 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:01:41,009 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:01:41,010 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 14:01:41,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (1,)
2025-03-07 14:01:41,128 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:01:41,129 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('79181886500',)
2025-03-07 14:01:41,132 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, folder_name, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 14:01:41,133 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('79181886500', 'session_79181886500', 0, '2025-03-07 11:01:41.132033', None, None)
2025-03-07 14:01:41,134 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:01:41,138 - aiogram.event - INFO - Update id=117256051 is not handled. Duration 969 ms by bot id=8126821875
2025-03-07 14:01:41,138 - aiogram.event - ERROR - Cause exception while process update id=117256051 by bot id=8126821875
OperationalError: (sqlite3.OperationalError) table sessions has no column named folder_name
[SQL: INSERT INTO sessions (phone_number, folder_name, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?)]
[parameters: ('79181886500', 'session_79181886500', 0, '2025-03-07 11:01:41.132033', None, None)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlite3.OperationalError: table sessions has no column named folder_name

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\admin.py", line 516, in process_log_file
    await session_repo.create_session(
  File "C:\Users\semen\botikrost\database\repositories.py", line 291, in create_session
    await self.session.commit()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4431, in _flush
    with util.safe_reraise():
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table sessions has no column named folder_name
[SQL: INSERT INTO sessions (phone_number, folder_name, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?)]
[parameters: ('79181886500', 'session_79181886500', 0, '2025-03-07 11:01:41.132033', None, None)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-07 14:03:29,448 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 14:03:29,694 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:03:29,697 - __main__ - INFO - Бот остановлен
2025-03-07 14:03:46,616 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:03:46,617 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 14:03:46,617 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:03:46,618 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 14:03:46,618 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:03:46,620 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 14:03:46,620 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:03:46,621 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 14:03:46,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:03:46,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 14:03:46,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:03:46,625 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:03:46,627 - database.base - INFO - База данных успешно инициализирована
2025-03-07 14:03:46,627 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 14:03:46,900 - __main__ - INFO - Бот запущен
2025-03-07 14:03:46,901 - aiogram.dispatcher - INFO - Start polling
2025-03-07 14:03:47,164 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:03:48,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:03:48,644 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:03:48,645 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] (7442982117,)
2025-03-07 14:03:48,767 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:03:48,769 - aiogram.event - INFO - Update id=117256052 is handled. Duration 1515 ms by bot id=8126821875
2025-03-07 14:04:06,312 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 14:04:06,565 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:04:06,569 - __main__ - INFO - Бот остановлен
2025-03-07 14:06:01,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:01,726 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 14:06:01,726 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:06:01,728 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 14:06:01,729 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:06:01,729 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 14:06:01,730 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:06:01,732 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 14:06:01,732 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:06:01,734 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 14:06:01,734 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:06:01,735 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:01,737 - database.base - INFO - База данных успешно инициализирована
2025-03-07 14:06:01,737 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 14:06:02,017 - __main__ - INFO - Бот запущен
2025-03-07 14:06:02,018 - aiogram.dispatcher - INFO - Start polling
2025-03-07 14:06:02,288 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:06:09,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:09,772 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:06:09,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] (1083294848,)
2025-03-07 14:06:09,775 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:09,777 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:06:09,777 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2025-03-07 14:06:09,781 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:06:09,781 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2025-03-07 14:06:09,783 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:09,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:09,941 - aiogram.event - INFO - Update id=117256053 is handled. Duration 1608 ms by bot id=8126821875
2025-03-07 14:06:11,479 - aiogram.event - INFO - Update id=117256054 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 14:06:13,867 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:13,869 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 14:06:13,870 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('BQACAgIAAxkBAAILrWfK0yVjOD6qo2ns0ryISOOY-wozAAL-YwACR41ZSg6jydXvX1awNgQ', 'tesb.rar', 177, 0, '2025-03-07 11:06:13.869941', None, None)
2025-03-07 14:06:13,872 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:13,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:13,881 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 14:06:13,882 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (2,)
2025-03-07 14:06:14,020 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:06:14,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('79181886500',)
2025-03-07 14:06:14,023 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 14:06:14,023 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('79181886500', 0, '2025-03-07 11:06:14.023356', None, None)
2025-03-07 14:06:14,025 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:14,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:14,030 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 14:06:14,031 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (1,)
2025-03-07 14:06:14,033 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:06:14,033 - sqlalchemy.engine.Engine - INFO - [cached since 0.01357s ago] ('79181886500',)
2025-03-07 14:06:14,035 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 14:06:14,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('79181886500', '2025-03-07 11:06:14.035892')
2025-03-07 14:06:14,036 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:14,040 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:14,041 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 14:06:14,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (1,)
2025-03-07 14:06:14,044 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:06:14,044 - sqlalchemy.engine.Engine - INFO - [cached since 0.02423s ago] ('791819981981',)
2025-03-07 14:06:14,045 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 14:06:14,046 - sqlalchemy.engine.Engine - INFO - [cached since 0.02315s ago] ('791819981981', 0, '2025-03-07 11:06:14.045890', None, None)
2025-03-07 14:06:14,047 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:14,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:14,052 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 14:06:14,053 - sqlalchemy.engine.Engine - INFO - [cached since 0.02268s ago] (2,)
2025-03-07 14:06:14,054 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:06:14,054 - sqlalchemy.engine.Engine - INFO - [cached since 0.0346s ago] ('791819981981',)
2025-03-07 14:06:14,056 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 14:06:14,056 - sqlalchemy.engine.Engine - INFO - [cached since 0.02125s ago] ('791819981981', '2025-03-07 11:06:14.055924')
2025-03-07 14:06:14,057 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:14,062 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:14,063 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 14:06:14,063 - sqlalchemy.engine.Engine - INFO - [cached since 0.02191s ago] (2,)
2025-03-07 14:06:14,165 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:14,167 - aiogram.event - INFO - Update id=117256055 is handled. Duration 594 ms by bot id=8126821875
2025-03-07 14:06:19,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:19,838 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:06:19,838 - sqlalchemy.engine.Engine - INFO - [cached since 10.07s ago] (1083294848,)
2025-03-07 14:06:19,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:19,839 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:06:19,840 - sqlalchemy.engine.Engine - INFO - [cached since 10.06s ago] ()
2025-03-07 14:06:19,841 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:06:19,841 - sqlalchemy.engine.Engine - INFO - [cached since 10.06s ago] ()
2025-03-07 14:06:19,843 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:20,015 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:20,016 - aiogram.event - INFO - Update id=117256056 is handled. Duration 1453 ms by bot id=8126821875
2025-03-07 14:06:22,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:22,960 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:06:22,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2025-03-07 14:06:23,128 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:23,129 - aiogram.event - INFO - Update id=117256057 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 14:06:24,486 - aiogram.event - INFO - Update id=117256058 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 14:06:26,763 - aiogram.event - INFO - Update id=117256059 is handled. Duration 141 ms by bot id=8126821875
2025-03-07 14:06:28,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:28,434 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 14:06:28,434 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('123123', 1, 0, 1, '2025-03-07 11:06:28.434573', 1083294848)
2025-03-07 14:06:28,436 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:28,439 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:28,442 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 14:06:28,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] (6,)
2025-03-07 14:06:28,445 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:28,619 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:28,620 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:06:28,620 - sqlalchemy.engine.Engine - INFO - [cached since 5.66s ago] ()
2025-03-07 14:06:28,780 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:28,782 - aiogram.event - INFO - Update id=117256060 is handled. Duration 360 ms by bot id=8126821875
2025-03-07 14:06:35,688 - aiogram.event - INFO - Update id=117256061 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 14:06:43,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:43,287 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:06:43,287 - sqlalchemy.engine.Engine - INFO - [cached since 33.52s ago] (7442982117,)
2025-03-07 14:06:43,519 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:43,521 - aiogram.event - INFO - Update id=117256062 is handled. Duration 1531 ms by bot id=8126821875
2025-03-07 14:06:44,403 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:44,405 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 14:06:44,405 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('123123',)
2025-03-07 14:06:44,407 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 14:06:44,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (1, 6)
2025-03-07 14:06:44,410 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 14:06:44,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] (0, 6)
2025-03-07 14:06:44,413 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:44,418 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:44,418 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:06:44,418 - sqlalchemy.engine.Engine - INFO - [cached since 34.65s ago] (7442982117,)
2025-03-07 14:06:44,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:44,421 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:06:44,421 - sqlalchemy.engine.Engine - INFO - [cached since 34.64s ago] ()
2025-03-07 14:06:44,423 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:06:44,423 - sqlalchemy.engine.Engine - INFO - [cached since 34.64s ago] ()
2025-03-07 14:06:44,425 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:44,581 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:44,583 - aiogram.event - INFO - Update id=117256063 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 14:06:46,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:46,797 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:06:46,797 - sqlalchemy.engine.Engine - INFO - [cached since 37.02s ago] ()
2025-03-07 14:06:46,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:06:46,922 - aiogram.event - INFO - Update id=117256064 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 14:06:53,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:53,803 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:06:53,803 - sqlalchemy.engine.Engine - INFO - [cached since 44.02s ago] ()
2025-03-07 14:06:53,917 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:06:53,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] (7442982117,)
2025-03-07 14:06:53,921 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 14:06:53,922 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (2, 0)
2025-03-07 14:06:53,925 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 14:06:53,925 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] (1, '2025-03-07 11:06:53.924069', 2, 1)
2025-03-07 14:06:53,929 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 14:06:53,929 - sqlalchemy.engine.Engine - INFO - [cached since 0.003882s ago] (1, '2025-03-07 11:06:53.928144', 2, 2)
2025-03-07 14:06:53,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:53,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:06:53,936 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 14:06:53,936 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('2025-03-07 11:06:53.936098', 2, 7442982117)
2025-03-07 14:06:53,937 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:06:53,940 - aiogram.event - INFO - Update id=117256065 is not handled. Duration 141 ms by bot id=8126821875
2025-03-07 14:06:53,940 - aiogram.event - ERROR - Cause exception while process update id=117256065 by bot id=8126821875
NameError: name 'SESSIONS_DIR' is not defined
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\worker.py", line 175, in process_logs_count
    folder_path = os.path.join(SESSIONS_DIR, folder_name)
                               ^^^^^^^^^^^^
NameError: name 'SESSIONS_DIR' is not defined
2025-03-07 14:09:10,950 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 14:09:11,204 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:09:11,206 - __main__ - INFO - Бот остановлен
2025-03-07 14:11:38,807 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:11:38,808 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 14:11:38,809 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:11:38,811 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 14:11:38,811 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:11:38,813 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 14:11:38,814 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:11:38,815 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 14:11:38,815 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:11:38,817 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 14:11:38,817 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:11:38,820 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:11:38,822 - database.base - INFO - База данных успешно инициализирована
2025-03-07 14:11:38,822 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 14:11:39,098 - __main__ - INFO - Бот запущен
2025-03-07 14:11:39,099 - aiogram.dispatcher - INFO - Start polling
2025-03-07 14:11:39,351 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:11:44,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:11:44,104 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:11:44,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (1083294848,)
2025-03-07 14:11:44,112 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:11:44,113 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:11:44,113 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2025-03-07 14:11:44,116 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:11:44,116 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
2025-03-07 14:11:44,117 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:11:44,241 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:11:44,242 - aiogram.event - INFO - Update id=117256066 is handled. Duration 1641 ms by bot id=8126821875
2025-03-07 14:11:53,132 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 14:11:53,392 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:11:53,393 - __main__ - INFO - Бот остановлен
2025-03-07 14:12:01,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:01,020 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 14:12:01,020 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:12:01,022 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 14:12:01,022 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:12:01,023 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 14:12:01,023 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:12:01,024 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 14:12:01,024 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:12:01,025 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 14:12:01,025 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 14:12:01,027 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:01,028 - database.base - INFO - База данных успешно инициализирована
2025-03-07 14:12:01,028 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 14:12:01,293 - __main__ - INFO - Бот запущен
2025-03-07 14:12:01,295 - aiogram.dispatcher - INFO - Start polling
2025-03-07 14:12:01,556 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 14:12:29,110 - aiogram.event - INFO - Update id=117256067 is handled. Duration 561 ms by bot id=8126821875
2025-03-07 14:12:33,414 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,416 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 14:12:33,418 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('BQACAgIAAxkBAAILxmfK1KGpkeno_nL3Z1z5IN9ykVh9AAIeZAACR41ZSiQKrbOWuEv3NgQ', 'tesb.rar', 160, 0, '2025-03-07 11:12:33.416936', None, None)
2025-03-07 14:12:33,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:33,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,431 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 14:12:33,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (3,)
2025-03-07 14:12:33,569 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:12:33,569 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('123',)
2025-03-07 14:12:33,572 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 14:12:33,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('123', 0, '2025-03-07 11:12:33.572522', None, None)
2025-03-07 14:12:33,574 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:33,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,580 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 14:12:33,581 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (3,)
2025-03-07 14:12:33,585 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:12:33,585 - sqlalchemy.engine.Engine - INFO - [cached since 0.01729s ago] ('123',)
2025-03-07 14:12:33,589 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 14:12:33,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('123', '2025-03-07 11:12:33.589105')
2025-03-07 14:12:33,591 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:33,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,597 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 14:12:33,597 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (3,)
2025-03-07 14:12:33,598 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:12:33,599 - sqlalchemy.engine.Engine - INFO - [cached since 0.03013s ago] ('321',)
2025-03-07 14:12:33,601 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 14:12:33,601 - sqlalchemy.engine.Engine - INFO - [cached since 0.02934s ago] ('321', 0, '2025-03-07 11:12:33.600870', None, None)
2025-03-07 14:12:33,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:33,607 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,608 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 14:12:33,608 - sqlalchemy.engine.Engine - INFO - [cached since 0.02833s ago] (4,)
2025-03-07 14:12:33,610 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 14:12:33,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.04167s ago] ('321',)
2025-03-07 14:12:33,612 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 14:12:33,612 - sqlalchemy.engine.Engine - INFO - [cached since 0.02364s ago] ('321', '2025-03-07 11:12:33.612225')
2025-03-07 14:12:33,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:33,619 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:33,619 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 14:12:33,620 - sqlalchemy.engine.Engine - INFO - [cached since 0.02323s ago] (4,)
2025-03-07 14:12:33,794 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:33,795 - aiogram.event - INFO - Update id=117256068 is handled. Duration 797 ms by bot id=8126821875
2025-03-07 14:12:39,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:39,148 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:12:39,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2025-03-07 14:12:39,270 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:39,271 - aiogram.event - INFO - Update id=117256069 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 14:12:40,315 - aiogram.event - INFO - Update id=117256070 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 14:12:42,470 - aiogram.event - INFO - Update id=117256071 is handled. Duration 157 ms by bot id=8126821875
2025-03-07 14:12:43,977 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:43,978 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 14:12:43,979 - sqlalchemy.engine.Engine - INFO - [generated in 0.00183s] ('111', 1, 0, 1, '2025-03-07 11:12:43.978923', 1083294848)
2025-03-07 14:12:43,986 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:43,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:43,998 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 14:12:43,998 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (7,)
2025-03-07 14:12:44,000 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:44,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:44,225 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 14:12:44,225 - sqlalchemy.engine.Engine - INFO - [cached since 5.078s ago] ()
2025-03-07 14:12:44,384 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:44,385 - aiogram.event - INFO - Update id=117256072 is handled. Duration 422 ms by bot id=8126821875
2025-03-07 14:12:52,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:52,264 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:12:52,265 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (7442982117,)
2025-03-07 14:12:52,376 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:52,377 - aiogram.event - INFO - Update id=117256073 is handled. Duration 1327 ms by bot id=8126821875
2025-03-07 14:12:55,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:55,675 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 14:12:55,676 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('111',)
2025-03-07 14:12:55,678 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 14:12:55,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (1, 7)
2025-03-07 14:12:55,684 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 14:12:55,684 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] (0, 7)
2025-03-07 14:12:55,688 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:55,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:55,693 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:12:55,693 - sqlalchemy.engine.Engine - INFO - [cached since 3.429s ago] (7442982117,)
2025-03-07 14:12:55,697 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:55,700 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 14:12:55,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ()
2025-03-07 14:12:55,704 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:12:55,704 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2025-03-07 14:12:55,707 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:55,831 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:55,833 - aiogram.event - INFO - Update id=117256074 is handled. Duration 155 ms by bot id=8126821875
2025-03-07 14:12:57,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:57,954 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:12:57,954 - sqlalchemy.engine.Engine - INFO - [cached since 2.251s ago] ()
2025-03-07 14:12:58,100 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 14:12:58,101 - aiogram.event - INFO - Update id=117256075 is handled. Duration 358 ms by bot id=8126821875
2025-03-07 14:12:58,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:58,994 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 14:12:58,995 - sqlalchemy.engine.Engine - INFO - [cached since 3.29s ago] ()
2025-03-07 14:12:59,138 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 14:12:59,139 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] (7442982117,)
2025-03-07 14:12:59,141 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 14:12:59,142 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (2, 0)
2025-03-07 14:12:59,143 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 14:12:59,144 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] (1, '2025-03-07 11:12:59.143175', 2, 3)
2025-03-07 14:12:59,146 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 14:12:59,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.003205s ago] (1, '2025-03-07 11:12:59.146176', 2, 4)
2025-03-07 14:12:59,148 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:59,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 14:12:59,153 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 14:12:59,154 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('2025-03-07 11:12:59.153299', 2, 7442982117)
2025-03-07 14:12:59,156 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 14:12:59,412 - utils.archive - INFO - Удалена папка сессии: session_123
2025-03-07 14:12:59,413 - utils.archive - INFO - Удалена папка сессии: session_321
2025-03-07 14:12:59,414 - aiogram.event - INFO - Update id=117256076 is not handled. Duration 422 ms by bot id=8126821875
2025-03-07 14:12:59,414 - aiogram.event - ERROR - Cause exception while process update id=117256076 by bot id=8126821875
AttributeError: 'coroutine' object has no attribute 'taken_logs_count'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\worker.py", line 217, in process_logs_count
    f"Сессии успешно выданы! Всего вы взяли: {await user_repo.get_by_user_id(message.from_user.id).taken_logs_count} сессий."
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'taken_logs_count'
2025-03-07 17:37:30,339 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 17:37:30,636 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 17:37:30,645 - __main__ - INFO - Бот остановлен
2025-03-07 17:37:43,624 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:37:43,624 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 17:37:43,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:37:43,626 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 17:37:43,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:37:43,628 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 17:37:43,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:37:43,630 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 17:37:43,630 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:37:43,631 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 17:37:43,632 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:37:43,633 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:37:43,634 - database.base - INFO - База данных успешно инициализирована
2025-03-07 17:37:43,635 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 17:37:43,953 - __main__ - INFO - Бот запущен
2025-03-07 17:37:43,953 - aiogram.dispatcher - INFO - Start polling
2025-03-07 17:37:44,345 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 17:43:31,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:31,376 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:43:31,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (1083294848,)
2025-03-07 17:43:31,381 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:31,383 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:43:31,383 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2025-03-07 17:43:31,386 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:43:31,386 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2025-03-07 17:43:31,389 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:31,546 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:31,547 - aiogram.event - INFO - Update id=117256077 is handled. Duration 1672 ms by bot id=8126821875
2025-03-07 17:43:33,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:33,458 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 17:43:33,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2025-03-07 17:43:33,565 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:33,567 - aiogram.event - INFO - Update id=117256078 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 17:43:35,067 - aiogram.event - INFO - Update id=117256079 is handled. Duration 235 ms by bot id=8126821875
2025-03-07 17:43:36,253 - aiogram.event - INFO - Update id=117256080 is handled. Duration 265 ms by bot id=8126821875
2025-03-07 17:43:37,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:37,268 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 17:43:37,268 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('123', 1, 0, 1, '2025-03-07 14:43:37.268850', 1083294848)
2025-03-07 17:43:37,272 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:43:37,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:37,278 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 17:43:37,279 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] (8,)
2025-03-07 17:43:37,280 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:37,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:37,393 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 17:43:37,393 - sqlalchemy.engine.Engine - INFO - [cached since 3.936s ago] ()
2025-03-07 17:43:37,514 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:37,515 - aiogram.event - INFO - Update id=117256081 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 17:43:38,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:43:38,911 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:43:38,912 - sqlalchemy.engine.Engine - INFO - [cached since 7.529s ago] ()
2025-03-07 17:43:38,914 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:43:38,914 - sqlalchemy.engine.Engine - INFO - [cached since 7.528s ago] ()
2025-03-07 17:43:38,915 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:43:39,156 - aiogram.event - INFO - Update id=117256082 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 17:43:40,509 - aiogram.event - INFO - Update id=117256083 is handled. Duration 311 ms by bot id=8126821875
2025-03-07 17:44:20,261 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,262 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 17:44:20,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('BQACAgIAAxkBAAIL5GfLBkQYAjB6DEvNoQdWTLQX4fceAAK5ZwACR41ZSs3jarEtX6LmNgQ', 'tesb.rar', 167, 0, '2025-03-07 14:44:20.262026', None, None)
2025-03-07 17:44:20,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:44:20,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,272 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 17:44:20,273 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] (4,)
2025-03-07 17:44:20,441 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:44:20,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('12321312',)
2025-03-07 17:44:20,443 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 17:44:20,444 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('12321312', 0, '2025-03-07 14:44:20.443069', None, None)
2025-03-07 17:44:20,445 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:44:20,449 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,450 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 17:44:20,451 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (5,)
2025-03-07 17:44:20,452 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:44:20,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.0125s ago] ('12321312',)
2025-03-07 17:44:20,454 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 17:44:20,455 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('12321312', '2025-03-07 14:44:20.454955')
2025-03-07 17:44:20,458 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:44:20,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,463 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 17:44:20,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (5,)
2025-03-07 17:44:20,465 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:44:20,465 - sqlalchemy.engine.Engine - INFO - [cached since 0.02455s ago] ('91231',)
2025-03-07 17:44:20,466 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 17:44:20,467 - sqlalchemy.engine.Engine - INFO - [cached since 0.02414s ago] ('91231', 0, '2025-03-07 14:44:20.466620', None, None)
2025-03-07 17:44:20,469 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:44:20,473 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,474 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 17:44:20,474 - sqlalchemy.engine.Engine - INFO - [cached since 0.02392s ago] (6,)
2025-03-07 17:44:20,476 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:44:20,477 - sqlalchemy.engine.Engine - INFO - [cached since 0.03587s ago] ('91231',)
2025-03-07 17:44:20,477 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 17:44:20,478 - sqlalchemy.engine.Engine - INFO - [cached since 0.02344s ago] ('91231', '2025-03-07 14:44:20.477843')
2025-03-07 17:44:20,480 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:44:20,485 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:20,486 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 17:44:20,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.02419s ago] (6,)
2025-03-07 17:44:20,605 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:20,606 - aiogram.event - INFO - Update id=117256084 is handled. Duration 858 ms by bot id=8126821875
2025-03-07 17:44:26,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:26,787 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:44:26,787 - sqlalchemy.engine.Engine - INFO - [cached since 55.41s ago] (1083294848,)
2025-03-07 17:44:26,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:26,790 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:44:26,790 - sqlalchemy.engine.Engine - INFO - [cached since 55.41s ago] ()
2025-03-07 17:44:26,791 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:44:26,792 - sqlalchemy.engine.Engine - INFO - [cached since 55.41s ago] ()
2025-03-07 17:44:26,793 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:26,902 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:26,904 - aiogram.event - INFO - Update id=117256085 is handled. Duration 1313 ms by bot id=8126821875
2025-03-07 17:44:37,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:37,576 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:44:37,577 - sqlalchemy.engine.Engine - INFO - [cached since 66.2s ago] (7442982117,)
2025-03-07 17:44:37,580 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:37,580 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:44:37,581 - sqlalchemy.engine.Engine - INFO - [cached since 66.2s ago] ()
2025-03-07 17:44:37,582 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:44:37,583 - sqlalchemy.engine.Engine - INFO - [cached since 66.2s ago] ()
2025-03-07 17:44:37,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:37,766 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:37,768 - aiogram.event - INFO - Update id=117256086 is handled. Duration 1577 ms by bot id=8126821875
2025-03-07 17:44:46,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:46,639 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:44:46,639 - sqlalchemy.engine.Engine - INFO - [cached since 75.26s ago] (7773781383,)
2025-03-07 17:44:46,644 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:44:46,645 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:44:46,645 - sqlalchemy.engine.Engine - INFO - [cached since 75.26s ago] ()
2025-03-07 17:44:46,647 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:44:46,648 - sqlalchemy.engine.Engine - INFO - [cached since 75.26s ago] ()
2025-03-07 17:44:46,649 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:46,831 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:44:46,832 - aiogram.event - INFO - Update id=117256087 is handled. Duration 1467 ms by bot id=8126821875
2025-03-07 17:45:25,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:25,583 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:45:25,583 - sqlalchemy.engine.Engine - INFO - [cached since 114.2s ago] ()
2025-03-07 17:45:25,731 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:45:25,733 - aiogram.event - INFO - Update id=117256088 is handled. Duration 421 ms by bot id=8126821875
2025-03-07 17:45:28,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:28,175 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:45:28,176 - sqlalchemy.engine.Engine - INFO - [cached since 116.8s ago] ()
2025-03-07 17:45:28,280 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:45:28,281 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (7773781383,)
2025-03-07 17:45:28,283 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 17:45:28,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] (2, 0)
2025-03-07 17:45:28,288 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 17:45:28,289 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (1, '2025-03-07 14:45:28.286691', 5, 5)
2025-03-07 17:45:28,291 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 17:45:28,292 - sqlalchemy.engine.Engine - INFO - [cached since 0.003503s ago] (1, '2025-03-07 14:45:28.291215', 5, 6)
2025-03-07 17:45:28,292 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:45:28,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:28,297 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 17:45:28,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('2025-03-07 14:45:28.297729', 2, 7773781383)
2025-03-07 17:45:28,300 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:45:28,633 - utils.archive - INFO - Удалена папка сессии: session_12321312
2025-03-07 17:45:28,634 - utils.archive - INFO - Удалена папка сессии: session_91231
2025-03-07 17:45:28,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:28,637 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:45:28,637 - sqlalchemy.engine.Engine - INFO - [cached since 117.3s ago] (7773781383,)
2025-03-07 17:45:28,752 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:45:28,752 - aiogram.event - INFO - Update id=117256089 is handled. Duration 577 ms by bot id=8126821875
2025-03-07 17:45:43,469 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:43,470 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:45:43,470 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] (7773781383,)
2025-03-07 17:45:43,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:43,475 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:45:43,475 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ()
2025-03-07 17:45:43,476 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:45:43,478 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ()
2025-03-07 17:45:43,479 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:45:43,644 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:45:43,646 - aiogram.event - INFO - Update id=117256090 is handled. Duration 1531 ms by bot id=8126821875
2025-03-07 17:45:46,136 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:45:46,136 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:45:46,136 - sqlalchemy.engine.Engine - INFO - [cached since 134.8s ago] (8126821875,)
2025-03-07 17:45:46,138 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 17:45:46,139 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ()
2025-03-07 17:45:46,140 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:45:46,140 - sqlalchemy.engine.Engine - INFO - [cached since 134.8s ago] ()
2025-03-07 17:45:46,141 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:45:46,141 - aiogram.event - INFO - Update id=117256091 is not handled. Duration 93 ms by bot id=8126821875
2025-03-07 17:45:46,142 - aiogram.event - ERROR - Cause exception while process update id=117256091 by bot id=8126821875
AttributeError: 'NoneType' object has no attribute 'taken_logs_count'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 165, in worker_button_handler
    await show_statistics(callback.message)
  File "C:\Users\semen\botikrost\handlers\worker.py", line 39, in show_statistics
    stats_message += f"- Взято сессий: {user.taken_logs_count}\n"
                                        ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'taken_logs_count'
2025-03-07 17:46:10,645 - aiogram.event - INFO - Update id=117256092 is handled. Duration 391 ms by bot id=8126821875
2025-03-07 17:46:12,405 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:46:12,405 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:46:12,405 - sqlalchemy.engine.Engine - INFO - [cached since 161s ago] (7773781383,)
2025-03-07 17:46:12,406 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:46:12,409 - sqlalchemy.engine.Engine - INFO - [cached since 161s ago] (7773781383,)
2025-03-07 17:46:12,411 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 17:46:12,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('2025-03-07 14:46:12.411268', 1, 1, '2025-03-07 14:46:12.410269', 7773781383)
2025-03-07 17:46:12,413 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:46:12,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:46:12,418 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:46:12,419 - sqlalchemy.engine.Engine - INFO - [cached since 161s ago] (7773781383,)
2025-03-07 17:46:12,525 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:46:12,525 - aiogram.event - INFO - Update id=117256093 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 17:46:15,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:46:15,744 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:46:15,744 - sqlalchemy.engine.Engine - INFO - [cached since 47.46s ago] (8126821875,)
2025-03-07 17:46:15,746 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:46:15,746 - sqlalchemy.engine.Engine - INFO - [cached since 47.47s ago] (8126821875,)
2025-03-07 17:46:15,859 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:46:15,861 - aiogram.event - INFO - Update id=117256094 is handled. Duration 234 ms by bot id=8126821875
2025-03-07 17:46:56,655 - aiogram.event - INFO - Update id=117256095 is handled. Duration 577 ms by bot id=8126821875
2025-03-07 17:46:59,256 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:46:59,257 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 17:46:59,258 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ()
2025-03-07 17:47:00,036 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:00,039 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:00,039 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:47:00,040 - sqlalchemy.engine.Engine - INFO - [cached since 208.7s ago] ()
2025-03-07 17:47:00,041 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:47:00,041 - sqlalchemy.engine.Engine - INFO - [cached since 208.7s ago] ()
2025-03-07 17:47:00,042 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:00,172 - aiogram.event - INFO - Update id=117256096 is handled. Duration 922 ms by bot id=8126821875
2025-03-07 17:47:12,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:12,068 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:47:12,068 - sqlalchemy.engine.Engine - INFO - [cached since 220.7s ago] (7699005037,)
2025-03-07 17:47:12,071 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:12,071 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:47:12,072 - sqlalchemy.engine.Engine - INFO - [cached since 220.7s ago] ()
2025-03-07 17:47:12,073 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:47:12,073 - sqlalchemy.engine.Engine - INFO - [cached since 220.7s ago] ()
2025-03-07 17:47:12,074 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:12,192 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:12,193 - aiogram.event - INFO - Update id=117256097 is handled. Duration 1313 ms by bot id=8126821875
2025-03-07 17:47:15,416 - aiogram.event - INFO - Update id=117256098 is handled. Duration 188 ms by bot id=8126821875
2025-03-07 17:47:19,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:19,283 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 17:47:19,285 - sqlalchemy.engine.Engine - INFO - [cached since 179s ago] ('BQACAgIAAxkBAAIMCGfLBvcFOxV19jrIcTJhlunLHDFTAALDZwACR41ZSppAJzzK9CZcNgQ', 'tesb.rar', 167, 0, '2025-03-07 14:47:19.283140', None, None)
2025-03-07 17:47:19,287 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:47:19,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:19,291 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 17:47:19,292 - sqlalchemy.engine.Engine - INFO - [cached since 179s ago] (5,)
2025-03-07 17:47:19,417 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:47:19,417 - sqlalchemy.engine.Engine - INFO - [cached since 179s ago] ('12321312',)
2025-03-07 17:47:19,419 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:47:19,419 - sqlalchemy.engine.Engine - INFO - [cached since 179s ago] ('91231',)
2025-03-07 17:47:19,525 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:19,526 - aiogram.event - INFO - Update id=117256099 is handled. Duration 577 ms by bot id=8126821875
2025-03-07 17:47:42,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:42,107 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 17:47:42,107 - sqlalchemy.engine.Engine - INFO - [cached since 42.85s ago] ()
2025-03-07 17:47:42,108 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 17:47:42,109 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 17:47:42,109 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 17:47:42,109 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 17:47:42,109 - keyboards - INFO - Создаем кнопку для пользователя 7773781383 с callback_data: user_7773781383
2025-03-07 17:47:42,221 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:42,222 - aiogram.event - INFO - Update id=117256100 is handled. Duration 391 ms by bot id=8126821875
2025-03-07 17:47:43,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:43,829 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:47:43,829 - sqlalchemy.engine.Engine - INFO - [cached since 252.4s ago] ()
2025-03-07 17:47:43,830 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:47:43,831 - sqlalchemy.engine.Engine - INFO - [cached since 252.4s ago] ()
2025-03-07 17:47:43,832 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:44,035 - aiogram.event - INFO - Update id=117256101 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 17:47:46,211 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:46,211 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 17:47:46,212 - sqlalchemy.engine.Engine - INFO - [cached since 46.95s ago] ()
2025-03-07 17:47:46,213 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 17:47:46,214 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 17:47:46,214 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 17:47:46,214 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 17:47:46,214 - keyboards - INFO - Создаем кнопку для пользователя 7773781383 с callback_data: user_7773781383
2025-03-07 17:47:46,366 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:46,368 - aiogram.event - INFO - Update id=117256102 is handled. Duration 296 ms by bot id=8126821875
2025-03-07 17:47:47,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:47,384 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:47:47,384 - sqlalchemy.engine.Engine - INFO - [cached since 256s ago] (7773781383,)
2025-03-07 17:47:47,385 - keyboards - INFO - Создаем кнопку удаления для пользователя 7773781383 с callback_data: delete_user_7773781383
2025-03-07 17:47:47,563 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:47,752 - aiogram.event - INFO - Update id=117256103 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 17:47:52,214 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:52,215 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:47:52,216 - sqlalchemy.engine.Engine - INFO - [cached since 260.8s ago] (7442982117,)
2025-03-07 17:47:52,218 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:52,219 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:47:52,219 - sqlalchemy.engine.Engine - INFO - [cached since 260.8s ago] ()
2025-03-07 17:47:52,222 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:47:52,223 - sqlalchemy.engine.Engine - INFO - [cached since 260.8s ago] ()
2025-03-07 17:47:52,224 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:52,352 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:52,353 - aiogram.event - INFO - Update id=117256104 is handled. Duration 1375 ms by bot id=8126821875
2025-03-07 17:47:56,286 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:56,286 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 17:47:56,286 - sqlalchemy.engine.Engine - INFO - [cached since 57.03s ago] ()
2025-03-07 17:47:56,287 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 17:47:56,287 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 17:47:56,288 - keyboards - INFO - Создаем кнопку для пользователя 7699005037 с callback_data: user_7699005037
2025-03-07 17:47:56,288 - keyboards - INFO - Создаем кнопку для пользователя 8014080433 с callback_data: user_8014080433
2025-03-07 17:47:56,288 - keyboards - INFO - Создаем кнопку для пользователя 7773781383 с callback_data: user_7773781383
2025-03-07 17:47:56,485 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:56,633 - aiogram.event - INFO - Update id=117256105 is handled. Duration 342 ms by bot id=8126821875
2025-03-07 17:47:57,635 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:47:57,635 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:47:57,635 - sqlalchemy.engine.Engine - INFO - [cached since 266.3s ago] ()
2025-03-07 17:47:57,636 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:47:57,636 - sqlalchemy.engine.Engine - INFO - [cached since 266.2s ago] ()
2025-03-07 17:47:57,637 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:47:57,897 - aiogram.event - INFO - Update id=117256106 is handled. Duration 266 ms by bot id=8126821875
2025-03-07 17:48:12,967 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:12,968 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:48:12,968 - sqlalchemy.engine.Engine - INFO - [cached since 281.6s ago] (1083294848,)
2025-03-07 17:48:12,971 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:12,972 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:48:12,972 - sqlalchemy.engine.Engine - INFO - [cached since 281.6s ago] ()
2025-03-07 17:48:12,973 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:48:12,974 - sqlalchemy.engine.Engine - INFO - [cached since 281.6s ago] ()
2025-03-07 17:48:12,976 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:13,107 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:13,108 - aiogram.event - INFO - Update id=117256107 is handled. Duration 1358 ms by bot id=8126821875
2025-03-07 17:48:24,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:24,189 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 17:48:24,190 - sqlalchemy.engine.Engine - INFO - [cached since 290.7s ago] ()
2025-03-07 17:48:24,302 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:24,304 - aiogram.event - INFO - Update id=117256108 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 17:48:34,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:34,740 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 17:48:34,740 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] (8,)
2025-03-07 17:48:35,460 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:35,461 - aiogram.event - INFO - Update id=117256109 is handled. Duration 717 ms by bot id=8126821875
2025-03-07 17:48:38,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:38,881 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 17:48:38,881 - sqlalchemy.engine.Engine - INFO - [cached since 4.141s ago] (8,)
2025-03-07 17:48:39,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:39,006 - aiogram.event - INFO - Update id=117256110 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 17:48:40,847 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:40,847 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 17:48:40,848 - sqlalchemy.engine.Engine - INFO - [cached since 6.108s ago] (8,)
2025-03-07 17:48:40,850 - sqlalchemy.engine.Engine - INFO - DELETE FROM passwords WHERE passwords.id = ?
2025-03-07 17:48:40,850 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] (8,)
2025-03-07 17:48:40,851 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:48:41,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:41,029 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 17:48:41,029 - sqlalchemy.engine.Engine - INFO - [cached since 307.6s ago] ()
2025-03-07 17:48:41,184 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:41,313 - aiogram.event - INFO - Update id=117256111 is handled. Duration 469 ms by bot id=8126821875
2025-03-07 17:48:42,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:48:42,826 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:48:42,826 - sqlalchemy.engine.Engine - INFO - [cached since 311.4s ago] ()
2025-03-07 17:48:42,828 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:48:42,828 - sqlalchemy.engine.Engine - INFO - [cached since 311.4s ago] ()
2025-03-07 17:48:42,830 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:48:43,069 - aiogram.event - INFO - Update id=117256112 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 17:53:34,369 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 17:53:34,621 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 17:53:34,622 - __main__ - INFO - Бот остановлен
2025-03-07 17:54:50,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:54:50,784 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 17:54:50,784 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:54:50,785 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 17:54:50,785 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:54:50,786 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 17:54:50,786 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:54:50,787 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 17:54:50,788 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:54:50,789 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 17:54:50,789 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:54:50,790 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:54:50,791 - database.base - INFO - База данных успешно инициализирована
2025-03-07 17:54:50,791 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 17:54:51,043 - __main__ - INFO - Бот запущен
2025-03-07 17:54:51,043 - aiogram.dispatcher - INFO - Start polling
2025-03-07 17:54:51,331 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 17:54:52,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:54:52,854 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:54:52,854 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (7442982117,)
2025-03-07 17:54:52,858 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:54:52,860 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:54:52,860 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ()
2025-03-07 17:54:52,862 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:54:52,863 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2025-03-07 17:54:52,864 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:54:53,003 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:54:53,004 - aiogram.event - INFO - Update id=117256113 is handled. Duration 1577 ms by bot id=8126821875
2025-03-07 17:55:17,804 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:55:17,805 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:55:17,806 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] (7442982117,)
2025-03-07 17:55:17,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:55:17,811 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:55:17,812 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] ()
2025-03-07 17:55:17,814 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:55:17,815 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] ()
2025-03-07 17:55:17,818 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:55:17,945 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:55:17,947 - aiogram.event - INFO - Update id=117256114 is handled. Duration 1563 ms by bot id=8126821875
2025-03-07 17:55:18,962 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:55:18,963 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:55:18,963 - sqlalchemy.engine.Engine - INFO - [cached since 26.11s ago] (8126821875,)
2025-03-07 17:55:18,964 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 17:55:18,965 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ()
2025-03-07 17:55:18,965 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:55:18,965 - sqlalchemy.engine.Engine - INFO - [cached since 26.1s ago] ()
2025-03-07 17:55:19,087 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:55:19,088 - aiogram.event - INFO - Update id=117256115 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 17:55:32,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:55:32,023 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:55:32,024 - sqlalchemy.engine.Engine - INFO - [cached since 39.17s ago] (7442982117,)
2025-03-07 17:55:32,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:55:32,027 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:55:32,027 - sqlalchemy.engine.Engine - INFO - [cached since 39.17s ago] ()
2025-03-07 17:55:32,029 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:55:32,029 - sqlalchemy.engine.Engine - INFO - [cached since 39.17s ago] ()
2025-03-07 17:55:32,031 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:55:32,152 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:55:32,153 - aiogram.event - INFO - Update id=117256116 is handled. Duration 1327 ms by bot id=8126821875
2025-03-07 17:56:10,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:10,532 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:56:10,532 - sqlalchemy.engine.Engine - INFO - [cached since 77.68s ago] (1083294848,)
2025-03-07 17:56:10,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:10,534 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 17:56:10,535 - sqlalchemy.engine.Engine - INFO - [cached since 77.67s ago] ()
2025-03-07 17:56:10,535 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 17:56:10,536 - sqlalchemy.engine.Engine - INFO - [cached since 77.67s ago] ()
2025-03-07 17:56:10,538 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:56:10,699 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:56:10,700 - aiogram.event - INFO - Update id=117256117 is handled. Duration 1641 ms by bot id=8126821875
2025-03-07 17:56:12,854 - aiogram.event - INFO - Update id=117256118 is handled. Duration 311 ms by bot id=8126821875
2025-03-07 17:56:15,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,526 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 17:56:15,527 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('BQACAgIAAxkBAAIMJmfLCQ-Viz9MDr6g_LshW7e9HpO0AALnZwACR41ZSoryCFYWz2nMNgQ', 'tesb.rar', 175, 0, '2025-03-07 14:56:15.526803', None, None)
2025-03-07 17:56:15,531 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:56:15,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,537 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 17:56:15,537 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] (6,)
2025-03-07 17:56:15,727 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:56:15,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('0919001010',)
2025-03-07 17:56:15,729 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 17:56:15,729 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('0919001010', 0, '2025-03-07 14:56:15.729720', None, None)
2025-03-07 17:56:15,731 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:56:15,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,735 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 17:56:15,736 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (7,)
2025-03-07 17:56:15,739 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:56:15,739 - sqlalchemy.engine.Engine - INFO - [cached since 0.0118s ago] ('0919001010',)
2025-03-07 17:56:15,741 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 17:56:15,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('0919001010', '2025-03-07 14:56:15.741116')
2025-03-07 17:56:15,743 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:56:15,748 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,748 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 17:56:15,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (7,)
2025-03-07 17:56:15,750 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:56:15,750 - sqlalchemy.engine.Engine - INFO - [cached since 0.02321s ago] ('31293182321',)
2025-03-07 17:56:15,752 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 17:56:15,752 - sqlalchemy.engine.Engine - INFO - [cached since 0.02301s ago] ('31293182321', 0, '2025-03-07 14:56:15.752134', None, None)
2025-03-07 17:56:15,754 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:56:15,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,759 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 17:56:15,759 - sqlalchemy.engine.Engine - INFO - [cached since 0.02351s ago] (8,)
2025-03-07 17:56:15,760 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 17:56:15,761 - sqlalchemy.engine.Engine - INFO - [cached since 0.0344s ago] ('31293182321',)
2025-03-07 17:56:15,762 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 17:56:15,763 - sqlalchemy.engine.Engine - INFO - [cached since 0.02261s ago] ('31293182321', '2025-03-07 14:56:15.762783')
2025-03-07 17:56:15,764 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:56:15,768 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:15,768 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 17:56:15,769 - sqlalchemy.engine.Engine - INFO - [cached since 0.02115s ago] (8,)
2025-03-07 17:56:16,006 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:56:16,007 - aiogram.event - INFO - Update id=117256119 is handled. Duration 906 ms by bot id=8126821875
2025-03-07 17:56:21,685 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:21,686 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:56:21,686 - sqlalchemy.engine.Engine - INFO - [cached since 88.83s ago] (8126821875,)
2025-03-07 17:56:21,812 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:56:21,812 - aiogram.event - INFO - Update id=117256120 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 17:56:23,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:56:23,643 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 17:56:23,644 - sqlalchemy.engine.Engine - INFO - [cached since 90.79s ago] (8126821875,)
2025-03-07 17:56:23,786 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 17:56:23,787 - aiogram.event - INFO - Update id=117256121 is handled. Duration 266 ms by bot id=8126821875
2025-03-07 17:59:59,707 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 17:59:59,708 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 17:59:59,708 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:59:59,711 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 17:59:59,711 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:59:59,713 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 17:59:59,713 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:59:59,714 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 17:59:59,715 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:59:59,716 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 17:59:59,716 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 17:59:59,718 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 17:59:59,718 - database.base - INFO - База данных успешно инициализирована
2025-03-07 17:59:59,719 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 17:59:59,975 - __main__ - INFO - Бот запущен
2025-03-07 17:59:59,975 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:00:00,210 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:00:00,456 - __main__ - INFO - Бот остановлен
2025-03-07 18:00:00,513 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-3' coro=<Dispatcher._polling() done, defined at C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py:324> exception=TelegramNetworkError('HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)')>
Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\sslproto.py", line 648, in _do_shutdown
    self._sslobj.unwrap()
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\ssl.py", line 921, in unwrap
    return self._sslobj.shutdown()
           ^^^^^^^^^^^^^^^^^^^^^^^
ssl.SSLError: [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 171, in make_request
    async with session.post(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client.py", line 1197, in __aenter__
    self._resp = await self._coro
                 ^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client.py", line 608, in _request
    await resp.start(conn)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client_reqrep.py", line 976, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\streams.py", line 640, in read
    await self._waiter
aiohttp.client_exceptions.ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 340, in _polling
    user: User = await bot.me()
                 ^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\bot.py", line 313, in me
    self._me = await self.get_me()
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\bot.py", line 1770, in get_me
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
2025-03-07 18:00:02,867 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:00:03,119 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:00:03,121 - __main__ - INFO - Бот остановлен
2025-03-07 18:00:08,464 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:08,465 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:00:08,465 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:00:08,466 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:00:08,467 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:00:08,468 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:00:08,469 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:00:08,470 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:00:08,470 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:00:08,471 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:00:08,472 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:00:08,473 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:00:08,474 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:00:08,474 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:00:08,760 - __main__ - INFO - Бот запущен
2025-03-07 18:00:08,761 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:00:09,031 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:00:10,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:10,926 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:00:10,926 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ()
2025-03-07 18:00:11,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:11,198 - aiogram.event - INFO - Update id=117256122 is handled. Duration 656 ms by bot id=8126821875
2025-03-07 18:00:14,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:14,014 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:00:14,014 - sqlalchemy.engine.Engine - INFO - [cached since 3.089s ago] ()
2025-03-07 18:00:14,141 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:14,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] (7442982117,)
2025-03-07 18:00:14,144 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:00:14,144 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] (1, 0)
2025-03-07 18:00:14,147 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:00:14,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (1, '2025-03-07 15:00:14.145969', 2, 7)
2025-03-07 18:00:14,152 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:00:14,156 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:14,157 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 18:00:14,157 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('2025-03-07 15:00:14.157608', 1, 7442982117)
2025-03-07 18:00:14,159 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:00:14,435 - utils.archive - INFO - Удалена папка сессии: session_0919001010
2025-03-07 18:00:14,437 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:14,439 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:14,439 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] (7442982117,)
2025-03-07 18:00:14,552 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:14,554 - aiogram.event - INFO - Update id=117256123 is handled. Duration 547 ms by bot id=8126821875
2025-03-07 18:00:29,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:29,168 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:29,168 - sqlalchemy.engine.Engine - INFO - [cached since 14.73s ago] (7442982117,)
2025-03-07 18:00:29,171 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:29,173 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 18:00:29,173 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2025-03-07 18:00:29,175 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:00:29,175 - sqlalchemy.engine.Engine - INFO - [cached since 18.25s ago] ()
2025-03-07 18:00:29,176 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:29,298 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:29,300 - aiogram.event - INFO - Update id=117256124 is handled. Duration 1406 ms by bot id=8126821875
2025-03-07 18:00:30,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:30,475 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:30,475 - sqlalchemy.engine.Engine - INFO - [cached since 16.04s ago] (8126821875,)
2025-03-07 18:00:30,477 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 18:00:30,478 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ()
2025-03-07 18:00:30,480 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:00:30,480 - sqlalchemy.engine.Engine - INFO - [cached since 19.55s ago] ()
2025-03-07 18:00:30,483 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:30,484 - aiogram.event - INFO - Update id=117256125 is not handled. Duration 93 ms by bot id=8126821875
2025-03-07 18:00:30,485 - aiogram.event - ERROR - Cause exception while process update id=117256125 by bot id=8126821875
AttributeError: 'NoneType' object has no attribute 'taken_logs_count'
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 165, in worker_button_handler
    await show_statistics(callback.message)
  File "C:\Users\semen\botikrost\handlers\worker.py", line 39, in show_statistics
    stats_message += f"- Взято сессий: {user.taken_logs_count}\n"
                                        ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'taken_logs_count'
2025-03-07 18:00:53,260 - aiogram.event - INFO - Update id=117256126 is handled. Duration 436 ms by bot id=8126821875
2025-03-07 18:00:54,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:54,792 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:54,793 - sqlalchemy.engine.Engine - INFO - [cached since 40.35s ago] (7442982117,)
2025-03-07 18:00:54,794 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:54,795 - sqlalchemy.engine.Engine - INFO - [cached since 40.36s ago] (7442982117,)
2025-03-07 18:00:54,798 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:00:54,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('2025-03-07 15:00:54.798066', 1, 1, '2025-03-07 15:00:54.796561', 7442982117)
2025-03-07 18:00:54,799 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:00:54,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:54,806 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:54,806 - sqlalchemy.engine.Engine - INFO - [cached since 40.37s ago] (7442982117,)
2025-03-07 18:00:54,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:54,940 - aiogram.event - INFO - Update id=117256127 is handled. Duration 156 ms by bot id=8126821875
2025-03-07 18:00:58,429 - aiogram.event - INFO - Update id=117256128 is handled. Duration 312 ms by bot id=8126821875
2025-03-07 18:00:59,048 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:59,048 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:59,048 - sqlalchemy.engine.Engine - INFO - [cached since 44.61s ago] (7442982117,)
2025-03-07 18:00:59,050 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:59,050 - sqlalchemy.engine.Engine - INFO - [cached since 44.61s ago] (7442982117,)
2025-03-07 18:00:59,052 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:00:59,052 - sqlalchemy.engine.Engine - INFO - [cached since 4.255s ago] ('2025-03-07 15:00:59.052366', 1, 2, '2025-03-07 15:00:59.051364', 7442982117)
2025-03-07 18:00:59,054 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:00:59,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:00:59,058 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:00:59,059 - sqlalchemy.engine.Engine - INFO - [cached since 44.62s ago] (7442982117,)
2025-03-07 18:00:59,205 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:00:59,206 - aiogram.event - INFO - Update id=117256129 is handled. Duration 170 ms by bot id=8126821875
2025-03-07 18:01:02,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:01:02,576 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:01:02,577 - sqlalchemy.engine.Engine - INFO - [cached since 48.44s ago] (8126821875,)
2025-03-07 18:01:02,579 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:01:02,579 - sqlalchemy.engine.Engine - INFO - [cached since 48.44s ago] (8126821875,)
2025-03-07 18:01:02,734 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:01:02,735 - aiogram.event - INFO - Update id=117256130 is handled. Duration 282 ms by bot id=8126821875
2025-03-07 18:01:58,386 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:01:58,638 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:01:58,639 - __main__ - INFO - Бот остановлен
2025-03-07 18:02:01,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:01,833 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:02:01,834 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:02:01,835 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:02:01,835 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:02:01,836 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:02:01,836 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:02:01,837 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:02:01,837 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:02:01,838 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:02:01,838 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:02:01,840 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:02:01,841 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:02:01,841 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:02:02,152 - __main__ - INFO - Бот запущен
2025-03-07 18:02:02,152 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:02:02,411 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:02:04,069 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:04,079 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:02:04,079 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] (7442982117,)
2025-03-07 18:02:04,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:04,086 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 18:02:04,086 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2025-03-07 18:02:04,088 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:02:04,089 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ()
2025-03-07 18:02:04,090 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:02:04,222 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:02:04,223 - aiogram.event - INFO - Update id=117256131 is handled. Duration 1608 ms by bot id=8126821875
2025-03-07 18:02:05,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:05,141 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:02:05,141 - sqlalchemy.engine.Engine - INFO - [cached since 1.063s ago] (8126821875,)
2025-03-07 18:02:05,143 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs 
WHERE logs.is_taken = 0
2025-03-07 18:02:05,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2025-03-07 18:02:05,146 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:02:05,146 - sqlalchemy.engine.Engine - INFO - [cached since 1.057s ago] ()
2025-03-07 18:02:05,301 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:02:05,302 - aiogram.event - INFO - Update id=117256132 is handled. Duration 281 ms by bot id=8126821875
2025-03-07 18:02:59,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:59,867 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:02:59,867 - sqlalchemy.engine.Engine - INFO - [cached since 55.79s ago] (1083294848,)
2025-03-07 18:02:59,875 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:02:59,876 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM logs
2025-03-07 18:02:59,877 - sqlalchemy.engine.Engine - INFO - [cached since 55.79s ago] ()
2025-03-07 18:02:59,879 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:02:59,880 - sqlalchemy.engine.Engine - INFO - [cached since 55.79s ago] ()
2025-03-07 18:02:59,881 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:03:00,051 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:03:00,052 - aiogram.event - INFO - Update id=117256133 is handled. Duration 1625 ms by bot id=8126821875
2025-03-07 18:07:49,146 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:07:49,399 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:07:49,400 - __main__ - INFO - Бот остановлен
2025-03-07 18:07:52,624 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:07:52,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:07:52,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:07:52,627 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:07:52,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:07:52,629 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:07:52,629 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:07:52,630 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:07:52,630 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:07:52,632 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:07:52,632 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:07:52,633 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:07:52,634 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:07:52,634 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:07:52,962 - __main__ - INFO - Бот запущен
2025-03-07 18:07:52,962 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:07:53,216 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:07:55,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:07:55,401 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:07:55,401 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (8126821875,)
2025-03-07 18:07:55,404 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:07:55,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.00362s ago] (8126821875,)
2025-03-07 18:07:55,407 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:07:55,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] (8126821875, 'testsirderobot', 'test_botik', None, 0, 1, '2025-03-07 15:07:55.407865', '2025-03-07 15:07:55.407865', 0, 0, 0, None)
2025-03-07 18:07:55,411 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:07:55,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:07:55,419 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 18:07:55,420 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] (6,)
2025-03-07 18:07:55,622 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:07:55,623 - aiogram.event - INFO - Update id=117256134 is handled. Duration 484 ms by bot id=8126821875
2025-03-07 18:08:00,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:00,333 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:08:00,334 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ()
2025-03-07 18:08:00,457 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:00,459 - aiogram.event - INFO - Update id=117256135 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 18:08:02,672 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:02,673 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:08:02,673 - sqlalchemy.engine.Engine - INFO - [cached since 2.34s ago] ()
2025-03-07 18:08:02,870 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:02,870 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (7442982117,)
2025-03-07 18:08:02,873 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:08:02,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (1, 0)
2025-03-07 18:08:02,876 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:08:02,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (1, '2025-03-07 15:08:02.875502', 2, 8)
2025-03-07 18:08:02,882 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:08:02,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:02,888 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=(users.taken_logs_count + ?) WHERE users.user_id = ?
2025-03-07 18:08:02,888 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('2025-03-07 15:08:02.888036', 1, 7442982117)
2025-03-07 18:08:02,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:08:03,616 - utils.archive - INFO - Удалена папка сессии: session_31293182321
2025-03-07 18:08:03,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:03,619 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:03,620 - sqlalchemy.engine.Engine - INFO - [cached since 8.218s ago] (7442982117,)
2025-03-07 18:08:03,890 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:03,890 - aiogram.event - INFO - Update id=117256136 is handled. Duration 1233 ms by bot id=8126821875
2025-03-07 18:08:09,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:09,819 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:09,820 - sqlalchemy.engine.Engine - INFO - [cached since 14.42s ago] (7442982117,)
2025-03-07 18:08:10,009 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:10,012 - aiogram.event - INFO - Update id=117256137 is handled. Duration 1467 ms by bot id=8126821875
2025-03-07 18:08:10,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:10,822 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:10,822 - sqlalchemy.engine.Engine - INFO - [cached since 15.42s ago] (8126821875,)
2025-03-07 18:08:10,945 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:10,946 - aiogram.event - INFO - Update id=117256138 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 18:08:33,087 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:33,088 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:33,088 - sqlalchemy.engine.Engine - INFO - [cached since 37.69s ago] (7442982117,)
2025-03-07 18:08:33,207 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:33,210 - aiogram.event - INFO - Update id=117256139 is handled. Duration 1625 ms by bot id=8126821875
2025-03-07 18:08:34,460 - aiogram.event - INFO - Update id=117256140 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:08:35,169 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:35,170 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:35,171 - sqlalchemy.engine.Engine - INFO - [cached since 39.77s ago] (7442982117,)
2025-03-07 18:08:35,172 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:35,172 - sqlalchemy.engine.Engine - INFO - [cached since 39.77s ago] (7442982117,)
2025-03-07 18:08:35,174 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:08:35,174 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('2025-03-07 15:08:35.174784', 1, 3, '2025-03-07 15:08:35.173785', 7442982117)
2025-03-07 18:08:35,177 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:08:35,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:35,184 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:35,184 - sqlalchemy.engine.Engine - INFO - [cached since 39.78s ago] (7442982117,)
2025-03-07 18:08:35,308 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:35,310 - aiogram.event - INFO - Update id=117256141 is handled. Duration 140 ms by bot id=8126821875
2025-03-07 18:08:36,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:08:36,850 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:08:36,850 - sqlalchemy.engine.Engine - INFO - [cached since 41.45s ago] (8126821875,)
2025-03-07 18:08:36,962 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:08:36,964 - aiogram.event - INFO - Update id=117256142 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 18:09:35,918 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:09:36,168 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:09:36,169 - __main__ - INFO - Бот остановлен
2025-03-07 18:12:55,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:12:55,044 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:12:55,044 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:12:55,045 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:12:55,046 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:12:55,047 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:12:55,047 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:12:55,048 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:12:55,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:12:55,049 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:12:55,049 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:12:55,051 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:12:55,052 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:12:55,052 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:12:55,288 - __main__ - INFO - Бот запущен
2025-03-07 18:12:55,288 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:12:55,540 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:13:04,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:04,785 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:04,786 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (8126821875,)
2025-03-07 18:13:04,922 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:04,923 - aiogram.event - INFO - Update id=117256143 is handled. Duration 469 ms by bot id=8126821875
2025-03-07 18:13:06,340 - aiogram.event - INFO - Update id=117256144 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:13:08,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:08,200 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:08,201 - sqlalchemy.engine.Engine - INFO - [cached since 3.415s ago] (7442982117,)
2025-03-07 18:13:08,202 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:08,202 - sqlalchemy.engine.Engine - INFO - [cached since 3.417s ago] (7442982117,)
2025-03-07 18:13:08,205 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=(users.empty_logs_count + ?), daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:13:08,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('2025-03-07 15:13:08.205525', 1, 4, '2025-03-07 15:13:08.204526', 7442982117)
2025-03-07 18:13:08,208 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:13:08,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:08,214 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:08,214 - sqlalchemy.engine.Engine - INFO - [cached since 3.429s ago] (7442982117,)
2025-03-07 18:13:08,321 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:08,322 - aiogram.event - INFO - Update id=117256145 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:13:12,460 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:12,461 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:12,461 - sqlalchemy.engine.Engine - INFO - [cached since 7.677s ago] (7442982117,)
2025-03-07 18:13:12,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:12,609 - aiogram.event - INFO - Update id=117256146 is handled. Duration 1358 ms by bot id=8126821875
2025-03-07 18:13:13,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:13,462 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:13,462 - sqlalchemy.engine.Engine - INFO - [cached since 8.677s ago] (8126821875,)
2025-03-07 18:13:13,571 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:13,572 - aiogram.event - INFO - Update id=117256147 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 18:13:16,552 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:16,553 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:16,554 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (8126821875,)
2025-03-07 18:13:16,556 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.user_id = ?
2025-03-07 18:13:16,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (6,)
2025-03-07 18:13:16,557 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:13:16,557 - sqlalchemy.engine.Engine - INFO - [cached since 0.004641s ago] (8126821875,)
2025-03-07 18:13:16,560 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.user_id = ?
2025-03-07 18:13:16,560 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (6,)
2025-03-07 18:13:16,692 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:16,693 - aiogram.event - INFO - Update id=117256148 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 18:13:17,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:13:17,654 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:13:17,654 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2025-03-07 18:13:17,841 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:13:17,842 - aiogram.event - INFO - Update id=117256149 is handled. Duration 342 ms by bot id=8126821875
2025-03-07 18:18:09,233 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:18:09,486 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:18:09,487 - __main__ - INFO - Бот остановлен
2025-03-07 18:18:14,065 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:14,066 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:18:14,066 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:18:14,068 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:18:14,068 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:18:14,069 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:18:14,070 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:18:14,071 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:18:14,072 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:18:14,073 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:18:14,073 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:18:14,075 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:14,076 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:18:14,076 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:18:14,402 - __main__ - INFO - Бот запущен
2025-03-07 18:18:14,402 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:18:14,656 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:18:53,233 - aiogram.event - INFO - Update id=117256150 is handled. Duration 391 ms by bot id=8126821875
2025-03-07 18:18:56,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,390 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:18:56,390 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('BQACAgIAAxkBAAIMXGfLDmBA1vnjYV64bnqOXRTaMY0hAAJTaAACR41ZSg1-PbWG48HuNgQ', 'tesb.rar', 171, 0, '2025-03-07 15:18:56.390668', None, None)
2025-03-07 18:18:56,393 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:56,398 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,399 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 18:18:56,400 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (7,)
2025-03-07 18:18:56,535 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:18:56,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('010100123',)
2025-03-07 18:18:56,538 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 18:18:56,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('010100123', 0, '2025-03-07 15:18:56.538249', None, None)
2025-03-07 18:18:56,540 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:56,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,546 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 18:18:56,546 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] (9,)
2025-03-07 18:18:56,548 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:18:56,548 - sqlalchemy.engine.Engine - INFO - [cached since 0.01335s ago] ('010100123',)
2025-03-07 18:18:56,550 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 18:18:56,550 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('010100123', '2025-03-07 15:18:56.550032')
2025-03-07 18:18:56,552 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:56,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,558 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 18:18:56,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (9,)
2025-03-07 18:18:56,560 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:18:56,560 - sqlalchemy.engine.Engine - INFO - [cached since 0.0251s ago] ('98988488',)
2025-03-07 18:18:56,561 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 18:18:56,561 - sqlalchemy.engine.Engine - INFO - [cached since 0.0235s ago] ('98988488', 0, '2025-03-07 15:18:56.561360', None, None)
2025-03-07 18:18:56,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:56,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,568 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 18:18:56,569 - sqlalchemy.engine.Engine - INFO - [cached since 0.02366s ago] (10,)
2025-03-07 18:18:56,570 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:18:56,570 - sqlalchemy.engine.Engine - INFO - [cached since 0.036s ago] ('98988488',)
2025-03-07 18:18:56,572 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 18:18:56,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.02261s ago] ('98988488', '2025-03-07 15:18:56.572455')
2025-03-07 18:18:56,575 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:18:56,578 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:18:56,579 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 18:18:56,579 - sqlalchemy.engine.Engine - INFO - [cached since 0.02144s ago] (10,)
2025-03-07 18:18:56,686 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:18:56,686 - aiogram.event - INFO - Update id=117256151 is handled. Duration 578 ms by bot id=8126821875
2025-03-07 18:19:06,014 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:06,015 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:19:06,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] (7442982117,)
2025-03-07 18:19:06,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:19:06,197 - aiogram.event - INFO - Update id=117256152 is handled. Duration 1516 ms by bot id=8126821875
2025-03-07 18:19:08,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:08,657 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:19:08,657 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ()
2025-03-07 18:19:08,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:19:08,806 - aiogram.event - INFO - Update id=117256153 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 18:19:10,908 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:10,908 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:19:10,909 - sqlalchemy.engine.Engine - INFO - [cached since 2.251s ago] ()
2025-03-07 18:19:11,030 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:19:11,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (7442982117,)
2025-03-07 18:19:11,032 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:19:11,032 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] (1, 0)
2025-03-07 18:19:11,035 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:19:11,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] (1, '2025-03-07 15:19:11.034025', 2, 9)
2025-03-07 18:19:11,039 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:19:11,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:11,043 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:19:11,044 - sqlalchemy.engine.Engine - INFO - [cached since 5.028s ago] (7442982117,)
2025-03-07 18:19:11,046 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=? WHERE users.user_id = ?
2025-03-07 18:19:11,046 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('2025-03-07 15:19:11.046087', 8, 7442982117)
2025-03-07 18:19:11,049 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:19:11,053 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:11,053 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:19:11,054 - sqlalchemy.engine.Engine - INFO - [cached since 5.039s ago] (7442982117,)
2025-03-07 18:19:11,287 - utils.archive - INFO - Удалена папка сессии: session_010100123
2025-03-07 18:19:11,392 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:19:11,393 - aiogram.event - INFO - Update id=117256154 is handled. Duration 500 ms by bot id=8126821875
2025-03-07 18:19:14,947 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:19:14,948 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:19:14,948 - sqlalchemy.engine.Engine - INFO - [cached since 8.933s ago] (8126821875,)
2025-03-07 18:19:15,057 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:19:15,058 - aiogram.event - INFO - Update id=117256155 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 18:20:03,931 - aiogram.event - INFO - Update id=117256156 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 18:20:05,147 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:20:05,148 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:05,149 - sqlalchemy.engine.Engine - INFO - [cached since 59.13s ago] (7442982117,)
2025-03-07 18:20:05,150 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:05,150 - sqlalchemy.engine.Engine - INFO - [cached since 59.14s ago] (7442982117,)
2025-03-07 18:20:05,152 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=?, daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:20:05,153 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('2025-03-07 15:20:05.152783', 18, 6, '2025-03-07 15:20:05.151782', 7442982117)
2025-03-07 18:20:05,156 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:20:05,161 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:20:05,162 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:05,162 - sqlalchemy.engine.Engine - INFO - [cached since 59.15s ago] (7442982117,)
2025-03-07 18:20:05,268 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:20:05,269 - aiogram.event - INFO - Update id=117256157 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:20:07,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:20:07,974 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:07,975 - sqlalchemy.engine.Engine - INFO - [cached since 61.96s ago] (8126821875,)
2025-03-07 18:20:08,187 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:20:08,188 - aiogram.event - INFO - Update id=117256158 is handled. Duration 406 ms by bot id=8126821875
2025-03-07 18:20:10,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:20:10,958 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:10,959 - sqlalchemy.engine.Engine - INFO - [cached since 64.94s ago] (7442982117,)
2025-03-07 18:20:11,098 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:20:11,099 - aiogram.event - INFO - Update id=117256159 is handled. Duration 1468 ms by bot id=8126821875
2025-03-07 18:20:11,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:20:11,997 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:20:11,997 - sqlalchemy.engine.Engine - INFO - [cached since 65.98s ago] (8126821875,)
2025-03-07 18:20:12,203 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:20:12,205 - aiogram.event - INFO - Update id=117256160 is handled. Duration 436 ms by bot id=8126821875
2025-03-07 18:24:03,797 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:24:04,049 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:24:04,050 - __main__ - INFO - Бот остановлен
2025-03-07 18:24:07,562 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:07,563 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:24:07,564 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:24:07,568 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:24:07,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:24:07,571 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:24:07,571 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:24:07,572 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:24:07,573 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:24:07,574 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:24:07,574 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:24:07,574 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:24:07,575 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:24:07,575 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:24:07,891 - __main__ - INFO - Бот запущен
2025-03-07 18:24:07,891 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:24:08,151 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:24:09,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:09,939 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:09,939 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] (8126821875,)
2025-03-07 18:24:10,101 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:24:10,102 - aiogram.event - INFO - Update id=117256161 is handled. Duration 452 ms by bot id=8126821875
2025-03-07 18:24:14,287 - aiogram.event - INFO - Update id=117256162 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 18:24:15,755 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:15,756 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:15,757 - sqlalchemy.engine.Engine - INFO - [cached since 5.818s ago] (7442982117,)
2025-03-07 18:24:15,761 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:15,761 - sqlalchemy.engine.Engine - INFO - [cached since 5.823s ago] (7442982117,)
2025-03-07 18:24:15,766 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=?, daily_empty_logs_count=?, last_empty_log_date=? WHERE users.user_id = ?
2025-03-07 18:24:15,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] ('2025-03-07 15:24:15.766933', 19, 7, '2025-03-07 15:24:15.763897', 7442982117)
2025-03-07 18:24:15,773 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:24:15,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:15,779 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:15,780 - sqlalchemy.engine.Engine - INFO - [cached since 5.84s ago] (7442982117,)
2025-03-07 18:24:15,883 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:24:15,886 - aiogram.event - INFO - Update id=117256163 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:24:17,171 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:17,172 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:17,172 - sqlalchemy.engine.Engine - INFO - [cached since 7.233s ago] (8126821875,)
2025-03-07 18:24:17,316 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:24:17,317 - aiogram.event - INFO - Update id=117256164 is handled. Duration 297 ms by bot id=8126821875
2025-03-07 18:24:20,100 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:20,100 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:20,100 - sqlalchemy.engine.Engine - INFO - [cached since 10.16s ago] (7442982117,)
2025-03-07 18:24:20,245 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:24:20,246 - aiogram.event - INFO - Update id=117256165 is handled. Duration 1468 ms by bot id=8126821875
2025-03-07 18:24:21,272 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:24:21,273 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:24:21,273 - sqlalchemy.engine.Engine - INFO - [cached since 11.33s ago] (8126821875,)
2025-03-07 18:24:21,389 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:24:21,390 - aiogram.event - INFO - Update id=117256166 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:27:06,006 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:27:06,258 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:27:06,259 - __main__ - INFO - Бот остановлен
2025-03-07 18:27:09,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:09,530 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:27:09,530 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:27:09,532 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:27:09,533 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:27:09,534 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:27:09,534 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:27:09,535 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:27:09,535 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:27:09,536 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:27:09,536 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:27:09,537 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:27:09,538 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:27:09,539 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:27:09,887 - __main__ - INFO - Бот запущен
2025-03-07 18:27:09,888 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:27:10,151 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:27:14,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:14,231 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:14,231 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] (7773781383,)
2025-03-07 18:27:14,449 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:14,449 - aiogram.event - INFO - Update id=117256167 is handled. Duration 1750 ms by bot id=8126821875
2025-03-07 18:27:15,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:15,874 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:15,874 - sqlalchemy.engine.Engine - INFO - [cached since 1.644s ago] (8126821875,)
2025-03-07 18:27:15,877 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 18:27:15,877 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('2025-03-07 15:27:15.877688', 5, 3, 8126821875)
2025-03-07 18:27:15,880 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:27:15,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:15,886 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:15,886 - sqlalchemy.engine.Engine - INFO - [cached since 1.655s ago] (8126821875,)
2025-03-07 18:27:15,994 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:15,994 - aiogram.event - INFO - Update id=117256168 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 18:27:23,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:23,722 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:23,722 - sqlalchemy.engine.Engine - INFO - [cached since 9.492s ago] (8126821875,)
2025-03-07 18:27:23,825 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:23,826 - aiogram.event - INFO - Update id=117256169 is handled. Duration 188 ms by bot id=8126821875
2025-03-07 18:27:28,220 - aiogram.event - INFO - Update id=117256170 is handled. Duration 327 ms by bot id=8126821875
2025-03-07 18:27:29,450 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:29,451 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:29,451 - sqlalchemy.engine.Engine - INFO - [cached since 15.22s ago] (7442982117,)
2025-03-07 18:27:29,453 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 18:27:29,453 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('2025-03-07 15:27:29.453921', 20, 7442982117)
2025-03-07 18:27:29,457 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:27:29,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:29,463 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:29,463 - sqlalchemy.engine.Engine - INFO - [cached since 15.23s ago] (7442982117,)
2025-03-07 18:27:29,576 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:29,576 - aiogram.event - INFO - Update id=117256171 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:27:32,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:32,289 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:32,290 - sqlalchemy.engine.Engine - INFO - [cached since 18.06s ago] (7442982117,)
2025-03-07 18:27:32,397 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:32,398 - aiogram.event - INFO - Update id=117256172 is handled. Duration 1313 ms by bot id=8126821875
2025-03-07 18:27:33,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:27:33,756 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:27:33,756 - sqlalchemy.engine.Engine - INFO - [cached since 19.53s ago] (8126821875,)
2025-03-07 18:27:33,879 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:27:33,880 - aiogram.event - INFO - Update id=117256173 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 18:33:03,062 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:33:03,313 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:33:03,314 - __main__ - INFO - Бот остановлен
2025-03-07 18:33:06,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:33:06,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:33:06,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:33:06,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:33:06,377 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:33:06,378 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:33:06,378 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:33:06,379 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:33:06,379 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:33:06,380 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:33:06,381 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:33:06,382 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:33:06,382 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:33:06,383 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:33:06,645 - __main__ - INFO - Бот запущен
2025-03-07 18:33:06,645 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:33:06,908 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:33:13,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:33:13,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:33:13,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] (1083294848,)
2025-03-07 18:33:13,756 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:33:13,758 - aiogram.event - INFO - Update id=117256174 is handled. Duration 1922 ms by bot id=8126821875
2025-03-07 18:33:19,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:33:19,955 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:33:19,955 - sqlalchemy.engine.Engine - INFO - [cached since 6.714s ago] (8126821875,)
2025-03-07 18:33:20,088 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:33:20,091 - aiogram.event - INFO - Update id=117256175 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 18:33:23,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:33:23,068 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:33:23,068 - sqlalchemy.engine.Engine - INFO - [cached since 9.827s ago] (7442982117,)
2025-03-07 18:33:23,174 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:33:23,175 - aiogram.event - INFO - Update id=117256176 is handled. Duration 1328 ms by bot id=8126821875
2025-03-07 18:33:24,506 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:33:24,507 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:33:24,507 - sqlalchemy.engine.Engine - INFO - [cached since 11.27s ago] (8126821875,)
2025-03-07 18:33:24,643 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:33:24,643 - aiogram.event - INFO - Update id=117256177 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 18:34:15,022 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:15,026 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:34:15,026 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2025-03-07 18:34:15,186 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:34:15,187 - aiogram.event - INFO - Update id=117256178 is handled. Duration 469 ms by bot id=8126821875
2025-03-07 18:34:16,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:16,293 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:34:16,293 - sqlalchemy.engine.Engine - INFO - [cached since 1.267s ago] ()
2025-03-07 18:34:16,489 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:34:16,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (7442982117,)
2025-03-07 18:34:16,491 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:34:16,491 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] (1, 0)
2025-03-07 18:34:16,494 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:34:16,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (1, '2025-03-07 15:34:16.493506', 2, 10)
2025-03-07 18:34:16,498 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:34:16,503 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:16,503 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:34:16,503 - sqlalchemy.engine.Engine - INFO - [cached since 63.26s ago] (7442982117,)
2025-03-07 18:34:16,504 - handlers.worker - INFO - До обновления: user.taken_logs_count = 8
2025-03-07 18:34:16,504 - handlers.worker - INFO - Новое значение счетчика: new_taken_count = 9
2025-03-07 18:34:16,504 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'taken_logs_count': 9}
2025-03-07 18:34:16,505 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=? WHERE users.user_id = ?
2025-03-07 18:34:16,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('2025-03-07 15:34:16.505756', 9, 7442982117)
2025-03-07 18:34:16,507 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:34:16,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:16,513 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:34:16,514 - sqlalchemy.engine.Engine - INFO - [cached since 63.27s ago] (7442982117,)
2025-03-07 18:34:16,515 - database.repositories - INFO - Пользователь после обновления: 9, 20
2025-03-07 18:34:16,515 - handlers.worker - INFO - После обновления: updated_user.taken_logs_count = 9
2025-03-07 18:34:17,319 - utils.archive - INFO - Удалена папка сессии: session_98988488
2025-03-07 18:34:17,507 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:34:17,508 - aiogram.event - INFO - Update id=117256179 is handled. Duration 1217 ms by bot id=8126821875
2025-03-07 18:34:20,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:20,935 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:34:20,936 - sqlalchemy.engine.Engine - INFO - [cached since 67.69s ago] (7442982117,)
2025-03-07 18:34:21,052 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:34:21,053 - aiogram.event - INFO - Update id=117256180 is handled. Duration 1328 ms by bot id=8126821875
2025-03-07 18:34:21,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:34:21,835 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:34:21,835 - sqlalchemy.engine.Engine - INFO - [cached since 68.59s ago] (8126821875,)
2025-03-07 18:34:21,948 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:34:21,950 - aiogram.event - INFO - Update id=117256181 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 18:37:20,657 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:37:20,909 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:37:20,910 - __main__ - INFO - Бот остановлен
2025-03-07 18:37:35,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:35,550 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:37:35,550 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,551 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-07 18:37:35,551 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,552 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:37:35,552 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,553 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("passwords")
2025-03-07 18:37:35,554 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,554 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:37:35,554 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,555 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("logs")
2025-03-07 18:37:35,555 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,556 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:37:35,556 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,558 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sessions")
2025-03-07 18:37:35,558 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,559 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:37:35,559 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,560 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("used_phone_numbers")
2025-03-07 18:37:35,561 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:35,562 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	user_id BIGINT NOT NULL, 
	username VARCHAR(255), 
	first_name VARCHAR(255), 
	last_name VARCHAR(255), 
	is_admin BOOLEAN, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	taken_logs_count INTEGER, 
	empty_logs_count INTEGER, 
	daily_empty_logs_count INTEGER, 
	last_empty_log_date DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id)
)


2025-03-07 18:37:35,565 - sqlalchemy.engine.Engine - INFO - [no key 0.00234s] ()
2025-03-07 18:37:35,570 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE passwords (
	id INTEGER NOT NULL, 
	password VARCHAR(255) NOT NULL, 
	max_uses INTEGER, 
	used_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	created_by BIGINT, 
	PRIMARY KEY (id)
)


2025-03-07 18:37:35,570 - sqlalchemy.engine.Engine - INFO - [no key 0.00056s] ()
2025-03-07 18:37:35,574 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE used_phone_numbers (
	id INTEGER NOT NULL, 
	phone_number VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (phone_number)
)


2025-03-07 18:37:35,575 - sqlalchemy.engine.Engine - INFO - [no key 0.00040s] ()
2025-03-07 18:37:35,580 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE logs (
	id INTEGER NOT NULL, 
	file_id VARCHAR(255) NOT NULL, 
	file_name VARCHAR(255) NOT NULL, 
	file_size INTEGER, 
	is_taken BOOLEAN, 
	uploaded_at DATETIME, 
	taken_at DATETIME, 
	user_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-07 18:37:35,580 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2025-03-07 18:37:35,584 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sessions (
	id INTEGER NOT NULL, 
	phone_number VARCHAR(255) NOT NULL, 
	is_taken BOOLEAN, 
	created_at DATETIME, 
	taken_at DATETIME, 
	user_id INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (phone_number), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-07 18:37:35,584 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-07 18:37:35,589 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:37:35,590 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:37:35,590 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:37:35,834 - __main__ - INFO - Бот запущен
2025-03-07 18:37:35,834 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:37:36,114 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:37:40,283 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 18:37:40,283 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 18:37:45,979 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 18:37:45,979 - aiogram.dispatcher - WARNING - Sleep for 1.379366 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 18:37:50,178 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:37:50,430 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:37:50,432 - __main__ - INFO - Бот остановлен
2025-03-07 18:37:54,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:54,347 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:37:54,348 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:54,349 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:37:54,349 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:54,350 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:37:54,350 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:54,351 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:37:54,351 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:54,352 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:37:54,352 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:37:54,353 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:37:54,354 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:37:54,354 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:37:54,601 - __main__ - INFO - Бот запущен
2025-03-07 18:37:54,602 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:37:54,883 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:37:56,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:56,352 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:37:56,353 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] (7442982117,)
2025-03-07 18:37:56,356 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:37:56,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (7442982117, 'the_trueon', 'l', None, 0, 1, '2025-03-07 15:37:56.356095', '2025-03-07 15:37:56.356095', 0, 0, 0, None)
2025-03-07 18:37:56,359 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:37:56,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:56,367 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 18:37:56,367 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] (1,)
2025-03-07 18:37:56,487 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:37:56,488 - aiogram.event - INFO - Update id=117256182 is handled. Duration 1516 ms by bot id=8126821875
2025-03-07 18:37:58,703 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:58,704 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:37:58,704 - sqlalchemy.engine.Engine - INFO - [cached since 2.352s ago] (8126821875,)
2025-03-07 18:37:58,706 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:37:58,706 - sqlalchemy.engine.Engine - INFO - [cached since 2.354s ago] (8126821875,)
2025-03-07 18:37:58,708 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:37:58,709 - sqlalchemy.engine.Engine - INFO - [cached since 2.353s ago] (8126821875, 'testsirderobot', 'test_botik', None, 0, 1, '2025-03-07 15:37:58.708068', '2025-03-07 15:37:58.708068', 0, 0, 0, None)
2025-03-07 18:37:58,712 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:37:58,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:37:58,716 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 18:37:58,716 - sqlalchemy.engine.Engine - INFO - [cached since 2.35s ago] (2,)
2025-03-07 18:37:58,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:37:58,850 - aiogram.event - INFO - Update id=117256183 is handled. Duration 266 ms by bot id=8126821875
2025-03-07 18:38:18,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:18,185 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 18:38:18,186 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2025-03-07 18:38:18,189 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 18:38:18,190 - keyboards - INFO - Создаем кнопку для пользователя 8126821875 с callback_data: user_8126821875
2025-03-07 18:38:18,344 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:38:18,344 - aiogram.event - INFO - Update id=117256184 is handled. Duration 562 ms by bot id=8126821875
2025-03-07 18:38:25,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:25,468 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:38:25,468 - sqlalchemy.engine.Engine - INFO - [cached since 29.12s ago] (7442982117,)
2025-03-07 18:38:25,470 - keyboards - INFO - Создаем кнопку удаления для пользователя 7442982117 с callback_data: delete_user_7442982117
2025-03-07 18:38:25,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:38:25,674 - aiogram.event - INFO - Update id=117256185 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 18:38:26,623 - handlers.admin - INFO - delete_user callback_data: delete_user_7442982117
2025-03-07 18:38:26,892 - aiogram.event - INFO - Update id=117256186 is handled. Duration 281 ms by bot id=8126821875
2025-03-07 18:38:27,771 - aiogram.event - INFO - Update id=117256187 is not handled. Duration 0 ms by bot id=8126821875
2025-03-07 18:38:34,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:34,130 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:38:34,131 - sqlalchemy.engine.Engine - INFO - [cached since 37.78s ago] (1083294848,)
2025-03-07 18:38:34,133 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:38:34,133 - sqlalchemy.engine.Engine - INFO - [cached since 37.78s ago] (1083294848, 'sirdebar', 'doraemon', None, 0, 1, '2025-03-07 15:38:34.133033', '2025-03-07 15:38:34.133033', 0, 0, 0, None)
2025-03-07 18:38:34,136 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:38:34,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:34,145 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 18:38:34,145 - sqlalchemy.engine.Engine - INFO - [cached since 37.78s ago] (3,)
2025-03-07 18:38:34,272 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:38:34,273 - aiogram.event - INFO - Update id=117256188 is handled. Duration 1359 ms by bot id=8126821875
2025-03-07 18:38:43,541 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:38:43,797 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:38:43,798 - __main__ - INFO - Бот остановлен
2025-03-07 18:38:47,084 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:47,085 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:38:47,085 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:38:47,086 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:38:47,087 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:38:47,087 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:38:47,088 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:38:47,089 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:38:47,089 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:38:47,090 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:38:47,090 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:38:47,091 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:38:47,092 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:38:47,092 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:38:47,356 - __main__ - INFO - Бот запущен
2025-03-07 18:38:47,356 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:38:47,636 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:38:49,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:38:49,587 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:38:49,587 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] (1083294848,)
2025-03-07 18:38:49,732 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:38:49,733 - aiogram.event - INFO - Update id=117256189 is handled. Duration 1594 ms by bot id=8126821875
2025-03-07 18:44:55,499 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:44:55,750 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:44:55,751 - __main__ - INFO - Бот остановлен
2025-03-07 18:45:02,663 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:45:02,664 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:45:02,664 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:02,666 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:45:02,666 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:02,667 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:45:02,668 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:02,669 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:45:02,669 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:02,670 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:45:02,671 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:02,672 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:45:02,673 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:45:02,674 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:45:02,929 - __main__ - INFO - Бот запущен
2025-03-07 18:45:02,929 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:45:03,179 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:45:07,327 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 18:45:07,327 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 18:45:12,857 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 18:45:12,857 - aiogram.dispatcher - WARNING - Sleep for 1.225332 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 18:45:13,619 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:45:13,869 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:45:13,870 - __main__ - INFO - Бот остановлен
2025-03-07 18:45:17,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:45:17,197 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:45:17,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:17,199 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:45:17,199 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:17,200 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:45:17,200 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:17,201 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:45:17,201 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:17,203 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:45:17,203 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:45:17,206 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:45:17,207 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:45:17,207 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:45:17,450 - __main__ - INFO - Бот запущен
2025-03-07 18:45:17,451 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:45:17,717 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:45:19,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:45:19,343 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:45:19,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (1083294848,)
2025-03-07 18:45:19,488 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:45:19,490 - aiogram.event - INFO - Update id=117256190 is handled. Duration 1672 ms by bot id=8126821875
2025-03-07 18:45:29,952 - aiogram.event - INFO - Update id=117256191 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 18:46:38,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,410 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 18:46:38,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('BQACAgIAAxkBAAIMpmfLFN4MauYAAeubHY67zEOyzwf3rgAC12gAAkeNWUqBHOz7Zb-fkDYE', 'tesb.rar', 234, 0, '2025-03-07 15:46:38.410890', None, None)
2025-03-07 18:46:38,412 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,423 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 18:46:38,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1,)
2025-03-07 18:46:38,544 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('123123123131231311',)
2025-03-07 18:46:38,546 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 18:46:38,547 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('123123123131231311', 0, '2025-03-07 15:46:38.546231', None, None)
2025-03-07 18:46:38,549 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,555 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 18:46:38,555 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] (1,)
2025-03-07 18:46:38,557 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,557 - sqlalchemy.engine.Engine - INFO - [cached since 0.01396s ago] ('123123123131231311',)
2025-03-07 18:46:38,560 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 18:46:38,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('123123123131231311', '2025-03-07 15:46:38.560238')
2025-03-07 18:46:38,563 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,566 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 18:46:38,567 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] (1,)
2025-03-07 18:46:38,570 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,570 - sqlalchemy.engine.Engine - INFO - [cached since 0.02537s ago] ('2312321312111',)
2025-03-07 18:46:38,571 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 18:46:38,571 - sqlalchemy.engine.Engine - INFO - [cached since 0.02484s ago] ('2312321312111', 0, '2025-03-07 15:46:38.571234', None, None)
2025-03-07 18:46:38,573 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,576 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 18:46:38,577 - sqlalchemy.engine.Engine - INFO - [cached since 0.0218s ago] (2,)
2025-03-07 18:46:38,579 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,580 - sqlalchemy.engine.Engine - INFO - [cached since 0.03523s ago] ('2312321312111',)
2025-03-07 18:46:38,581 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 18:46:38,581 - sqlalchemy.engine.Engine - INFO - [cached since 0.02123s ago] ('2312321312111', '2025-03-07 15:46:38.581264')
2025-03-07 18:46:38,583 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,589 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,589 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 18:46:38,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.02312s ago] (2,)
2025-03-07 18:46:38,591 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.04731s ago] ('3121',)
2025-03-07 18:46:38,592 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 18:46:38,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.04659s ago] ('3121', 0, '2025-03-07 15:46:38.592886', None, None)
2025-03-07 18:46:38,595 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,599 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,600 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 18:46:38,600 - sqlalchemy.engine.Engine - INFO - [cached since 0.04503s ago] (3,)
2025-03-07 18:46:38,602 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 18:46:38,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.05799s ago] ('3121',)
2025-03-07 18:46:38,603 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 18:46:38,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.04346s ago] ('3121', '2025-03-07 15:46:38.603508')
2025-03-07 18:46:38,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:38,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:38,610 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 18:46:38,610 - sqlalchemy.engine.Engine - INFO - [cached since 0.04409s ago] (3,)
2025-03-07 18:46:38,713 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:46:38,714 - aiogram.event - INFO - Update id=117256192 is handled. Duration 765 ms by bot id=8126821875
2025-03-07 18:46:46,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:46,753 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:46:46,753 - sqlalchemy.engine.Engine - INFO - [cached since 87.41s ago] (7442982117,)
2025-03-07 18:46:46,865 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:46:46,866 - aiogram.event - INFO - Update id=117256193 is handled. Duration 1343 ms by bot id=8126821875
2025-03-07 18:46:52,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:52,706 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:46:52,706 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2025-03-07 18:46:52,915 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:46:52,916 - aiogram.event - INFO - Update id=117256194 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 18:46:54,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:54,006 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:46:54,006 - sqlalchemy.engine.Engine - INFO - [cached since 1.299s ago] ()
2025-03-07 18:46:54,165 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:46:54,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00173s] (7442982117,)
2025-03-07 18:46:54,170 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:46:54,171 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (1, 0)
2025-03-07 18:46:54,174 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:46:54,175 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1, '2025-03-07 15:46:54.172793', 1, 1)
2025-03-07 18:46:54,176 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:54,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:54,182 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:46:54,182 - sqlalchemy.engine.Engine - INFO - [cached since 94.84s ago] (7442982117,)
2025-03-07 18:46:54,184 - handlers.worker - INFO - До обновления: user.taken_logs_count = 0
2025-03-07 18:46:54,184 - handlers.worker - INFO - Новое значение счетчика: new_taken_count = 1
2025-03-07 18:46:54,184 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'taken_logs_count': 1}
2025-03-07 18:46:54,185 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=? WHERE users.user_id = ?
2025-03-07 18:46:54,185 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('2025-03-07 15:46:54.185811', 1, 7442982117)
2025-03-07 18:46:54,187 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:46:54,191 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:54,192 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:46:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 94.85s ago] (7442982117,)
2025-03-07 18:46:54,193 - database.repositories - INFO - Пользователь после обновления: 1, 0
2025-03-07 18:46:54,193 - handlers.worker - INFO - После обновления: updated_user.taken_logs_count = 1
2025-03-07 18:46:54,492 - utils.archive - INFO - Удалена папка сессии: session_123123123131231311
2025-03-07 18:46:54,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:46:54,613 - aiogram.event - INFO - Update id=117256195 is handled. Duration 609 ms by bot id=8126821875
2025-03-07 18:46:59,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:46:59,710 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:46:59,710 - sqlalchemy.engine.Engine - INFO - [cached since 100.4s ago] (7442982117,)
2025-03-07 18:46:59,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:46:59,944 - aiogram.event - INFO - Update id=117256196 is handled. Duration 1687 ms by bot id=8126821875
2025-03-07 18:47:01,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:01,105 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:01,105 - sqlalchemy.engine.Engine - INFO - [cached since 101.8s ago] (8126821875,)
2025-03-07 18:47:01,220 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:01,221 - aiogram.event - INFO - Update id=117256197 is handled. Duration 234 ms by bot id=8126821875
2025-03-07 18:47:05,635 - aiogram.event - INFO - Update id=117256198 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 18:47:06,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:06,829 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:06,830 - sqlalchemy.engine.Engine - INFO - [cached since 107.5s ago] (7442982117,)
2025-03-07 18:47:06,831 - handlers.worker - INFO - До обновления: user.empty_logs_count = 0
2025-03-07 18:47:06,831 - handlers.worker - INFO - Новое значение счетчика: new_empty_count = 1
2025-03-07 18:47:06,831 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'empty_logs_count': 1}
2025-03-07 18:47:06,832 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 18:47:06,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('2025-03-07 15:47:06.832977', 1, 7442982117)
2025-03-07 18:47:06,836 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:47:06,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:06,843 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:06,843 - sqlalchemy.engine.Engine - INFO - [cached since 107.5s ago] (7442982117,)
2025-03-07 18:47:06,845 - database.repositories - INFO - Пользователь после обновления: 1, 1
2025-03-07 18:47:06,845 - handlers.worker - INFO - После обновления: updated_user.empty_logs_count = 1
2025-03-07 18:47:06,953 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:06,954 - aiogram.event - INFO - Update id=117256199 is handled. Duration 140 ms by bot id=8126821875
2025-03-07 18:47:10,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:10,358 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:10,358 - sqlalchemy.engine.Engine - INFO - [cached since 111s ago] (7442982117,)
2025-03-07 18:47:10,530 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:10,531 - aiogram.event - INFO - Update id=117256200 is handled. Duration 1453 ms by bot id=8126821875
2025-03-07 18:47:11,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:11,540 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:11,540 - sqlalchemy.engine.Engine - INFO - [cached since 112.2s ago] (8126821875,)
2025-03-07 18:47:11,737 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:11,739 - aiogram.event - INFO - Update id=117256201 is handled. Duration 390 ms by bot id=8126821875
2025-03-07 18:47:18,639 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:18,640 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:18,640 - sqlalchemy.engine.Engine - INFO - [cached since 119.3s ago] (1083294848,)
2025-03-07 18:47:18,756 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:18,757 - aiogram.event - INFO - Update id=117256202 is handled. Duration 1327 ms by bot id=8126821875
2025-03-07 18:47:21,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:21,225 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 18:47:21,226 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2025-03-07 18:47:21,228 - keyboards - INFO - Создаем кнопку для пользователя 7442982117 с callback_data: user_7442982117
2025-03-07 18:47:21,229 - keyboards - INFO - Создаем кнопку для пользователя 8126821875 с callback_data: user_8126821875
2025-03-07 18:47:21,229 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 18:47:21,340 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:21,342 - aiogram.event - INFO - Update id=117256203 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:47:23,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:23,402 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:23,402 - sqlalchemy.engine.Engine - INFO - [cached since 124.1s ago] (7442982117,)
2025-03-07 18:47:23,403 - keyboards - INFO - Создаем кнопку удаления для пользователя 7442982117 с callback_data: delete_user_7442982117
2025-03-07 18:47:23,542 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:23,674 - aiogram.event - INFO - Update id=117256204 is handled. Duration 280 ms by bot id=8126821875
2025-03-07 18:47:24,527 - handlers.admin - INFO - delete_user callback_data: delete_user_7442982117
2025-03-07 18:47:24,742 - aiogram.event - INFO - Update id=117256205 is handled. Duration 218 ms by bot id=8126821875
2025-03-07 18:47:25,522 - handlers.admin - INFO - confirm_delete_user callback_data: confirm_user_7442982117
2025-03-07 18:47:25,522 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'is_active': False}
2025-03-07 18:47:25,524 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:25,524 - sqlalchemy.engine.Engine - INFO - UPDATE users SET is_active=?, updated_at=? WHERE users.user_id = ?
2025-03-07 18:47:25,524 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (0, '2025-03-07 15:47:25.524327', 7442982117)
2025-03-07 18:47:25,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:47:25,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:25,531 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:25,532 - sqlalchemy.engine.Engine - INFO - [cached since 126.2s ago] (7442982117,)
2025-03-07 18:47:25,533 - database.repositories - INFO - Пользователь после обновления: 1, 1
2025-03-07 18:47:25,660 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.is_active = 1
2025-03-07 18:47:25,660 - sqlalchemy.engine.Engine - INFO - [cached since 4.435s ago] ()
2025-03-07 18:47:25,661 - keyboards - INFO - Создаем кнопку для пользователя 8126821875 с callback_data: user_8126821875
2025-03-07 18:47:25,661 - keyboards - INFO - Создаем кнопку для пользователя 1083294848 с callback_data: user_1083294848
2025-03-07 18:47:25,785 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:25,880 - aiogram.event - INFO - Update id=117256206 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 18:47:36,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:36,131 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:36,132 - sqlalchemy.engine.Engine - INFO - [cached since 136.8s ago] (7442982117,)
2025-03-07 18:47:36,299 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:36,301 - aiogram.event - INFO - Update id=117256207 is handled. Duration 1405 ms by bot id=8126821875
2025-03-07 18:47:43,680 - aiogram.event - INFO - Update id=117256208 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 18:47:46,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:46,098 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 18:47:46,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2025-03-07 18:47:46,213 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:46,214 - aiogram.event - INFO - Update id=117256209 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:47:47,376 - aiogram.event - INFO - Update id=117256210 is handled. Duration 265 ms by bot id=8126821875
2025-03-07 18:47:49,104 - aiogram.event - INFO - Update id=117256211 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:47:49,693 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:49,694 - sqlalchemy.engine.Engine - INFO - INSERT INTO passwords (password, max_uses, used_count, is_active, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?)
2025-03-07 18:47:49,694 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('123', 1, 0, 1, '2025-03-07 15:47:49.694877', 1083294848)
2025-03-07 18:47:49,699 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:47:49,703 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:49,703 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.id = ?
2025-03-07 18:47:49,704 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] (1,)
2025-03-07 18:47:49,704 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:49,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:49,887 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.is_active = 1
2025-03-07 18:47:49,889 - sqlalchemy.engine.Engine - INFO - [cached since 3.791s ago] ()
2025-03-07 18:47:50,103 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:50,104 - aiogram.event - INFO - Update id=117256212 is handled. Duration 406 ms by bot id=8126821875
2025-03-07 18:47:55,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:55,221 - sqlalchemy.engine.Engine - INFO - SELECT passwords.id, passwords.password, passwords.max_uses, passwords.used_count, passwords.is_active, passwords.created_at, passwords.created_by 
FROM passwords 
WHERE passwords.password = ? AND passwords.is_active = 1
2025-03-07 18:47:55,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('123',)
2025-03-07 18:47:55,223 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET used_count=(passwords.used_count + ?) WHERE passwords.id = ?
2025-03-07 18:47:55,223 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (1, 1)
2025-03-07 18:47:55,227 - sqlalchemy.engine.Engine - INFO - UPDATE passwords SET is_active=? WHERE passwords.id = ?
2025-03-07 18:47:55,227 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (0, 1)
2025-03-07 18:47:55,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:47:55,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:55,235 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:55,236 - sqlalchemy.engine.Engine - INFO - [cached since 155.9s ago] (7442982117,)
2025-03-07 18:47:55,237 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'is_active': True}
2025-03-07 18:47:55,237 - sqlalchemy.engine.Engine - INFO - UPDATE users SET is_active=?, updated_at=? WHERE users.user_id = ?
2025-03-07 18:47:55,238 - sqlalchemy.engine.Engine - INFO - [cached since 29.71s ago] (1, '2025-03-07 15:47:55.237645', 7442982117)
2025-03-07 18:47:55,239 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:47:55,243 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:47:55,244 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:47:55,244 - sqlalchemy.engine.Engine - INFO - [cached since 155.9s ago] (7442982117,)
2025-03-07 18:47:55,244 - database.repositories - INFO - Пользователь после обновления: 1, 1
2025-03-07 18:47:55,380 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:47:55,381 - aiogram.event - INFO - Update id=117256213 is handled. Duration 155 ms by bot id=8126821875
2025-03-07 18:53:40,066 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:53:40,317 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:53:40,319 - __main__ - INFO - Бот остановлен
2025-03-07 18:53:43,326 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:43,326 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:53:43,326 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:53:43,328 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:53:43,328 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:53:43,331 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:53:43,331 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:53:43,332 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:53:43,332 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:53:43,333 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:53:43,334 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:53:43,336 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:53:43,336 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:53:43,336 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:53:43,602 - __main__ - INFO - Бот запущен
2025-03-07 18:53:43,602 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:53:43,867 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:53:45,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:45,892 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:53:45,893 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (8126821875,)
2025-03-07 18:53:46,011 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:53:46,013 - aiogram.event - INFO - Update id=117256214 is handled. Duration 405 ms by bot id=8126821875
2025-03-07 18:53:47,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:47,177 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:53:47,177 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ()
2025-03-07 18:53:47,294 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:53:47,296 - aiogram.event - INFO - Update id=117256215 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 18:53:49,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:49,761 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 18:53:49,761 - sqlalchemy.engine.Engine - INFO - [cached since 2.586s ago] ()
2025-03-07 18:53:49,900 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:53:49,901 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] (7442982117,)
2025-03-07 18:53:49,904 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 18:53:49,906 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] (1, 0)
2025-03-07 18:53:49,910 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 18:53:49,911 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1, '2025-03-07 15:53:49.909715', 1, 2)
2025-03-07 18:53:49,915 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:53:49,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:49,921 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:53:49,921 - sqlalchemy.engine.Engine - INFO - [cached since 4.028s ago] (7442982117,)
2025-03-07 18:53:49,922 - handlers.worker - INFO - До обновления: user.taken_logs_count = 0
2025-03-07 18:53:49,922 - handlers.worker - INFO - Новое значение счетчика: new_taken_count = 1
2025-03-07 18:53:49,922 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'taken_logs_count': 1}
2025-03-07 18:53:49,923 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=? WHERE users.user_id = ?
2025-03-07 18:53:49,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('2025-03-07 15:53:49.923077', 1, 7442982117)
2025-03-07 18:53:49,925 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:53:49,930 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:49,930 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:53:49,930 - sqlalchemy.engine.Engine - INFO - [cached since 4.038s ago] (7442982117,)
2025-03-07 18:53:49,931 - database.repositories - INFO - Пользователь после обновления: 1, 0
2025-03-07 18:53:49,932 - handlers.worker - INFO - После обновления: updated_user.taken_logs_count = 1
2025-03-07 18:53:50,273 - utils.archive - INFO - Удалена папка сессии: session_2312321312111
2025-03-07 18:53:50,390 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:53:50,391 - aiogram.event - INFO - Update id=117256216 is handled. Duration 641 ms by bot id=8126821875
2025-03-07 18:53:55,179 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:53:55,180 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:53:55,180 - sqlalchemy.engine.Engine - INFO - [cached since 9.287s ago] (7442982117,)
2025-03-07 18:53:55,301 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:53:55,302 - aiogram.event - INFO - Update id=117256217 is handled. Duration 1359 ms by bot id=8126821875
2025-03-07 18:54:00,611 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:54:00,612 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:54:00,612 - sqlalchemy.engine.Engine - INFO - [cached since 14.72s ago] (8126821875,)
2025-03-07 18:54:00,796 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:54:00,798 - aiogram.event - INFO - Update id=117256218 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 18:57:53,750 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:57:54,000 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:57:54,001 - __main__ - INFO - Бот остановлен
2025-03-07 18:57:59,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:57:59,049 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:57:59,050 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:57:59,051 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:57:59,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:57:59,051 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:57:59,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:57:59,052 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:57:59,052 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:57:59,052 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:57:59,053 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:57:59,054 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:57:59,055 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:57:59,055 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:57:59,310 - __main__ - INFO - Бот запущен
2025-03-07 18:57:59,310 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:57:59,571 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:58:03,720 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 18:58:03,720 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 18:58:07,137 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 18:58:07,389 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 18:58:07,390 - __main__ - INFO - Бот остановлен
2025-03-07 18:58:12,174 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:58:12,175 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 18:58:12,175 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:58:12,177 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 18:58:12,177 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:58:12,178 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 18:58:12,178 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:58:12,179 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 18:58:12,180 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:58:12,181 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 18:58:12,181 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 18:58:12,182 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:58:12,183 - database.base - INFO - База данных успешно инициализирована
2025-03-07 18:58:12,184 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 18:58:12,422 - __main__ - INFO - Бот запущен
2025-03-07 18:58:12,423 - aiogram.dispatcher - INFO - Start polling
2025-03-07 18:58:12,679 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 18:58:16,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:58:16,932 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:58:16,933 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (8126821875,)
2025-03-07 18:58:16,935 - handlers.worker - INFO - show_statistics: user_id=8126821875, user=<User(id=2, user_id=8126821875, username=testsirderobot)>
2025-03-07 18:58:16,935 - handlers.worker - INFO - show_statistics: taken_logs_count=0, empty_logs_count=0
2025-03-07 18:58:16,935 - handlers.worker - INFO - show_statistics: final taken_logs_count=0, empty_logs_count=0
2025-03-07 18:58:17,054 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:58:17,056 - aiogram.event - INFO - Update id=117256219 is handled. Duration 390 ms by bot id=8126821875
2025-03-07 18:58:18,474 - aiogram.event - INFO - Update id=117256220 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 18:58:20,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:58:20,602 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:58:20,603 - sqlalchemy.engine.Engine - INFO - [cached since 3.671s ago] (7442982117,)
2025-03-07 18:58:20,604 - handlers.worker - INFO - process_empty_logs_count: user_id=7442982117, user=<User(id=1, user_id=7442982117, username=the_trueon)>
2025-03-07 18:58:20,604 - handlers.worker - INFO - До обновления: user.empty_logs_count = 0
2025-03-07 18:58:20,604 - handlers.worker - INFO - Новое значение счетчика: new_empty_count = 12
2025-03-07 18:58:20,604 - database.repositories - INFO - Обновление пользователя 7442982117 с параметрами: {'empty_logs_count': 12}
2025-03-07 18:58:20,605 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:58:20,606 - sqlalchemy.engine.Engine - INFO - [cached since 3.673s ago] (7442982117,)
2025-03-07 18:58:20,607 - database.repositories - INFO - Пользователь до обновления: 1, 0
2025-03-07 18:58:20,609 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 18:58:20,609 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('2025-03-07 15:58:20.609948', 12, 7442982117)
2025-03-07 18:58:20,612 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 18:58:20,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:58:20,618 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:58:20,618 - sqlalchemy.engine.Engine - INFO - [cached since 3.686s ago] (7442982117,)
2025-03-07 18:58:20,619 - database.repositories - INFO - Пользователь после обновления: 1, 12
2025-03-07 18:58:20,619 - handlers.worker - INFO - После обновления: updated_user.empty_logs_count = 12
2025-03-07 18:58:20,727 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:58:20,728 - aiogram.event - INFO - Update id=117256221 is handled. Duration 125 ms by bot id=8126821875
2025-03-07 18:58:23,090 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 18:58:23,090 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 18:58:23,091 - sqlalchemy.engine.Engine - INFO - [cached since 6.158s ago] (8126821875,)
2025-03-07 18:58:23,092 - handlers.worker - INFO - show_statistics: user_id=8126821875, user=<User(id=2, user_id=8126821875, username=testsirderobot)>
2025-03-07 18:58:23,092 - handlers.worker - INFO - show_statistics: taken_logs_count=0, empty_logs_count=0
2025-03-07 18:58:23,093 - handlers.worker - INFO - show_statistics: final taken_logs_count=0, empty_logs_count=0
2025-03-07 18:58:23,197 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 18:58:23,198 - aiogram.event - INFO - Update id=117256222 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 19:06:25,459 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:06:25,710 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 19:06:25,711 - __main__ - INFO - Бот остановлен
2025-03-07 19:10:00,943 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:10:00,944 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:10:00,944 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:10:00,945 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:10:00,945 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:10:00,945 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:10:00,945 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:10:00,947 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:10:00,947 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:10:00,948 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:10:00,948 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:10:00,949 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:10:00,950 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:10:00,950 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:10:01,200 - __main__ - INFO - Бот запущен
2025-03-07 19:10:01,201 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:10:01,449 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:10:05,608 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:05,609 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:10:11,043 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:11,043 - aiogram.dispatcher - WARNING - Sleep for 1.437961 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 19:10:17,303 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:17,304 - aiogram.dispatcher - WARNING - Sleep for 1.658442 seconds and try again... (tryings = 2, bot id = 7558017023)
2025-03-07 19:10:24,215 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:24,215 - aiogram.dispatcher - WARNING - Sleep for 2.306751 seconds and try again... (tryings = 3, bot id = 7558017023)
2025-03-07 19:10:32,407 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:32,407 - aiogram.dispatcher - WARNING - Sleep for 3.150426 seconds and try again... (tryings = 4, bot id = 7558017023)
2025-03-07 19:10:39,219 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:39,219 - aiogram.dispatcher - WARNING - Sleep for 4.095382 seconds and try again... (tryings = 5, bot id = 7558017023)
2025-03-07 19:10:48,160 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:48,160 - aiogram.dispatcher - WARNING - Sleep for 4.900184 seconds and try again... (tryings = 6, bot id = 7558017023)
2025-03-07 19:10:58,340 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:10:58,340 - aiogram.dispatcher - WARNING - Sleep for 5.020033 seconds and try again... (tryings = 7, bot id = 7558017023)
2025-03-07 19:11:08,514 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:08,514 - aiogram.dispatcher - WARNING - Sleep for 5.143858 seconds and try again... (tryings = 8, bot id = 7558017023)
2025-03-07 19:11:18,882 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:18,882 - aiogram.dispatcher - WARNING - Sleep for 4.959907 seconds and try again... (tryings = 9, bot id = 7558017023)
2025-03-07 19:11:28,836 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:28,838 - aiogram.dispatcher - WARNING - Sleep for 5.152387 seconds and try again... (tryings = 10, bot id = 7558017023)
2025-03-07 19:11:39,218 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:39,218 - aiogram.dispatcher - WARNING - Sleep for 4.825525 seconds and try again... (tryings = 11, bot id = 7558017023)
2025-03-07 19:11:49,149 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:49,149 - aiogram.dispatcher - WARNING - Sleep for 5.067115 seconds and try again... (tryings = 12, bot id = 7558017023)
2025-03-07 19:11:59,305 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:11:59,305 - aiogram.dispatcher - WARNING - Sleep for 5.069660 seconds and try again... (tryings = 13, bot id = 7558017023)
2025-03-07 19:12:09,380 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:12:09,380 - aiogram.dispatcher - WARNING - Sleep for 5.095731 seconds and try again... (tryings = 14, bot id = 7558017023)
2025-03-07 19:12:19,691 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:12:19,692 - aiogram.dispatcher - WARNING - Sleep for 4.990324 seconds and try again... (tryings = 15, bot id = 7558017023)
2025-03-07 19:12:29,924 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:12:29,924 - aiogram.dispatcher - WARNING - Sleep for 5.054803 seconds and try again... (tryings = 16, bot id = 7558017023)
2025-03-07 19:12:40,043 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:12:40,044 - aiogram.dispatcher - WARNING - Sleep for 5.101588 seconds and try again... (tryings = 17, bot id = 7558017023)
2025-03-07 19:12:50,265 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:12:50,265 - aiogram.dispatcher - WARNING - Sleep for 5.033175 seconds and try again... (tryings = 18, bot id = 7558017023)
2025-03-07 19:13:00,382 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:00,383 - aiogram.dispatcher - WARNING - Sleep for 4.867876 seconds and try again... (tryings = 19, bot id = 7558017023)
2025-03-07 19:13:10,220 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:10,221 - aiogram.dispatcher - WARNING - Sleep for 4.937010 seconds and try again... (tryings = 20, bot id = 7558017023)
2025-03-07 19:13:20,369 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:20,370 - aiogram.dispatcher - WARNING - Sleep for 5.050955 seconds and try again... (tryings = 21, bot id = 7558017023)
2025-03-07 19:13:30,711 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:30,712 - aiogram.dispatcher - WARNING - Sleep for 5.075795 seconds and try again... (tryings = 22, bot id = 7558017023)
2025-03-07 19:13:41,153 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:41,154 - aiogram.dispatcher - WARNING - Sleep for 5.061607 seconds and try again... (tryings = 23, bot id = 7558017023)
2025-03-07 19:13:51,257 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:13:51,257 - aiogram.dispatcher - WARNING - Sleep for 5.038719 seconds and try again... (tryings = 24, bot id = 7558017023)
2025-03-07 19:14:01,426 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:01,427 - aiogram.dispatcher - WARNING - Sleep for 4.931310 seconds and try again... (tryings = 25, bot id = 7558017023)
2025-03-07 19:14:11,527 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:11,527 - aiogram.dispatcher - WARNING - Sleep for 4.874728 seconds and try again... (tryings = 26, bot id = 7558017023)
2025-03-07 19:14:21,398 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:21,399 - aiogram.dispatcher - WARNING - Sleep for 4.908825 seconds and try again... (tryings = 27, bot id = 7558017023)
2025-03-07 19:14:31,549 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:31,549 - aiogram.dispatcher - WARNING - Sleep for 5.065988 seconds and try again... (tryings = 28, bot id = 7558017023)
2025-03-07 19:14:41,782 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:41,783 - aiogram.dispatcher - WARNING - Sleep for 5.024683 seconds and try again... (tryings = 29, bot id = 7558017023)
2025-03-07 19:14:52,156 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:14:52,156 - aiogram.dispatcher - WARNING - Sleep for 4.904932 seconds and try again... (tryings = 30, bot id = 7558017023)
2025-03-07 19:15:02,154 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:02,154 - aiogram.dispatcher - WARNING - Sleep for 5.047955 seconds and try again... (tryings = 31, bot id = 7558017023)
2025-03-07 19:15:12,259 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:12,260 - aiogram.dispatcher - WARNING - Sleep for 4.985076 seconds and try again... (tryings = 32, bot id = 7558017023)
2025-03-07 19:15:22,585 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:22,585 - aiogram.dispatcher - WARNING - Sleep for 5.010139 seconds and try again... (tryings = 33, bot id = 7558017023)
2025-03-07 19:15:32,714 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:32,715 - aiogram.dispatcher - WARNING - Sleep for 4.987015 seconds and try again... (tryings = 34, bot id = 7558017023)
2025-03-07 19:15:42,933 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:42,933 - aiogram.dispatcher - WARNING - Sleep for 5.203553 seconds and try again... (tryings = 35, bot id = 7558017023)
2025-03-07 19:15:53,218 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:15:53,218 - aiogram.dispatcher - WARNING - Sleep for 4.930882 seconds and try again... (tryings = 36, bot id = 7558017023)
2025-03-07 19:16:03,287 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:03,288 - aiogram.dispatcher - WARNING - Sleep for 5.034915 seconds and try again... (tryings = 37, bot id = 7558017023)
2025-03-07 19:16:13,489 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:13,489 - aiogram.dispatcher - WARNING - Sleep for 5.027793 seconds and try again... (tryings = 38, bot id = 7558017023)
2025-03-07 19:16:23,800 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:23,800 - aiogram.dispatcher - WARNING - Sleep for 5.000786 seconds and try again... (tryings = 39, bot id = 7558017023)
2025-03-07 19:16:33,950 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:33,951 - aiogram.dispatcher - WARNING - Sleep for 4.933030 seconds and try again... (tryings = 40, bot id = 7558017023)
2025-03-07 19:16:43,889 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:43,889 - aiogram.dispatcher - WARNING - Sleep for 5.041764 seconds and try again... (tryings = 41, bot id = 7558017023)
2025-03-07 19:16:54,015 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:16:54,015 - aiogram.dispatcher - WARNING - Sleep for 5.068407 seconds and try again... (tryings = 42, bot id = 7558017023)
2025-03-07 19:17:04,188 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:17:04,188 - aiogram.dispatcher - WARNING - Sleep for 5.202778 seconds and try again... (tryings = 43, bot id = 7558017023)
2025-03-07 19:17:08,791 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:17:09,044 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:17:09,045 - __main__ - INFO - Бот остановлен
2025-03-07 19:17:12,356 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:12,356 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:17:12,357 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:17:12,357 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:17:12,358 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:17:12,359 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:17:12,359 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:17:12,360 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:17:12,361 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:17:12,362 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:17:12,362 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:17:12,363 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:17:12,364 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:17:12,364 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:17:12,603 - __main__ - INFO - Бот запущен
2025-03-07 19:17:12,603 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:17:12,880 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 19:17:26,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:26,193 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:26,193 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (1083294848,)
2025-03-07 19:17:26,347 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:26,348 - aiogram.event - INFO - Update id=117256223 is handled. Duration 1562 ms by bot id=8126821875
2025-03-07 19:17:38,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:38,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:38,659 - sqlalchemy.engine.Engine - INFO - [cached since 12.47s ago] (7442982117,)
2025-03-07 19:17:38,833 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:38,834 - aiogram.event - INFO - Update id=117256224 is handled. Duration 1467 ms by bot id=8126821875
2025-03-07 19:17:39,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:39,919 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 19:17:39,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2025-03-07 19:17:40,031 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:40,032 - aiogram.event - INFO - Update id=117256225 is handled. Duration 234 ms by bot id=8126821875
2025-03-07 19:17:41,167 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:41,167 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 19:17:41,168 - sqlalchemy.engine.Engine - INFO - [cached since 1.25s ago] ()
2025-03-07 19:17:41,354 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:41,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (7442982117,)
2025-03-07 19:17:41,357 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 19:17:41,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (1, 0)
2025-03-07 19:17:41,363 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 19:17:41,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] (1, '2025-03-07 16:17:41.362770', 1, 3)
2025-03-07 19:17:41,365 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:17:41,369 - handlers.worker - INFO - process_logs_count: увеличиваем счетчик взятых логов на 1 для пользователя 7442982117
2025-03-07 19:17:41,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:41,372 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:41,372 - sqlalchemy.engine.Engine - INFO - [cached since 15.18s ago] (7442982117,)
2025-03-07 19:17:41,374 - database.repositories - INFO - increment_taken_logs: user_id=7442982117, current_count=1, new_count=2
2025-03-07 19:17:41,375 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=? WHERE users.user_id = ?
2025-03-07 19:17:41,375 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('2025-03-07 16:17:41.375814', 2, 7442982117)
2025-03-07 19:17:41,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:17:41,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:41,383 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:41,384 - sqlalchemy.engine.Engine - INFO - [cached since 15.19s ago] (7442982117,)
2025-03-07 19:17:41,385 - handlers.worker - INFO - process_logs_count: счетчик взятых логов после обновления: 2
2025-03-07 19:17:41,779 - utils.archive - INFO - Удалена папка сессии: session_3121
2025-03-07 19:17:41,959 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:41,960 - aiogram.event - INFO - Update id=117256226 is handled. Duration 795 ms by bot id=8126821875
2025-03-07 19:17:44,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:44,832 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:44,832 - sqlalchemy.engine.Engine - INFO - [cached since 18.64s ago] (7442982117,)
2025-03-07 19:17:44,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:44,944 - aiogram.event - INFO - Update id=117256227 is handled. Duration 1421 ms by bot id=8126821875
2025-03-07 19:17:46,107 - handlers.worker - INFO - show_statistics: запрос статистики для пользователя с ID 8126821875
2025-03-07 19:17:46,110 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:17:46,111 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:17:46,111 - sqlalchemy.engine.Engine - INFO - [cached since 19.92s ago] (8126821875,)
2025-03-07 19:17:46,113 - handlers.worker - INFO - show_statistics: user_id=8126821875, user=<User(id=2, user_id=8126821875, username=testsirderobot)>
2025-03-07 19:17:46,114 - handlers.worker - INFO - show_statistics: taken_logs_count=0, empty_logs_count=0
2025-03-07 19:17:46,114 - handlers.worker - INFO - show_statistics: final taken_logs_count=0, empty_logs_count=0
2025-03-07 19:17:46,224 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:17:46,225 - aiogram.event - INFO - Update id=117256228 is handled. Duration 219 ms by bot id=8126821875
2025-03-07 19:19:44,619 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:19:44,869 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 19:19:44,870 - __main__ - INFO - Бот остановлен
2025-03-07 19:52:56,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:52:56,203 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:52:56,204 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:52:56,206 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:52:56,206 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:52:56,207 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:52:56,207 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:52:56,208 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:52:56,209 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:52:56,209 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:52:56,210 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:52:56,211 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:52:56,212 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:52:56,212 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:52:56,506 - __main__ - INFO - Бот запущен
2025-03-07 19:52:56,507 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:52:56,764 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:00,914 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:53:00,914 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:53:03,323 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:53:03,573 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:03,574 - __main__ - INFO - Бот остановлен
2025-03-07 19:53:08,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:53:08,058 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:53:08,059 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:08,060 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:53:08,060 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:08,061 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:53:08,062 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:08,062 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:53:08,063 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:08,064 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:53:08,064 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:08,065 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:53:08,066 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:53:08,066 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:53:08,336 - __main__ - INFO - Бот запущен
2025-03-07 19:53:08,336 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:53:08,584 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:13,335 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:53:13,336 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:53:19,559 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:53:19,560 - aiogram.dispatcher - WARNING - Sleep for 1.345967 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 19:53:23,549 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:53:23,799 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:23,800 - __main__ - INFO - Бот остановлен
2025-03-07 19:53:37,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:53:37,854 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:53:37,854 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:37,856 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:53:37,856 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:37,857 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:53:37,858 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:37,858 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:53:37,859 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:37,860 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:53:37,860 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:53:37,861 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:53:37,862 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:53:37,862 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:53:38,094 - __main__ - INFO - Бот запущен
2025-03-07 19:53:38,094 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:53:38,342 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:42,494 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:53:42,494 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:53:43,875 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:53:44,128 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:53:44,129 - __main__ - INFO - Бот остановлен
2025-03-07 19:54:18,259 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:54:18,260 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:54:18,260 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:18,261 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:54:18,262 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:18,262 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:54:18,263 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:18,263 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:54:18,263 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:18,264 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:54:18,264 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:18,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:54:18,266 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:54:18,266 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:54:18,510 - __main__ - INFO - Бот запущен
2025-03-07 19:54:18,510 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:54:18,773 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:54:23,038 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:54:23,038 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:54:28,522 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:54:28,523 - aiogram.dispatcher - WARNING - Sleep for 1.275653 seconds and try again... (tryings = 1, bot id = 7558017023)
2025-03-07 19:54:30,821 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:54:31,074 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:54:31,074 - __main__ - INFO - Бот остановлен
2025-03-07 19:54:43,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:54:43,641 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:54:43,641 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:43,643 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:54:43,643 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:43,644 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:54:43,644 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:43,645 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:54:43,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:43,646 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:54:43,646 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:54:43,648 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:54:43,649 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:54:43,649 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:54:43,882 - __main__ - INFO - Бот запущен
2025-03-07 19:54:43,883 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:54:44,133 - aiogram.dispatcher - INFO - Run polling for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:54:48,281 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-07 19:54:48,282 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7558017023)
2025-03-07 19:54:51,181 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 19:54:51,432 - aiogram.dispatcher - INFO - Polling stopped for bot @wrldlxrd_bot id=7558017023 - 'WRLD'
2025-03-07 19:54:51,433 - __main__ - INFO - Бот остановлен
2025-03-07 19:55:24,247 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:55:24,248 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 19:55:24,248 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:55:24,250 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 19:55:24,250 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:55:24,251 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 19:55:24,251 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:55:24,253 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 19:55:24,253 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:55:24,254 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 19:55:24,255 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 19:55:24,257 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:55:24,258 - database.base - INFO - База данных успешно инициализирована
2025-03-07 19:55:24,258 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 19:55:24,531 - __main__ - INFO - Бот запущен
2025-03-07 19:55:24,531 - aiogram.dispatcher - INFO - Start polling
2025-03-07 19:55:24,794 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 19:55:26,317 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:55:26,333 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:55:26,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] (1083294848,)
2025-03-07 19:55:26,348 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:55:26,349 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:55:26,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.01531s ago] (1083294848,)
2025-03-07 19:55:26,470 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:55:26,472 - aiogram.event - INFO - Update id=117256229 is handled. Duration 1577 ms by bot id=8126821875
2025-03-07 19:55:26,474 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:55:26,476 - aiogram.event - INFO - Update id=117256230 is handled. Duration 1577 ms by bot id=8126821875
2025-03-07 19:55:34,505 - aiogram.event - INFO - Update id=117256231 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 19:56:34,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,631 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 19:56:34,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('BQACAgIAAxkBAAIM9WfLJUJfSMHxKutLY49TMziY9qXZAAI-agACR41ZSpnZdmU-l8YXNgQ', 'tesb.rar', 210, 0, '2025-03-07 16:56:34.631938', None, None)
2025-03-07 19:56:34,635 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,642 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 19:56:34,643 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] (2,)
2025-03-07 19:56:34,765 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('111111',)
2025-03-07 19:56:34,769 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 19:56:34,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('111111', 0, '2025-03-07 16:56:34.769416', None, None)
2025-03-07 19:56:34,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,781 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 19:56:34,782 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] (4,)
2025-03-07 19:56:34,785 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,785 - sqlalchemy.engine.Engine - INFO - [cached since 0.02s ago] ('111111',)
2025-03-07 19:56:34,788 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 19:56:34,788 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('111111', '2025-03-07 16:56:34.788196')
2025-03-07 19:56:34,790 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,796 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 19:56:34,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (4,)
2025-03-07 19:56:34,800 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,800 - sqlalchemy.engine.Engine - INFO - [cached since 0.03432s ago] ('123',)
2025-03-07 19:56:34,802 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 19:56:34,802 - sqlalchemy.engine.Engine - INFO - [cached since 0.03362s ago] ('123', 0, '2025-03-07 16:56:34.801796', None, None)
2025-03-07 19:56:34,804 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,809 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 19:56:34,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.02828s ago] (5,)
2025-03-07 19:56:34,811 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,812 - sqlalchemy.engine.Engine - INFO - [cached since 0.0458s ago] ('123',)
2025-03-07 19:56:34,813 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 19:56:34,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.02533s ago] ('123', '2025-03-07 16:56:34.813333')
2025-03-07 19:56:34,815 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,820 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,820 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 19:56:34,820 - sqlalchemy.engine.Engine - INFO - [cached since 0.02351s ago] (5,)
2025-03-07 19:56:34,822 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.05652s ago] ('13',)
2025-03-07 19:56:34,824 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 19:56:34,824 - sqlalchemy.engine.Engine - INFO - [cached since 0.05532s ago] ('13', 0, '2025-03-07 16:56:34.823622', None, None)
2025-03-07 19:56:34,825 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,830 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,831 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 19:56:34,831 - sqlalchemy.engine.Engine - INFO - [cached since 0.04932s ago] (6,)
2025-03-07 19:56:34,833 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 19:56:34,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.06712s ago] ('13',)
2025-03-07 19:56:34,834 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 19:56:34,835 - sqlalchemy.engine.Engine - INFO - [cached since 0.04734s ago] ('13', '2025-03-07 16:56:34.834352')
2025-03-07 19:56:34,837 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:56:34,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:56:34,842 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 19:56:34,842 - sqlalchemy.engine.Engine - INFO - [cached since 0.04528s ago] (6,)
2025-03-07 19:56:34,945 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:56:34,946 - aiogram.event - INFO - Update id=117256232 is handled. Duration 780 ms by bot id=8126821875
2025-03-07 19:57:10,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:10,459 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:10,459 - sqlalchemy.engine.Engine - INFO - [cached since 104.1s ago] (7442982117,)
2025-03-07 19:57:10,616 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:10,618 - aiogram.event - INFO - Update id=117256233 is handled. Duration 1702 ms by bot id=8126821875
2025-03-07 19:57:12,136 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:12,138 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 19:57:12,138 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
2025-03-07 19:57:12,243 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:12,246 - aiogram.event - INFO - Update id=117256234 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 19:57:14,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:14,959 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 19:57:14,959 - sqlalchemy.engine.Engine - INFO - [cached since 2.821s ago] ()
2025-03-07 19:57:15,136 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:15,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (7442982117,)
2025-03-07 19:57:15,138 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 19:57:15,138 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] (1, 0)
2025-03-07 19:57:15,143 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 19:57:15,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (1, '2025-03-07 16:57:15.142442', 1, 4)
2025-03-07 19:57:15,146 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:57:15,150 - handlers.worker - INFO - Пользователь 7442982117 берет 1 сессий
2025-03-07 19:57:15,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:15,152 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:15,152 - sqlalchemy.engine.Engine - INFO - [cached since 108.8s ago] (7442982117,)
2025-03-07 19:57:15,153 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 19:57:15,153 - database.repositories - INFO -   Текущие значения: taken=2, empty=12
2025-03-07 19:57:15,154 - database.repositories - INFO -   Добавляем: taken=1, empty=0
2025-03-07 19:57:15,154 - database.repositories - INFO -   Новые значения: taken=3, empty=12
2025-03-07 19:57:15,154 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 19:57:15,155 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('2025-03-07 16:57:15.154132', 3, 12, 7442982117)
2025-03-07 19:57:15,156 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 19:57:15,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:15,162 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:15,162 - sqlalchemy.engine.Engine - INFO - [cached since 108.8s ago] (7442982117,)
2025-03-07 19:57:15,163 - database.repositories - INFO - Пользователь после обновления: taken=3, empty=12
2025-03-07 19:57:15,621 - utils.archive - INFO - Удалена папка сессии: session_111111
2025-03-07 19:57:15,763 - handlers.worker - INFO - Сессии успешно выданы пользователю 7442982117. Всего взято: 3
2025-03-07 19:57:15,764 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:15,765 - aiogram.event - INFO - Update id=117256235 is handled. Duration 797 ms by bot id=8126821875
2025-03-07 19:57:17,003 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 19:57:17,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:17,005 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:17,006 - sqlalchemy.engine.Engine - INFO - [cached since 110.7s ago] (8126821875,)
2025-03-07 19:57:17,008 - database.repositories - INFO - Статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 19:57:17,125 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875: {'taken_logs_count': 0, 'empty_logs_count': 0}
2025-03-07 19:57:17,126 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:17,128 - aiogram.event - INFO - Update id=117256236 is handled. Duration 233 ms by bot id=8126821875
2025-03-07 19:57:20,357 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:20,358 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:20,358 - sqlalchemy.engine.Engine - INFO - [cached since 114s ago] (7442982117,)
2025-03-07 19:57:20,474 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:20,475 - aiogram.event - INFO - Update id=117256237 is handled. Duration 1344 ms by bot id=8126821875
2025-03-07 19:57:24,171 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 19:57:24,172 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 19:57:24,173 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 19:57:24,173 - sqlalchemy.engine.Engine - INFO - [cached since 117.8s ago] (8126821875,)
2025-03-07 19:57:24,174 - database.repositories - INFO - Статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 19:57:24,332 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875: {'taken_logs_count': 0, 'empty_logs_count': 0}
2025-03-07 19:57:24,333 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 19:57:24,334 - aiogram.event - INFO - Update id=117256238 is handled. Duration 342 ms by bot id=8126821875
2025-03-07 20:01:00,728 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:01:00,978 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:01:00,979 - __main__ - INFO - Бот остановлен
2025-03-07 20:10:09,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:10:09,755 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:10:09,755 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:10:09,756 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:10:09,757 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:10:09,757 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:10:09,757 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:10:09,758 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:10:09,758 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:10:09,759 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:10:09,759 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:10:09,760 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:10:09,761 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:10:09,761 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:10:10,009 - __main__ - INFO - Бот запущен
2025-03-07 20:10:10,009 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:10:10,259 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:11:46,415 - database.repositories - INFO - Запрос пользователя с ID 1083294848
2025-03-07 20:11:46,418 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:11:46,427 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:11:46,427 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (1083294848,)
2025-03-07 20:11:46,430 - database.repositories - INFO - Найден пользователь: ID=3, user_id=1083294848, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:11:46,550 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:11:46,552 - aiogram.event - INFO - Update id=117256239 is handled. Duration 1562 ms by bot id=8126821875
2025-03-07 20:12:05,426 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:05,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:05,429 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:05,429 - sqlalchemy.engine.Engine - INFO - [cached since 19s ago] (7442982117,)
2025-03-07 20:12:05,432 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=3, empty_logs_count=12
2025-03-07 20:12:05,547 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:05,549 - aiogram.event - INFO - Update id=117256240 is handled. Duration 1625 ms by bot id=8126821875
2025-03-07 20:12:06,439 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:12:06,439 - handlers.worker - INFO - Тип сообщения: <class 'aiogram.types.message.Message'>, chat_id: 7442982117, from_user: 8126821875
2025-03-07 20:12:06,439 - database.repositories - INFO - Запрос пользователя с ID 8126821875
2025-03-07 20:12:06,442 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:06,442 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:06,442 - sqlalchemy.engine.Engine - INFO - [cached since 20.01s ago] (8126821875,)
2025-03-07 20:12:06,444 - database.repositories - INFO - Найден пользователь: ID=2, user_id=8126821875, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:12:06,445 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:06,445 - sqlalchemy.engine.Engine - INFO - [cached since 20.02s ago] (8126821875,)
2025-03-07 20:12:06,446 - database.repositories - INFO - Принудительное обновление статистики для пользователя 8126821875:
2025-03-07 20:12:06,446 - database.repositories - INFO -   Текущие значения: taken=0, empty=0
2025-03-07 20:12:06,557 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875: taken=0, empty=0
2025-03-07 20:12:06,557 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:06,558 - aiogram.event - INFO - Update id=117256241 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 20:12:07,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:07,741 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:12:07,742 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2025-03-07 20:12:07,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:07,848 - aiogram.event - INFO - Update id=117256242 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 20:12:09,600 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:09,601 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:12:09,601 - sqlalchemy.engine.Engine - INFO - [cached since 1.86s ago] ()
2025-03-07 20:12:09,712 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:09,712 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] (7442982117,)
2025-03-07 20:12:09,716 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 20:12:09,716 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (1, 0)
2025-03-07 20:12:09,719 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 20:12:09,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] (1, '2025-03-07 17:12:09.717072', 1, 5)
2025-03-07 20:12:09,722 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:12:09,725 - handlers.worker - INFO - Пользователь 7442982117 берет 1 сессий
2025-03-07 20:12:09,726 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:09,727 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:09,727 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:09,728 - sqlalchemy.engine.Engine - INFO - [cached since 23.3s ago] (7442982117,)
2025-03-07 20:12:09,729 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=3, empty_logs_count=12
2025-03-07 20:12:09,730 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:12:09,730 - database.repositories - INFO -   Текущие значения: taken=3, empty=12
2025-03-07 20:12:09,730 - database.repositories - INFO -   Добавляем: taken=1, empty=0
2025-03-07 20:12:09,731 - database.repositories - INFO -   Новые значения: taken=4, empty=12
2025-03-07 20:12:09,732 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:12:09,732 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('2025-03-07 17:12:09.731612', 4, 12, 7442982117)
2025-03-07 20:12:09,735 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:12:09,738 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:09,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:09,739 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:09,740 - sqlalchemy.engine.Engine - INFO - [cached since 23.31s ago] (7442982117,)
2025-03-07 20:12:09,741 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=12
2025-03-07 20:12:09,741 - database.repositories - INFO - Пользователь после обновления: taken=4, empty=12
2025-03-07 20:12:09,974 - utils.archive - INFO - Удалена папка сессии: session_123
2025-03-07 20:12:10,085 - handlers.worker - INFO - Сессии успешно выданы пользователю 7442982117. Всего взято: 4
2025-03-07 20:12:10,085 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:10,086 - aiogram.event - INFO - Update id=117256243 is handled. Duration 483 ms by bot id=8126821875
2025-03-07 20:12:13,109 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:13,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:13,112 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:13,112 - sqlalchemy.engine.Engine - INFO - [cached since 26.69s ago] (7442982117,)
2025-03-07 20:12:13,114 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=12
2025-03-07 20:12:13,688 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:13,690 - aiogram.event - INFO - Update id=117256244 is handled. Duration 1905 ms by bot id=8126821875
2025-03-07 20:12:17,209 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:12:17,209 - handlers.worker - INFO - Тип сообщения: <class 'aiogram.types.message.Message'>, chat_id: 7442982117, from_user: 8126821875
2025-03-07 20:12:17,209 - database.repositories - INFO - Запрос пользователя с ID 8126821875
2025-03-07 20:12:17,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:17,213 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:17,214 - sqlalchemy.engine.Engine - INFO - [cached since 30.79s ago] (8126821875,)
2025-03-07 20:12:17,215 - database.repositories - INFO - Найден пользователь: ID=2, user_id=8126821875, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:12:17,216 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:17,216 - sqlalchemy.engine.Engine - INFO - [cached since 30.79s ago] (8126821875,)
2025-03-07 20:12:17,218 - database.repositories - INFO - Принудительное обновление статистики для пользователя 8126821875:
2025-03-07 20:12:17,218 - database.repositories - INFO -   Текущие значения: taken=0, empty=0
2025-03-07 20:12:17,322 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875: taken=0, empty=0
2025-03-07 20:12:17,324 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:17,324 - aiogram.event - INFO - Update id=117256245 is handled. Duration 202 ms by bot id=8126821875
2025-03-07 20:12:56,535 - aiogram.event - INFO - Update id=117256246 is handled. Duration 375 ms by bot id=8126821875
2025-03-07 20:12:57,934 - handlers.worker - INFO - Пользователь 7442982117 добавляет 1 пустых логов
2025-03-07 20:12:57,934 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:57,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:57,937 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:57,937 - sqlalchemy.engine.Engine - INFO - [cached since 71.51s ago] (7442982117,)
2025-03-07 20:12:57,939 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=12
2025-03-07 20:12:57,939 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:12:57,940 - database.repositories - INFO -   Текущие значения: taken=4, empty=12
2025-03-07 20:12:57,940 - database.repositories - INFO -   Добавляем: taken=0, empty=1
2025-03-07 20:12:57,940 - database.repositories - INFO -   Новые значения: taken=4, empty=13
2025-03-07 20:12:57,942 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:12:57,942 - sqlalchemy.engine.Engine - INFO - [cached since 48.21s ago] ('2025-03-07 17:12:57.940966', 4, 13, 7442982117)
2025-03-07 20:12:57,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:12:57,950 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:12:57,951 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:12:57,952 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:12:57,952 - sqlalchemy.engine.Engine - INFO - [cached since 71.53s ago] (7442982117,)
2025-03-07 20:12:57,955 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=13
2025-03-07 20:12:57,955 - database.repositories - INFO - Пользователь после обновления: taken=4, empty=13
2025-03-07 20:12:58,086 - handlers.worker - INFO - Статистика пользователя 7442982117 обновлена: empty_logs_count=13
2025-03-07 20:12:58,086 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:12:58,087 - aiogram.event - INFO - Update id=117256247 is handled. Duration 155 ms by bot id=8126821875
2025-03-07 20:13:00,908 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:13:00,908 - handlers.worker - INFO - Тип сообщения: <class 'aiogram.types.message.Message'>, chat_id: 7442982117, from_user: 8126821875
2025-03-07 20:13:00,909 - database.repositories - INFO - Запрос пользователя с ID 8126821875
2025-03-07 20:13:00,910 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:13:00,910 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:13:00,911 - sqlalchemy.engine.Engine - INFO - [cached since 74.48s ago] (8126821875,)
2025-03-07 20:13:00,914 - database.repositories - INFO - Найден пользователь: ID=2, user_id=8126821875, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:13:00,915 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:13:00,915 - sqlalchemy.engine.Engine - INFO - [cached since 74.49s ago] (8126821875,)
2025-03-07 20:13:00,918 - database.repositories - INFO - Принудительное обновление статистики для пользователя 8126821875:
2025-03-07 20:13:00,918 - database.repositories - INFO -   Текущие значения: taken=0, empty=0
2025-03-07 20:13:01,117 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875: taken=0, empty=0
2025-03-07 20:13:01,118 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:13:01,118 - aiogram.event - INFO - Update id=117256248 is handled. Duration 422 ms by bot id=8126821875
2025-03-07 20:18:10,326 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:18:10,576 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:18:10,577 - __main__ - INFO - Бот остановлен
2025-03-07 20:18:14,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:14,207 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:18:14,207 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:18:14,208 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:18:14,208 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:18:14,209 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:18:14,209 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:18:14,209 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:18:14,209 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:18:14,210 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:18:14,210 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:18:14,211 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:18:14,212 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:18:14,212 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:18:14,467 - __main__ - INFO - Бот запущен
2025-03-07 20:18:14,467 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:18:14,730 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:18:36,252 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:18:36,256 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:36,264 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:36,265 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (7442982117,)
2025-03-07 20:18:36,267 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=13
2025-03-07 20:18:36,387 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:36,388 - aiogram.event - INFO - Update id=117256249 is handled. Duration 1765 ms by bot id=8126821875
2025-03-07 20:18:38,655 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:18:38,656 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 8126821875
2025-03-07 20:18:38,656 - database.repositories - INFO - Запрос пользователя с ID 8126821875
2025-03-07 20:18:38,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:38,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:38,659 - sqlalchemy.engine.Engine - INFO - [cached since 2.395s ago] (8126821875,)
2025-03-07 20:18:38,660 - database.repositories - INFO - Найден пользователь: ID=2, user_id=8126821875, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:18:38,660 - handlers.worker - INFO - Актуальная статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 20:18:38,661 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:38,770 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875
2025-03-07 20:18:38,770 - aiogram.event - INFO - Update id=117256250 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 20:18:39,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:39,725 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:18:39,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ()
2025-03-07 20:18:39,827 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:39,828 - aiogram.event - INFO - Update id=117256251 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 20:18:41,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:41,386 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:18:41,386 - sqlalchemy.engine.Engine - INFO - [cached since 1.661s ago] ()
2025-03-07 20:18:41,488 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:41,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] (7442982117,)
2025-03-07 20:18:41,491 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 20:18:41,492 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] (1, 0)
2025-03-07 20:18:41,498 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 20:18:41,499 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (1, '2025-03-07 17:18:41.497169', 1, 6)
2025-03-07 20:18:41,501 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:18:41,505 - handlers.worker - INFO - Пользователь 7442982117 берет 1 сессий
2025-03-07 20:18:41,505 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:18:41,507 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:41,508 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:41,508 - sqlalchemy.engine.Engine - INFO - [cached since 5.244s ago] (7442982117,)
2025-03-07 20:18:41,509 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=4, empty_logs_count=13
2025-03-07 20:18:41,509 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:18:41,509 - database.repositories - INFO -   Текущие значения: taken=4, empty=13
2025-03-07 20:18:41,509 - database.repositories - INFO -   Добавляем: taken=1, empty=0
2025-03-07 20:18:41,509 - database.repositories - INFO -   Новые значения: taken=5, empty=13
2025-03-07 20:18:41,510 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:18:41,511 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('2025-03-07 17:18:41.509262', 5, 13, 7442982117)
2025-03-07 20:18:41,514 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:18:41,518 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:18:41,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:41,519 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:41,521 - sqlalchemy.engine.Engine - INFO - [cached since 5.256s ago] (7442982117,)
2025-03-07 20:18:41,523 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=5, empty_logs_count=13
2025-03-07 20:18:41,523 - database.repositories - INFO - Пользователь после обновления: taken=5, empty=13
2025-03-07 20:18:42,000 - utils.archive - INFO - Удалена папка сессии: session_13
2025-03-07 20:18:42,105 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 7442982117
2025-03-07 20:18:42,106 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:18:42,107 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:42,108 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:42,108 - sqlalchemy.engine.Engine - INFO - [cached since 5.844s ago] (7442982117,)
2025-03-07 20:18:42,109 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=5, empty_logs_count=13
2025-03-07 20:18:42,109 - handlers.worker - INFO - Актуальная статистика пользователя 7442982117: taken=5, empty=13
2025-03-07 20:18:42,109 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:42,215 - handlers.worker - INFO - Сессии успешно выданы пользователю 7442982117. Статистика обновлена и отправлена.
2025-03-07 20:18:42,215 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:42,216 - aiogram.event - INFO - Update id=117256252 is handled. Duration 827 ms by bot id=8126821875
2025-03-07 20:18:46,571 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:18:46,572 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:46,572 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:46,572 - sqlalchemy.engine.Engine - INFO - [cached since 10.31s ago] (7442982117,)
2025-03-07 20:18:46,575 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=5, empty_logs_count=13
2025-03-07 20:18:46,797 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:46,798 - aiogram.event - INFO - Update id=117256253 is handled. Duration 1469 ms by bot id=8126821875
2025-03-07 20:18:48,039 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:18:48,039 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 8126821875
2025-03-07 20:18:48,039 - database.repositories - INFO - Запрос пользователя с ID 8126821875
2025-03-07 20:18:48,042 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:18:48,042 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:18:48,043 - sqlalchemy.engine.Engine - INFO - [cached since 11.78s ago] (8126821875,)
2025-03-07 20:18:48,044 - database.repositories - INFO - Найден пользователь: ID=2, user_id=8126821875, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:18:48,044 - handlers.worker - INFO - Актуальная статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 20:18:48,045 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:18:48,149 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875
2025-03-07 20:18:48,149 - aiogram.event - INFO - Update id=117256254 is handled. Duration 203 ms by bot id=8126821875
2025-03-07 20:22:50,016 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 64] Указанное сетевое имя более недоступно
2025-03-07 20:22:50,017 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8126821875)
2025-03-07 20:23:10,297 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Превышен таймаут семафора]
2025-03-07 20:23:10,298 - aiogram.dispatcher - WARNING - Sleep for 1.188881 seconds and try again... (tryings = 1, bot id = 8126821875)
2025-03-07 20:23:21,742 - aiogram.dispatcher - INFO - Connection established (tryings = 2, bot id = 8126821875)
2025-03-07 20:25:10,955 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:25:11,206 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:25:11,207 - __main__ - INFO - Бот остановлен
2025-03-07 20:25:18,868 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:25:18,869 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:25:18,869 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:18,870 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:25:18,870 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:18,871 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:25:18,871 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:18,872 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:25:18,872 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:18,872 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:25:18,872 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:18,874 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:25:18,875 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:25:18,875 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:25:19,227 - __main__ - INFO - Бот запущен
2025-03-07 20:25:19,227 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:25:19,486 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:25:29,182 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:25:29,184 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 8126821875
2025-03-07 20:25:29,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:25:29,194 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:25:29,195 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (8126821875,)
2025-03-07 20:25:29,196 - database.repositories - INFO - Актуальная статистика пользователя 8126821875 из базы данных: taken=0, empty=0
2025-03-07 20:25:29,196 - handlers.worker - INFO - Актуальная статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 20:25:29,197 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:25:29,314 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875
2025-03-07 20:25:29,314 - aiogram.event - INFO - Update id=117256255 is handled. Duration 390 ms by bot id=8126821875
2025-03-07 20:25:31,515 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:25:31,516 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 8126821875
2025-03-07 20:25:31,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:25:31,518 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:25:31,518 - sqlalchemy.engine.Engine - INFO - [cached since 2.324s ago] (8126821875,)
2025-03-07 20:25:31,519 - database.repositories - INFO - Актуальная статистика пользователя 8126821875 из базы данных: taken=0, empty=0
2025-03-07 20:25:31,519 - handlers.worker - INFO - Актуальная статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 20:25:31,520 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:25:31,621 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875
2025-03-07 20:25:31,621 - aiogram.event - INFO - Update id=117256256 is handled. Duration 187 ms by bot id=8126821875
2025-03-07 20:25:46,575 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:25:46,826 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:25:46,827 - __main__ - INFO - Бот остановлен
2025-03-07 20:25:50,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:25:50,984 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:25:50,984 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:50,986 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:25:50,986 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:50,987 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:25:50,988 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:50,989 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:25:50,989 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:50,990 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:25:50,990 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:25:50,992 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:25:50,992 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:25:50,992 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:25:51,252 - __main__ - INFO - Бот запущен
2025-03-07 20:25:51,252 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:25:51,534 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:27:05,600 - aiogram.event - INFO - Update id=117256257 is handled. Duration 547 ms by bot id=8126821875
2025-03-07 20:27:27,405 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,407 - sqlalchemy.engine.Engine - INFO - INSERT INTO logs (file_id, file_name, file_size, is_taken, uploaded_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-07 20:27:27,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('BQACAgIAAxkBAAINKWfLLH-LLV40LG46he36vwp2PnKfAALNagACR41ZSq2NDoFEcr0ONgQ', 'tesb.rar', 160, 0, '2025-03-07 17:27:27.407200', None, None)
2025-03-07 20:27:27,411 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:27,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,419 - sqlalchemy.engine.Engine - INFO - SELECT logs.id, logs.file_id, logs.file_name, logs.file_size, logs.is_taken, logs.uploaded_at, logs.taken_at, logs.user_id 
FROM logs 
WHERE logs.id = ?
2025-03-07 20:27:27,419 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (3,)
2025-03-07 20:27:27,544 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 20:27:27,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('011',)
2025-03-07 20:27:27,548 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 20:27:27,548 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('011', 0, '2025-03-07 17:27:27.547256', None, None)
2025-03-07 20:27:27,549 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:27,552 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,555 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 20:27:27,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (7,)
2025-03-07 20:27:27,559 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 20:27:27,559 - sqlalchemy.engine.Engine - INFO - [cached since 0.01555s ago] ('011',)
2025-03-07 20:27:27,561 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 20:27:27,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('011', '2025-03-07 17:27:27.561788')
2025-03-07 20:27:27,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:27,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,569 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 20:27:27,569 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (7,)
2025-03-07 20:27:27,571 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 20:27:27,571 - sqlalchemy.engine.Engine - INFO - [cached since 0.02737s ago] ('019',)
2025-03-07 20:27:27,572 - sqlalchemy.engine.Engine - INFO - INSERT INTO sessions (phone_number, is_taken, created_at, taken_at, user_id) VALUES (?, ?, ?, ?, ?)
2025-03-07 20:27:27,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.0254s ago] ('019', 0, '2025-03-07 17:27:27.572815', None, None)
2025-03-07 20:27:27,575 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:27,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,580 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.id = ?
2025-03-07 20:27:27,580 - sqlalchemy.engine.Engine - INFO - [cached since 0.02582s ago] (8,)
2025-03-07 20:27:27,582 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.phone_number = ?
2025-03-07 20:27:27,582 - sqlalchemy.engine.Engine - INFO - [cached since 0.03856s ago] ('019',)
2025-03-07 20:27:27,583 - sqlalchemy.engine.Engine - INFO - INSERT INTO used_phone_numbers (phone_number, created_at) VALUES (?, ?)
2025-03-07 20:27:27,583 - sqlalchemy.engine.Engine - INFO - [cached since 0.02283s ago] ('019', '2025-03-07 17:27:27.583843')
2025-03-07 20:27:27,587 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:27,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:27,591 - sqlalchemy.engine.Engine - INFO - SELECT used_phone_numbers.id, used_phone_numbers.phone_number, used_phone_numbers.created_at 
FROM used_phone_numbers 
WHERE used_phone_numbers.id = ?
2025-03-07 20:27:27,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.02207s ago] (8,)
2025-03-07 20:27:27,702 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:27:27,702 - aiogram.event - INFO - Update id=117256258 is handled. Duration 843 ms by bot id=8126821875
2025-03-07 20:27:44,169 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:27:44,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:44,172 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:27:44,172 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (7442982117,)
2025-03-07 20:27:44,174 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:27:44,297 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:27:44,299 - aiogram.event - INFO - Update id=117256259 is handled. Duration 1547 ms by bot id=8126821875
2025-03-07 20:27:46,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:46,420 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:27:46,420 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2025-03-07 20:27:46,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:27:46,585 - aiogram.event - INFO - Update id=117256260 is handled. Duration 327 ms by bot id=8126821875
2025-03-07 20:27:48,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:48,994 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:27:48,995 - sqlalchemy.engine.Engine - INFO - [cached since 2.574s ago] ()
2025-03-07 20:27:49,227 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:27:49,228 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] (7442982117,)
2025-03-07 20:27:49,230 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 20:27:49,231 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] (1, 0)
2025-03-07 20:27:49,235 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 20:27:49,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] (1, '2025-03-07 17:27:49.232728', 1, 7)
2025-03-07 20:27:49,240 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:49,245 - handlers.worker - INFO - Пользователь 7442982117 берет 1 сессий
2025-03-07 20:27:49,245 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:27:49,248 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:49,249 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:27:49,249 - sqlalchemy.engine.Engine - INFO - [cached since 5.078s ago] (7442982117,)
2025-03-07 20:27:49,250 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:27:49,252 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:27:49,252 - database.repositories - INFO -   Текущие значения: taken=0, empty=0
2025-03-07 20:27:49,252 - database.repositories - INFO -   Добавляем: taken=1, empty=0
2025-03-07 20:27:49,252 - database.repositories - INFO -   Новые значения: taken=1, empty=0
2025-03-07 20:27:49,254 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:27:49,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('2025-03-07 17:27:49.252571', 1, 0, 7442982117)
2025-03-07 20:27:49,256 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:27:49,259 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:27:49,260 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:27:49,260 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:27:49,260 - sqlalchemy.engine.Engine - INFO - [cached since 5.089s ago] (7442982117,)
2025-03-07 20:27:49,262 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:27:49,262 - database.repositories - INFO - Пользователь после обновления: taken=1, empty=0
2025-03-07 20:27:49,657 - utils.archive - INFO - Удалена папка сессии: session_011
2025-03-07 20:27:49,772 - handlers.worker - INFO - Сессии успешно выданы пользователю 7442982117. Всего взято: 1
2025-03-07 20:27:49,772 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:27:49,774 - aiogram.event - INFO - Update id=117256261 is handled. Duration 781 ms by bot id=8126821875
2025-03-07 20:28:02,835 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:28:02,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:28:02,838 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:28:02,839 - sqlalchemy.engine.Engine - INFO - [cached since 18.67s ago] (7442982117,)
2025-03-07 20:28:02,840 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:28:03,362 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:28:03,363 - aiogram.event - INFO - Update id=117256262 is handled. Duration 1827 ms by bot id=8126821875
2025-03-07 20:28:04,965 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875
2025-03-07 20:28:04,966 - handlers.worker - INFO - Запрос актуальной статистики для пользователя 8126821875
2025-03-07 20:28:04,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:28:04,968 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:28:04,969 - sqlalchemy.engine.Engine - INFO - [cached since 20.8s ago] (8126821875,)
2025-03-07 20:28:04,970 - database.repositories - INFO - Актуальная статистика пользователя 8126821875 из базы данных: taken=0, empty=0
2025-03-07 20:28:04,970 - handlers.worker - INFO - Актуальная статистика пользователя 8126821875: taken=0, empty=0
2025-03-07 20:28:04,970 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:28:05,082 - handlers.worker - INFO - Статистика отправлена пользователю 8126821875
2025-03-07 20:28:05,082 - aiogram.event - INFO - Update id=117256263 is handled. Duration 217 ms by bot id=8126821875
2025-03-07 20:30:03,691 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:30:03,942 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:30:03,944 - __main__ - INFO - Бот остановлен
2025-03-07 20:30:48,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:30:48,645 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:30:48,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:30:48,647 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:30:48,647 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:30:48,648 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:30:48,648 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:30:48,649 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:30:48,649 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:30:48,649 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:30:48,650 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:30:48,650 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:30:48,651 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:30:48,652 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:30:48,899 - __main__ - INFO - Бот запущен
2025-03-07 20:30:48,899 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:30:49,177 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:30:54,967 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:30:54,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:30:54,978 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:30:54,978 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (7442982117,)
2025-03-07 20:30:54,980 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:30:55,177 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:30:55,178 - aiogram.event - INFO - Update id=117256264 is handled. Duration 1797 ms by bot id=8126821875
2025-03-07 20:30:56,059 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875 через текстовую кнопку
2025-03-07 20:30:56,060 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:30:56,061 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:30:56,062 - aiogram.event - INFO - Update id=117256265 is not handled. Duration 93 ms by bot id=8126821875
2025-03-07 20:30:56,062 - aiogram.event - ERROR - Cause exception while process update id=117256265 by bot id=8126821875
ArgumentError: List argument must consist only of tuples or dictionaries
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 154, in worker_button_handler
    await show_statistics(callback.message)
  File "C:\Users\semen\botikrost\handlers\worker.py", line 34, in show_statistics
    stats = await user_repo.get_fresh_statistics(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 339, in get_fresh_statistics
    result = await self.session.execute(text(query), [user_id])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2200, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1402, in execute
    distilled_parameters = _distill_params_20(parameters)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 32, in sqlalchemy.cyextension.util._distill_params_20
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 23, in sqlalchemy.cyextension.util._check_item
sqlalchemy.exc.ArgumentError: List argument must consist only of tuples or dictionaries
2025-03-07 20:30:58,124 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875 через текстовую кнопку
2025-03-07 20:30:58,125 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:30:58,126 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:30:58,126 - aiogram.event - INFO - Update id=117256266 is not handled. Duration 92 ms by bot id=8126821875
2025-03-07 20:30:58,127 - aiogram.event - ERROR - Cause exception while process update id=117256266 by bot id=8126821875
ArgumentError: List argument must consist only of tuples or dictionaries
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 154, in worker_button_handler
    await show_statistics(callback.message)
  File "C:\Users\semen\botikrost\handlers\worker.py", line 34, in show_statistics
    stats = await user_repo.get_fresh_statistics(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 339, in get_fresh_statistics
    result = await self.session.execute(text(query), [user_id])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2200, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1402, in execute
    distilled_parameters = _distill_params_20(parameters)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 32, in sqlalchemy.cyextension.util._distill_params_20
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 23, in sqlalchemy.cyextension.util._check_item
sqlalchemy.exc.ArgumentError: List argument must consist only of tuples or dictionaries
2025-03-07 20:30:59,241 - aiogram.event - INFO - Update id=117256267 is not handled. Duration 77 ms by bot id=8126821875
2025-03-07 20:30:59,241 - aiogram.event - ERROR - Cause exception while process update id=117256267 by bot id=8126821875
TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 64] Указанное сетевое имя более недоступно
Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 462, in finish_socket_func
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 803, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 466, in finish_socket_func
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 171, in make_request
    async with session.post(
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client.py", line 1197, in __aenter__
    self._resp = await self._coro
                 ^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client.py", line 608, in _request
    await resp.start(conn)
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\client_reqrep.py", line 976, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiohttp\streams.py", line 640, in read
    await self._waiter
aiohttp.client_exceptions.ClientOSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 149, in worker_button_handler
    await callback.answer()
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 64] Указанное сетевое имя более недоступно
2025-03-07 20:32:55,925 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:32:56,176 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:32:56,178 - __main__ - INFO - Бот остановлен
2025-03-07 20:33:02,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:02,009 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:33:02,009 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:33:02,011 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:33:02,011 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:33:02,012 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:33:02,012 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:33:02,013 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:33:02,013 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:33:02,014 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:33:02,014 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:33:02,015 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:33:02,016 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:33:02,016 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:33:02,256 - __main__ - INFO - Бот запущен
2025-03-07 20:33:02,256 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:33:02,496 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:33:04,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:04,382 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:33:04,383 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ()
2025-03-07 20:33:04,596 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:33:04,599 - aiogram.event - INFO - Update id=117256268 is handled. Duration 577 ms by bot id=8126821875
2025-03-07 20:33:06,413 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:06,415 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM sessions 
WHERE sessions.is_taken = 0
2025-03-07 20:33:06,415 - sqlalchemy.engine.Engine - INFO - [cached since 2.033s ago] ()
2025-03-07 20:33:06,535 - sqlalchemy.engine.Engine - INFO - SELECT users.id 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:33:06,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (7442982117,)
2025-03-07 20:33:06,539 - sqlalchemy.engine.Engine - INFO - SELECT sessions.id, sessions.phone_number, sessions.is_taken, sessions.created_at, sessions.taken_at, sessions.user_id 
FROM sessions 
WHERE sessions.is_taken = 0 ORDER BY sessions.created_at
 LIMIT ? OFFSET ?
2025-03-07 20:33:06,540 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] (1, 0)
2025-03-07 20:33:06,543 - sqlalchemy.engine.Engine - INFO - UPDATE sessions SET is_taken=?, taken_at=?, user_id=? WHERE sessions.id = ?
2025-03-07 20:33:06,543 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (1, '2025-03-07 17:33:06.542952', 1, 8)
2025-03-07 20:33:06,546 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:33:06,550 - handlers.worker - INFO - Пользователь 7442982117 берет 1 сессий
2025-03-07 20:33:06,551 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:33:06,552 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:06,553 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:33:06,554 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] (7442982117,)
2025-03-07 20:33:06,555 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=0, empty_logs_count=0
2025-03-07 20:33:06,555 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:33:06,555 - database.repositories - INFO -   Текущие значения: taken=0, empty=0
2025-03-07 20:33:06,555 - database.repositories - INFO -   Добавляем: taken=1, empty=0
2025-03-07 20:33:06,555 - database.repositories - INFO -   Новые значения: taken=1, empty=0
2025-03-07 20:33:06,556 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:33:06,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('2025-03-07 17:33:06.555016', 1, 0, 7442982117)
2025-03-07 20:33:06,558 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:33:06,562 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:33:06,563 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:06,564 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:33:06,564 - sqlalchemy.engine.Engine - INFO - [cached since 0.01064s ago] (7442982117,)
2025-03-07 20:33:06,565 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:33:06,565 - database.repositories - INFO - Пользователь после обновления: taken=1, empty=0
2025-03-07 20:33:06,864 - utils.archive - INFO - Удалена папка сессии: session_019
2025-03-07 20:33:06,970 - handlers.worker - INFO - Сессии успешно выданы пользователю 7442982117. Всего взято: 1
2025-03-07 20:33:06,971 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:33:06,972 - aiogram.event - INFO - Update id=117256269 is handled. Duration 562 ms by bot id=8126821875
2025-03-07 20:33:08,699 - handlers.worker - INFO - Запрос статистики от пользователя 8126821875 через текстовую кнопку
2025-03-07 20:33:08,701 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:33:08,702 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:33:08,702 - aiogram.event - INFO - Update id=117256270 is not handled. Duration 155 ms by bot id=8126821875
2025-03-07 20:33:08,702 - aiogram.event - ERROR - Cause exception while process update id=117256270 by bot id=8126821875
ArgumentError: List argument must consist only of tuples or dictionaries
Traceback (most recent call last):
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\handlers\common.py", line 154, in worker_button_handler
    await show_statistics(callback.message)
  File "C:\Users\semen\botikrost\handlers\worker.py", line 34, in show_statistics
    stats = await user_repo.get_fresh_statistics(user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\database\repositories.py", line 339, in get_fresh_statistics
    result = await self.session.execute(text(query), [user_id])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2200, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\semen\botikrost\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1402, in execute
    distilled_parameters = _distill_params_20(parameters)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 32, in sqlalchemy.cyextension.util._distill_params_20
  File "lib\\sqlalchemy\\cyextension\\util.pyx", line 23, in sqlalchemy.cyextension.util._check_item
sqlalchemy.exc.ArgumentError: List argument must consist only of tuples or dictionaries
2025-03-07 20:40:23,600 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:40:23,852 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:40:23,853 - __main__ - INFO - Бот остановлен
2025-03-07 20:40:27,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:27,199 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-07 20:40:27,199 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:40:27,200 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("passwords")
2025-03-07 20:40:27,200 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:40:27,201 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("logs")
2025-03-07 20:40:27,201 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:40:27,202 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sessions")
2025-03-07 20:40:27,202 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:40:27,203 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("used_phone_numbers")
2025-03-07 20:40:27,203 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-07 20:40:27,205 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:40:27,206 - database.base - INFO - База данных успешно инициализирована
2025-03-07 20:40:27,206 - __main__ - INFO - Используется MemoryStorage для хранения состояний
2025-03-07 20:40:27,476 - __main__ - INFO - Бот запущен
2025-03-07 20:40:27,476 - aiogram.dispatcher - INFO - Start polling
2025-03-07 20:40:27,718 - aiogram.dispatcher - INFO - Run polling for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:40:30,946 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:40:30,949 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:30,957 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:40:30,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (7442982117,)
2025-03-07 20:40:30,959 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:40:31,078 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:31,080 - aiogram.event - INFO - Update id=117256271 is handled. Duration 1545 ms by bot id=8126821875
2025-03-07 20:40:33,540 - handlers.worker - INFO - Запрос статистики от пользователя 7442982117 через инлайн-кнопку
2025-03-07 20:40:33,542 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:33,543 - sqlalchemy.engine.Engine - INFO - 
        SELECT taken_logs_count, empty_logs_count 
        FROM users 
        WHERE user_id = ?
        
2025-03-07 20:40:33,543 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (7442982117,)
2025-03-07 20:40:33,545 - database.repositories - INFO - Свежая статистика пользователя 7442982117 из базы данных: taken=1, empty=0
2025-03-07 20:40:33,745 - handlers.worker - INFO - Статистика отправлена пользователю 7442982117: taken=1, empty=0
2025-03-07 20:40:33,746 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:33,747 - aiogram.event - INFO - Update id=117256272 is handled. Duration 297 ms by bot id=8126821875
2025-03-07 20:40:36,678 - aiogram.event - INFO - Update id=117256273 is handled. Duration 250 ms by bot id=8126821875
2025-03-07 20:40:38,009 - handlers.worker - INFO - Пользователь 7442982117 добавляет 1 пустых логов
2025-03-07 20:40:38,009 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:40:38,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:38,011 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:40:38,012 - sqlalchemy.engine.Engine - INFO - [cached since 7.054s ago] (7442982117,)
2025-03-07 20:40:38,013 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=0
2025-03-07 20:40:38,013 - database.repositories - INFO - Обновление статистики для пользователя 7442982117:
2025-03-07 20:40:38,013 - database.repositories - INFO -   Текущие значения: taken=1, empty=0
2025-03-07 20:40:38,013 - database.repositories - INFO -   Добавляем: taken=0, empty=1
2025-03-07 20:40:38,013 - database.repositories - INFO -   Новые значения: taken=1, empty=1
2025-03-07 20:40:38,014 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, taken_logs_count=?, empty_logs_count=? WHERE users.user_id = ?
2025-03-07 20:40:38,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('2025-03-07 17:40:38.013239', 1, 1, 7442982117)
2025-03-07 20:40:38,017 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:40:38,020 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:40:38,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:38,022 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:40:38,022 - sqlalchemy.engine.Engine - INFO - [cached since 7.064s ago] (7442982117,)
2025-03-07 20:40:38,023 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=1
2025-03-07 20:40:38,023 - database.repositories - INFO - Пользователь после обновления: taken=1, empty=1
2025-03-07 20:40:38,023 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:38,124 - handlers.worker - INFO - Статистика пользователя 7442982117 обновлена: empty_logs_count=1
2025-03-07 20:40:38,124 - aiogram.event - INFO - Update id=117256274 is handled. Duration 109 ms by bot id=8126821875
2025-03-07 20:40:41,117 - database.repositories - INFO - Запрос пользователя с ID 7442982117
2025-03-07 20:40:41,119 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:41,120 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:40:41,120 - sqlalchemy.engine.Engine - INFO - [cached since 10.16s ago] (7442982117,)
2025-03-07 20:40:41,122 - database.repositories - INFO - Найден пользователь: ID=1, user_id=7442982117, taken_logs_count=1, empty_logs_count=1
2025-03-07 20:40:41,261 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:41,262 - aiogram.event - INFO - Update id=117256275 is handled. Duration 1452 ms by bot id=8126821875
2025-03-07 20:40:42,121 - handlers.worker - INFO - Запрос статистики от пользователя 7442982117 через инлайн-кнопку
2025-03-07 20:40:42,123 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:42,123 - sqlalchemy.engine.Engine - INFO - 
        SELECT taken_logs_count, empty_logs_count 
        FROM users 
        WHERE user_id = ?
        
2025-03-07 20:40:42,123 - sqlalchemy.engine.Engine - INFO - [cached since 8.581s ago] (7442982117,)
2025-03-07 20:40:42,125 - database.repositories - INFO - Свежая статистика пользователя 7442982117 из базы данных: taken=1, empty=1
2025-03-07 20:40:42,314 - handlers.worker - INFO - Статистика отправлена пользователю 7442982117: taken=1, empty=1
2025-03-07 20:40:42,314 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:42,316 - aiogram.event - INFO - Update id=117256276 is handled. Duration 296 ms by bot id=8126821875
2025-03-07 20:40:59,498 - database.repositories - INFO - Запрос пользователя с ID 7773781383
2025-03-07 20:40:59,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:59,501 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.user_id = ?
2025-03-07 20:40:59,501 - sqlalchemy.engine.Engine - INFO - [cached since 28.54s ago] (7773781383,)
2025-03-07 20:40:59,502 - database.repositories - INFO - Пользователь с ID 7773781383 не найден
2025-03-07 20:40:59,504 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_id, username, first_name, last_name, is_admin, is_active, created_at, updated_at, taken_logs_count, empty_logs_count, daily_empty_logs_count, last_empty_log_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-07 20:40:59,504 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (7773781383, 'wrldxrd', 'worldwide', None, 1, 1, '2025-03-07 17:40:59.504009', '2025-03-07 17:40:59.504009', 0, 0, 0, None)
2025-03-07 20:40:59,506 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-07 20:40:59,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-07 20:40:59,513 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.user_id, users.username, users.first_name, users.last_name, users.is_admin, users.is_active, users.created_at, users.updated_at, users.taken_logs_count, users.empty_logs_count, users.daily_empty_logs_count, users.last_empty_log_date 
FROM users 
WHERE users.id = ?
2025-03-07 20:40:59,513 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (4,)
2025-03-07 20:40:59,630 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-07 20:40:59,631 - aiogram.event - INFO - Update id=117256277 is handled. Duration 1483 ms by bot id=8126821875
2025-03-07 20:41:14,691 - aiogram.dispatcher - INFO - Polling stopped
2025-03-07 20:41:14,951 - aiogram.dispatcher - INFO - Polling stopped for bot @testsirderobot id=8126821875 - 'test_botik'
2025-03-07 20:41:14,952 - __main__ - INFO - Бот остановлен
